(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(){const e=document.createElement("div");return e.classList.add("projectCreator"),e.innerHTML='\n        <div>\n            <input id="projectName" type="text" placeholder="Project name...">\n            <span class="projectErorrMsg"></span>\n        </div>\n        <div>\n            <button class="projectBtn cancelProjectBtn">Cancel</button>\n            <button class="projectBtn addProjectBtn">Add Project</button>\n        </div>\n    ',e}e.r(t),e.d(t,{vP:()=>a,Xx:()=>u,O4:()=>s,$L:()=>i,vr:()=>d,p6:()=>p,xC:()=>l});class o{constructor(e){this.title=e,this.tasks=[]}get projectHTML(){return function(e){const t=document.createElement("div");return t.classList.add("project"),t.innerHTML=`\n        <i class="fa-solid fa-circle"></i>\n        <div class="projectTitle">${e}</div>\n        <div class="taskCounter"></div>\n        <i class="fa-solid fa-trash bin"></i>\n    `,t}(this.title)}addTask(e){this.tasks.push(e)}removeTask(e){this.tasks.splice(e,1)}}class c{constructor(e,t,n,o,c){this.title=e,this.description=t,this.priority=n,this.dueDate=o,this.project=c,this.completion=!1}get taskHTML(){}}class r{constructor(){this.projects=[]}get allTasks(){return this.projects.reduce(((e,t)=>e.concat(t.tasks)),[])}}function s(){const e=new r;e.projects.push(new o("Home"));const t=new c("exampleTask","testing please work","medium","12/12/12","Home");return e.projects[0].tasks.push(t),localStorage.masterObject=JSON.stringify(e),e}function a(e,t,...n){n.forEach((n=>n.addEventListener(t,e)))}function l(e,t,...n){n.forEach((n=>n.removeEventListener(t,e)))}function i(e){return new o(e)}function d(e,t,n,o,r){return new c(e,t,n,o,r)}function u(e){return e?/^[1-9!@#$%^&*(),.?":{}|<>].*/g.test(e)?{validity:!1,message:"cant start with numbers or special character"}:function(e){return!!m.projects.find((t=>t.title.toLowerCase()==e.toLowerCase()))}(e)?{validity:!1,message:"project name already exsists"}:{validity:!0,message:""}:{validity:!1,message:"cant enter empty name"}}function p(e){return e?e.replace(/T.*:.*/g,"").replace(/-/g,"/"):"not due"}const m=(()=>{if("undefined"!=typeof Storage){if(localStorage.masterObject){const e=new r,t=JSON.parse(localStorage.masterObject);return e.projects=t.projects.map((e=>{const t=new o;return t.tasks=e.tasks.map((e=>Object.assign(new c,e))),Object.assign(t,e)})),localStorage.clear(),localStorage.masterObject=JSON.stringify(e),e}return localStorage.clear(),s()}return localStorage.clear(),s()})();function y(e){const t=document.querySelector("input#projectName"),n=u(t.value);if(!n.validity){const e=document.querySelector("span.projectErorrMsg");return e.textContent=n.message,void setTimeout((()=>{e.textContent=""}),1200)}const o=i(t.value);var c,r;c=o,(r=m).projects.push(c),localStorage.masterObject=JSON.stringify(r),k(o),S()}function v(e){const n=document.querySelector("input#taskTitle"),o=document.querySelector("#taskDescription"),c=document.querySelector("#priority"),r=document.querySelector("#projectSelection"),s=document.querySelector("#dueDate"),a=u(n.value);if(!a.validity){const e=document.querySelector("span.errorMsg");return e.textContent=a.message,void setTimeout((()=>{e.textContent=""}),1200)}const l=p(s.value),i=d(n.value,o.value,c.value,l,r.value);t.saveTask(i,m)}function f(e){const t=document.querySelector("#modalBackground"),n=document.querySelector(".modal"),o=document.querySelector(".cancelTaskBtn"),c=document.querySelector(".fa-x"),r=document.querySelector(".addTaskBtn");l(f,"click",c,o),r.removeEventListener("click",v),t.removeChild(n),t.style.display="none"}function S(e){const t=document.querySelector(".projectCreator"),n=document.querySelector(".projects"),o=document.querySelector(".addProject"),c=document.querySelector(".dropDown"),r=document.querySelector(".addProjectBtn"),s=document.querySelector(".cancelProjectBtn");r.removeEventListener("click",y),s.removeEventListener("click",S),c.removeChild(t),n.style.display="flex",o.style.display="flex"}function k(...e){console.log(e);const t=document.querySelector(".projects");e.forEach((e=>{"Home"!=e.title&&t.appendChild(e.projectHTML)}))}const g=document.querySelector(".menuIcon"),j=document.querySelector(".projectsTitle"),h=document.querySelector(".addTask"),q=document.querySelector(".addProject");document.querySelector("aside"),document.querySelector("main"),g.addEventListener("click",(function(){const e=document.querySelector("main#main");document.querySelector(".taskContainer"),e.classList.toggle("menuIsNotActive")})),j.addEventListener("click",(function(e){const t=document.querySelector(".dropDown"),n=e.target.children[0];"none"==t.style.display?(t.style.display="flex",n.classList.toggle("fa-caret-down"),n.classList.toggle("fa-caret-up")):(t.style.display="none",n.classList.toggle("fa-caret-down"),n.classList.toggle("fa-caret-up"))})),h.addEventListener("click",(function(e){const t=document.querySelector("#modalBackground");if(t.childNodes.length>0)return;t.appendChild(function(e){const t=document.createElement("div");t.classList.add("modal"),t.innerHTML='\n        <div class="taskCreationHeader modalHeader">\n            <div>New Task</div>\n            <i class="fa-solid fa-x"></i>\n        </div>\n        <form class="taskCreationForm">\n            <div class="taskDetails1">\n                <label for="taskTitle">Title:</label>\n                <input class="taskEntry" type="text" id="taskTitle" placeholder="e.g. Pay bills" spellcheck = "true">\n                <span class="errorMsg"></span>\n\n                <label for="taskDescription">Description:</label>\n                <textarea class="taskEntry" id="taskDescription" placeholder="e.g. internet, phone, rent, etc" spellcheck = "true"></textarea>\n\n            </div>\n            <div class="taskDetails2">\n                <label for="dueDate">Due Date:</label>\n                <input type="datetime-local" class="taskEntry" id="dueDate">\n\n                <label for="priority">Priority:</label>\n                <select id="priority" class="taskEntry">\n                    <option value="none" selected>None</option>\n                    <option value="low">Low</option>\n                    <option value="medium">Medium</option>\n                    <option value="high">High</option>\n                </select>\n\n                <label for="projectSelection">Project:</label>\n                <select id="projectSelection" class="taskEntry">\n                \n                </select>\n            </div>\n            <div class="taskCreationDecision">\n                <button type="button" class="cancelTaskBtn modalBtn cancelModalBtn">Cancel</button>\n                <button type="button" class="addTaskBtn modalBtn addModalBtn">Add task</button>\n            </div>\n\n        </form>\n\n    ';const n=t.querySelector("#projectSelection");return e.projects.forEach((e=>{const t=document.createElement("option");t.textContent=e.title,"Home"==e.title&&(t.selected=!0),n.appendChild(t)})),t}(m));const n=document.querySelector(".fa-x"),o=document.querySelector(".cancelTaskBtn"),c=document.querySelector(".addTaskBtn");a(f,"click",n,o),c.addEventListener("click",v),t.style.display="flex"})),q.addEventListener("click",(function(e){n();const t=document.querySelector(".projects"),o=document.querySelector(".addProject");document.querySelector(".dropDown").appendChild(n());const c=document.querySelector(".addProjectBtn"),r=document.querySelector(".cancelProjectBtn");c.addEventListener("click",y),r.addEventListener("click",S),t.style.display="none",o.style.display="none"})),console.log(m),k(...m.projects)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q25EQU8sUUFBUUMsSUFBSSxHQUNaLEtBQWtCLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL21vZHVsZXMvZG9tQ3JlYXRpb24uanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9zcmMvbW9kdWxlcy9jbGFzc2VzLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL21vZHVsZXMvZnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9zcmMvbW9kdWxlcy9zdG9yYWdlLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL21vZHVsZXMvZnVuY3Rpb25CdW5kbGVyLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL21vZHVsZXMvVUltYW5pdXB1bGF0aW9uLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0IHsgbWFzdGVyT2JqZWN0IH0gZnJvbSBcIi4vc3RvcmFnZVwiXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFza01vZGFsKG1hc3Rlck9iail7XHJcbiAgICBjb25zdCB0YXNrQ3JlYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgIHRhc2tDcmVhdG9yLmNsYXNzTGlzdC5hZGQoXCJtb2RhbFwiKVxyXG4gICAgdGFza0NyZWF0b3IuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrQ3JlYXRpb25IZWFkZXIgbW9kYWxIZWFkZXJcIj5cclxuICAgICAgICAgICAgPGRpdj5OZXcgVGFzazwvZGl2PlxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXhcIj48L2k+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGZvcm0gY2xhc3M9XCJ0YXNrQ3JlYXRpb25Gb3JtXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrRGV0YWlsczFcIj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ0YXNrVGl0bGVcIj5UaXRsZTo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwidGFza0VudHJ5XCIgdHlwZT1cInRleHRcIiBpZD1cInRhc2tUaXRsZVwiIHBsYWNlaG9sZGVyPVwiZS5nLiBQYXkgYmlsbHNcIiBzcGVsbGNoZWNrID0gXCJ0cnVlXCI+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yTXNnXCI+PC9zcGFuPlxyXG5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ0YXNrRGVzY3JpcHRpb25cIj5EZXNjcmlwdGlvbjo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPHRleHRhcmVhIGNsYXNzPVwidGFza0VudHJ5XCIgaWQ9XCJ0YXNrRGVzY3JpcHRpb25cIiBwbGFjZWhvbGRlcj1cImUuZy4gaW50ZXJuZXQsIHBob25lLCByZW50LCBldGNcIiBzcGVsbGNoZWNrID0gXCJ0cnVlXCI+PC90ZXh0YXJlYT5cclxuXHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFza0RldGFpbHMyXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZHVlRGF0ZVwiPkR1ZSBEYXRlOjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImRhdGV0aW1lLWxvY2FsXCIgY2xhc3M9XCJ0YXNrRW50cnlcIiBpZD1cImR1ZURhdGVcIj5cclxuXHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicHJpb3JpdHlcIj5Qcmlvcml0eTo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPHNlbGVjdCBpZD1cInByaW9yaXR5XCIgY2xhc3M9XCJ0YXNrRW50cnlcIj5cclxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibm9uZVwiIHNlbGVjdGVkPk5vbmU8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibG93XCI+TG93PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm1lZGl1bVwiPk1lZGl1bTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJoaWdoXCI+SGlnaDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcblxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInByb2plY3RTZWxlY3Rpb25cIj5Qcm9qZWN0OjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwicHJvamVjdFNlbGVjdGlvblwiIGNsYXNzPVwidGFza0VudHJ5XCI+XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2tDcmVhdGlvbkRlY2lzaW9uXCI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNhbmNlbFRhc2tCdG4gbW9kYWxCdG4gY2FuY2VsTW9kYWxCdG5cIj5DYW5jZWw8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYWRkVGFza0J0biBtb2RhbEJ0biBhZGRNb2RhbEJ0blwiPkFkZCB0YXNrPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8L2Zvcm0+XHJcblxyXG4gICAgYFxyXG4gICAgLy8gYWNjZXNzaW5nIHRoZSBzZWNvbmQgc2VsZWN0IG9wdGlvblxyXG4gICAgY29uc3QgcHJvamVjdFNlbGVjdG9yID0gdGFza0NyZWF0b3IucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0U2VsZWN0aW9uXCIpXHJcbiAgICBtYXN0ZXJPYmoucHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcclxuICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpXHJcbiAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gcHJvamVjdC50aXRsZVxyXG4gICAgICAgIC8vIGRlZmF1bHQgb3B0aW9uXHJcbiAgICAgICAgaWYgKHByb2plY3QudGl0bGUgPT0gXCJIb21lXCIpIG9wdGlvbi5zZWxlY3RlZCA9IHRydWVcclxuXHJcbiAgICAgICAgcHJvamVjdFNlbGVjdG9yLmFwcGVuZENoaWxkKG9wdGlvbilcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB0YXNrQ3JlYXRvclxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvamVjdENyZWF0b3IgKCkge1xyXG4gICAgY29uc3QgcHJvamVjdENyZWF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICBwcm9qZWN0Q3JlYXRvci5jbGFzc0xpc3QuYWRkKFwicHJvamVjdENyZWF0b3JcIilcclxuICAgIHByb2plY3RDcmVhdG9yLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8aW5wdXQgaWQ9XCJwcm9qZWN0TmFtZVwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJQcm9qZWN0IG5hbWUuLi5cIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9qZWN0RXJvcnJNc2dcIj48L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInByb2plY3RCdG4gY2FuY2VsUHJvamVjdEJ0blwiPkNhbmNlbDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicHJvamVjdEJ0biBhZGRQcm9qZWN0QnRuXCI+QWRkIFByb2plY3Q8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGBcclxuICAgIHJldHVybiBwcm9qZWN0Q3JlYXRvclxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvamVjdChwcm9qZWN0VGl0bGUpIHtcclxuICAgIGNvbnN0IHByb2plY3RIVE1MID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgcHJvamVjdEhUTUwuY2xhc3NMaXN0LmFkZChcInByb2plY3RcIilcclxuICAgIHByb2plY3RIVE1MLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWNpcmNsZVwiPjwvaT5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJvamVjdFRpdGxlXCI+JHtwcm9qZWN0VGl0bGV9PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRhc2tDb3VudGVyXCI+PC9kaXY+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS10cmFzaCBiaW5cIj48L2k+XHJcbiAgICBgXHJcbiAgICByZXR1cm4gcHJvamVjdEhUTUxcclxufSIsImltcG9ydCAqIGFzIGNyZWF0aW9uIGZyb20gXCIuL2RvbUNyZWF0aW9uXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0IHtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlXHJcbiAgICAgICAgdGhpcy50YXNrcyA9IFtdXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldCBwcm9qZWN0SFRNTCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0aW9uLmNyZWF0ZVByb2plY3QodGhpcy50aXRsZSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgYWRkVGFzayh0YXNrKXtcclxuICAgICAgICB0aGlzLnRhc2tzLnB1c2godGFzaylcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVUYXNrKHRhc2tJbmRleCkge1xyXG4gICAgICAgIHRoaXMudGFza3Muc3BsaWNlKHRhc2tJbmRleCwgMSlcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyB0YXNrIHtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLGRlc2NyaXB0aW9uLHByaW9yaXR5LGR1ZURhdGUscHJvamVjdCkge1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICAgICAgdGhpcy5wcmlvcml0eT0gcHJpb3JpdHk7XHJcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcclxuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0XHJcbiAgICAgICAgdGhpcy5jb21wbGV0aW9uID0gIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgIFxyXG4gICAgZ2V0IHRhc2tIVE1MICgpIHtcclxuICAgICAgICByZXR1cm4gXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBtYXN0ZXJPYmplY3Qge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0cyA9IFtdXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFsbFRhc2tzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3RzLnJlZHVjZSgodGFza3NBcnJheSxwcm9qZWN0KT0+KFxyXG4gICAgICAgICAgICB0YXNrc0FycmF5LmNvbmNhdChwcm9qZWN0LnRhc2tzKSksW10pXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBjbHMgZnJvbSBcIi4vY2xhc3Nlc1wiO1xyXG5pbXBvcnQgKiBhcyBzdHIgZnJvbSBcIi4vc3RvcmFnZVwiXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRmlyc3RUaW1lTWFzdGVyT2JqKCkge1xyXG4gICAgLy8gY3JlYXRpbmcgbWFzdGVyIG9iamVjdFxyXG4gICAgY29uc3QgbWFzdGVyT2JqZWN0ID0gbmV3IGNscy5tYXN0ZXJPYmplY3QoKVxyXG4gICAgLy8gYWRkaW5nIGhvbWUgcHJvamVjdFxyXG4gICAgbWFzdGVyT2JqZWN0LnByb2plY3RzLnB1c2gobmV3IGNscy5Qcm9qZWN0KFwiSG9tZVwiKSlcclxuICAgIC8vIGFkZGluZyBleGFtcGxlIHRhc2tcclxuICAgIGNvbnN0IGV4YW1wbGVUYXNrID0gbmV3IGNscy50YXNrKFwiZXhhbXBsZVRhc2tcIixcInRlc3RpbmcgcGxlYXNlIHdvcmtcIiwgXCJtZWRpdW1cIixcIjEyLzEyLzEyXCIsXCJIb21lXCIpXHJcbiAgICBtYXN0ZXJPYmplY3QucHJvamVjdHNbMF0udGFza3MucHVzaChleGFtcGxlVGFzaylcclxuICAgIGxvY2FsU3RvcmFnZS5tYXN0ZXJPYmplY3QgPSBKU09OLnN0cmluZ2lmeShtYXN0ZXJPYmplY3QpICAgIFxyXG4gICAgcmV0dXJuIG1hc3Rlck9iamVjdFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkRXZlbnQgKGZ1bmMsZXZlbnQsIC4uLmVsZW1lbnRzICkge1xyXG4gICAgZWxlbWVudHMuZm9yRWFjaChlbGVtZW50PT5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsZnVuYykpfTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFdmVudCAoZnVuYyxldmVudCwgLi4uZWxlbWVudHMgKSB7XHJcbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQ9PiBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsZnVuYykpfTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0KGlucHV0VmFsdWUpe1xyXG4gICAgY29uc3QgbmV3UHJvamVjdCA9IG5ldyBjbHMuUHJvamVjdChpbnB1dFZhbHVlKVxyXG4gICAgLy8gIGZvciBleHBhbnNpb24gaWYgbmVlZGVkXHJcbiAgICByZXR1cm4gbmV3UHJvamVjdFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayh0aXRsZSxkZXNjcmlwdGlvbixwcmlvcml0eSxkdWVEYXRlLHByb2plY3QpIHtcclxuICAgIGNvbnN0IG5ld1Rhc2sgPSBuZXcgY2xzLnRhc2sodGl0bGUsZGVzY3JpcHRpb24scHJpb3JpdHksZHVlRGF0ZSxwcm9qZWN0KVxyXG4gICAgcmV0dXJuIG5ld1Rhc2tcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrTmFtZVZhbGlkaXR5KG5hbWUpIHtcclxuICAgIGNvbnN0IEludmFsaWRQYXR0ZXJuID0gL15bMS05IUAjJCVeJiooKSwuP1wiOnt9fDw+XS4qL2dcclxuICAgIGlmICghbmFtZSkgcmV0dXJuIHtcclxuICAgICAgICAgICAgdmFsaWRpdHk6ZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiY2FudCBlbnRlciBlbXB0eSBuYW1lXCJcclxuICAgICAgICB9IFxyXG4gICAgZWxzZSBpZiAoSW52YWxpZFBhdHRlcm4udGVzdChuYW1lKSkgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZGl0eTpmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBcImNhbnQgc3RhcnQgd2l0aCBudW1iZXJzIG9yIHNwZWNpYWwgY2hhcmFjdGVyXCJcclxuICAgICAgICB9XHJcbiAgICBlbHNlIGlmIChjaGVja1JlcGVhdGVkUHJvamVjdE5hbWUobmFtZSkpIHJldHVybiB7XHJcbiAgICAgICAgdmFsaWRpdHk6ZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogXCJwcm9qZWN0IG5hbWUgYWxyZWFkeSBleHNpc3RzXCJcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdmFsaWRpdHk6dHJ1ZSxcclxuICAgICAgICBtZXNzYWdlIDogXCJcIlxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja1JlcGVhdGVkUHJvamVjdE5hbWUgKG5hbWUpIHtcclxuICAgIHJldHVybiAhIShzdHIubWFzdGVyT2JqZWN0LnByb2plY3RzLmZpbmQocHJvamVjdCA9PlxyXG4gICAgICAgIHByb2plY3QudGl0bGUudG9Mb3dlckNhc2UoKSA9PSBuYW1lLnRvTG93ZXJDYXNlKCkpKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZSAoZGF0ZSkge1xyXG4gICAgaWYgKCFkYXRlKSByZXR1cm4gXCJub3QgZHVlXCJcclxuICAgIC8vIHJlbW92aW5nIHRpbWUgYW5kIHJlcGxhY2luZyAtIHdpdGggL1xyXG4gICAgcmV0dXJuIGRhdGUucmVwbGFjZSggL1QuKjouKi9nICxcIlwiKS5yZXBsYWNlKC8tL2csIFwiL1wiKVxyXG59IiwiaW1wb3J0IHtjcmVhdGVGaXJzdFRpbWVNYXN0ZXJPYmp9IGZyb20gXCIuL2Z1bmN0aW9uXCJcclxuaW1wb3J0ICogYXMgY2xzIGZyb20gXCIuL2NsYXNzZXNcIlxyXG5cclxuZXhwb3J0IGNvbnN0IG1hc3Rlck9iamVjdCA9ICgoKT0+e1xyXG4gICAgaWYgKHR5cGVvZihTdG9yYWdlKSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UubWFzdGVyT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld01hc3Rlck9iamVjdCA9IG5ldyBjbHMubWFzdGVyT2JqZWN0KClcclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkTWFzdGVyT2JqZWN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubWFzdGVyT2JqZWN0KVxyXG4gICAgICAgICAgICAvLyB0cmFuc2ZlcmluZyBhbGwgcHJvamVjdHMgYW5kIHRhc2tzXHJcbiAgICAgICAgICAgIG5ld01hc3Rlck9iamVjdC5wcm9qZWN0cyA9IHN0b3JlZE1hc3Rlck9iamVjdC5wcm9qZWN0cy5tYXAocHJvamVjdD0+e1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UHJvamVjdCA9IG5ldyBjbHMuUHJvamVjdCgpXHJcbiAgICAgICAgICAgICAgICBuZXdQcm9qZWN0LnRhc2tzID0gcHJvamVjdC50YXNrcy5tYXAodGFzaz0+KFxyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obmV3IGNscy50YXNrLHRhc2spKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ld1Byb2plY3QscHJvamVjdCkgXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vIHNhdmluZyB0aGUgbWFzdGVyIG9iamVjdCB0byBsb2NhbCBzdG9yYWdlXHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5tYXN0ZXJPYmplY3QgPSBKU09OLnN0cmluZ2lmeShuZXdNYXN0ZXJPYmplY3QpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXdNYXN0ZXJPYmplY3RcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGp1c3QgdG8gbWFrZSBzdXJlIHRoZSB1c2VyIGRpZG50IGNoYW5nZSB0aGUgbG9jYWwgc3RvcmFnZVxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKSAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlRmlyc3RUaW1lTWFzdGVyT2JqKClcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgeyAgICBcclxuICAgICAgICAvLyBqdXN0IHRvIG1ha2Ugc3VyZSB0aGUgdXNlciBkaWRudCBjaGFuZ2UgdGhlIGxvY2FsIHN0b3JhZ2VcclxuICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKSAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHJldHVybiBjcmVhdGVGaXJzdFRpbWVNYXN0ZXJPYmooKVxyXG4gICAgfVxyXG59KSgpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVQcm9qZWN0IChwcm9qZWN0LG1hc3Rlck9iaikge1xyXG4gICAgbWFzdGVyT2JqLnByb2plY3RzLnB1c2gocHJvamVjdClcclxuICAgIGxvY2FsU3RvcmFnZS5tYXN0ZXJPYmplY3QgPSBKU09OLnN0cmluZ2lmeShtYXN0ZXJPYmopXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYXZlVGFzayh0YXNrLCBtYXN0ZXJPYmopIHtcclxuICAgIChtYXN0ZXJPYmoucHJvamVjdHMuZmluZChwcm9qZWN0ID0+IHByb2plY3QudGl0bGUgPT0gdGFzay5wcm9qZWN0XHJcbiAgICAgICAgKSkudGFza3MucHVzaCh0YXNrKVxyXG4gICAgbG9jYWxTdG9yYWdlLm1hc3Rlck9iamVjdCA9IEpTT04uc3RyaW5naWZ5KG1hc3Rlck9iailcclxufSIsImltcG9ydCAqIGFzIGNyZWF0aW9uIGZyb20gXCIuL2RvbUNyZWF0aW9uXCJcclxuaW1wb3J0ICogYXMgZnVuYyBmcm9tIFwiLi9mdW5jdGlvblwiXHJcbmltcG9ydCAqIGFzIHN0ciBmcm9tIFwiLi9zdG9yYWdlXCJcclxuaW1wb3J0ICogYXMgVUkgZnJvbSBcIi4vVUltYW5pdXB1bGF0aW9uXCJcclxuXHJcbi8vIGZvciB3aGVuIHRoZSB0aGUgdXNlciB3YW50cyB0byBjb25maXJtIHRoZWlyIHByb2plY3QgY3JlYXRpb25cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2plY3QoZXZlbnQpIHtcclxuICAgIGNvbnN0IGlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXQjcHJvamVjdE5hbWVcIilcclxuICAgIGNvbnN0IHZhbHVlSW5mbyA9IGZ1bmMuY2hlY2tOYW1lVmFsaWRpdHkoaW5wdXRGaWVsZC52YWx1ZSlcclxuXHJcbiAgICAvLyBjb25zdCBcclxuICAgIGlmICghdmFsdWVJbmZvLnZhbGlkaXR5KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic3Bhbi5wcm9qZWN0RXJvcnJNc2dcIilcclxuICAgICAgICBlcnJvck1zZy50ZXh0Q29udGVudCA9IHZhbHVlSW5mby5tZXNzYWdlO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PntlcnJvck1zZy50ZXh0Q29udGVudD1cIlwifSwxMjAwKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgLy8gcHJvamVjdCBjcmVhdGlvblxyXG4gICAgY29uc3QgbmV3UHJvamVjdCA9IGZ1bmMuY3JlYXRlUHJvamVjdChpbnB1dEZpZWxkLnZhbHVlKVxyXG4gICAgc3RyLnNhdmVQcm9qZWN0KG5ld1Byb2plY3Qsc3RyLm1hc3Rlck9iamVjdClcclxuICAgIFVJLmFkZFByb2plY3RzKG5ld1Byb2plY3QpXHJcbiAgICAvLyBmaW5pc2hpbmdcclxuICAgIFVJLnJlbW92ZVByb2plY3RDcmVhdGlvbigpXHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayhldmVudCkge1xyXG4gICAgY29uc3QgdGFza05hbWVGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dCN0YXNrVGl0bGVcIilcclxuICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFza0Rlc2NyaXB0aW9uXCIpXHJcbiAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByaW9yaXR5XCIpXHJcbiAgICBjb25zdCBwcm9qZWN0U2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RTZWxlY3Rpb25cIilcclxuICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2R1ZURhdGVcIilcclxuICAgIC8vIGlzIG5hbWUgdmFsaWZcclxuICAgIFxyXG4gICAgY29uc3QgdGFza05hbWVJbmZvID0gZnVuYy5jaGVja05hbWVWYWxpZGl0eSh0YXNrTmFtZUZpZWxkLnZhbHVlKVxyXG4gICAgLy8gY29uc3QgXHJcbiAgICBpZiAoIXRhc2tOYW1lSW5mby52YWxpZGl0eSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInNwYW4uZXJyb3JNc2dcIilcclxuICAgICAgICBlcnJvck1zZy50ZXh0Q29udGVudCA9IHRhc2tOYW1lSW5mby5tZXNzYWdlO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PntlcnJvck1zZy50ZXh0Q29udGVudD1cIlwifSwxMjAwKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZWFibGVEYXRlID0gZnVuYy5mb3JtYXREYXRlKGR1ZURhdGUudmFsdWUpXHJcbiAgICBjb25zdCBuZXdUYXNrID0gZnVuYy5jcmVhdGVUYXNrKFxyXG4gICAgICAgIHRhc2tOYW1lRmllbGQudmFsdWUsXHJcbiAgICAgICAgdGFza0Rlc2NyaXB0aW9uLnZhbHVlLFxyXG4gICAgICAgIHRhc2tQcmlvcml0eS52YWx1ZSxcclxuICAgICAgICB1c2VhYmxlRGF0ZSxcclxuICAgICAgICBwcm9qZWN0U2VsZWN0ZWQudmFsdWVcclxuICAgIClcclxuICAgIGZ1bmMuc2F2ZVRhc2sobmV3VGFzayxzdHIubWFzdGVyT2JqZWN0KVxyXG5cclxufSIsImltcG9ydCAqIGFzIGNyZWF0aW9uIGZyb20gXCIuL2RvbUNyZWF0aW9uXCJcclxuaW1wb3J0ICogYXMgZnVuYyBmcm9tIFwiLi9mdW5jdGlvblwiXHJcbmltcG9ydCAqIGFzIGJ1bmRsZSBmcm9tIFwiLi9mdW5jdGlvbkJ1bmRsZXJcIlxyXG5pbXBvcnQgKiBhcyBzIGZyb20gXCIuL3N0b3JhZ2VcIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlNZW51KCkge1xyXG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtYWluI21haW5cIilcclxuICAgIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tDb250YWluZXJcIilcclxuICAgIG1haW4uY2xhc3NMaXN0LnRvZ2dsZShcIm1lbnVJc05vdEFjdGl2ZVwiKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVByb2plY3RzKGV2ZW50KSB7XHJcbiAgICBjb25zdCBkcm9wRG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZHJvcERvd25cIilcclxuICAgIGNvbnN0IGNhcmV0U3ltYm9sID0gZXZlbnQudGFyZ2V0LmNoaWxkcmVuWzBdXHJcbiAgICBpZiAoZHJvcERvd24uc3R5bGUuZGlzcGxheSA9PSBcIm5vbmVcIikge1xyXG4gICAgICAgIGRyb3BEb3duLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIlxyXG4gICAgICAgIGNhcmV0U3ltYm9sLmNsYXNzTGlzdC50b2dnbGUoXCJmYS1jYXJldC1kb3duXCIpXHJcbiAgICAgICAgY2FyZXRTeW1ib2wuY2xhc3NMaXN0LnRvZ2dsZShcImZhLWNhcmV0LXVwXCIpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRyb3BEb3duLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxyXG4gICAgICAgIGNhcmV0U3ltYm9sLmNsYXNzTGlzdC50b2dnbGUoXCJmYS1jYXJldC1kb3duXCIpXHJcbiAgICAgICAgY2FyZXRTeW1ib2wuY2xhc3NMaXN0LnRvZ2dsZShcImZhLWNhcmV0LXVwXCIpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5TW9kYWwoZXZlbnQpe1xyXG4gICAgY29uc3QgYmFja2dyb3VuZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbEJhY2tncm91bmRcIilcclxuICAgIGlmIChiYWNrZ3JvdW5kTW9kYWwuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSByZXR1cm5cclxuICAgIGJhY2tncm91bmRNb2RhbC5hcHBlbmRDaGlsZChjcmVhdGlvbi5jcmVhdGVUYXNrTW9kYWwocy5tYXN0ZXJPYmplY3QpKVxyXG5cclxuICAgIGNvbnN0IGNyb3NzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mYS14XCIpXHJcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNlbFRhc2tCdG5cIilcclxuICAgIGNvbnN0IGNvbmZpcm1UYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRUYXNrQnRuXCIpXHJcbiAgICAvLyBhZGRpbmcgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICBmdW5jLmFkZEV2ZW50KHJlbW92ZU1vZGFsLFwiY2xpY2tcIixjcm9zcyxjYW5jZWxCdG4pXHJcbiAgICBjb25maXJtVGFzay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixidW5kbGUuY3JlYXRlVGFzaylcclxuXHJcbiAgICBiYWNrZ3JvdW5kTW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVNb2RhbChldmVudCkge1xyXG4gICAgY29uc3QgYmFja2dyb3VuZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbEJhY2tncm91bmRcIilcclxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpXHJcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNlbFRhc2tCdG5cIilcclxuICAgIGNvbnN0IGNyb3NzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mYS14XCIpXHJcbiAgICBjb25zdCBjb25maXJtVGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkVGFza0J0blwiKVxyXG5cclxuICAgIGZ1bmMucmVtb3ZlRXZlbnQocmVtb3ZlTW9kYWwsXCJjbGlja1wiLGNyb3NzLGNhbmNlbEJ0bilcclxuICAgIGNvbmZpcm1UYXNrLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGJ1bmRsZS5jcmVhdGVUYXNrKVxyXG5cclxuICAgIGJhY2tncm91bmRNb2RhbC5yZW1vdmVDaGlsZChmb3JtKVxyXG4gICAgYmFja2dyb3VuZE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVByb2plY3RDcmVhdGlvbihldmVudCkge1xyXG4gICAgY29uc3QgcHJvamVjdENyZWF0b3IgPSBjcmVhdGlvbi5jcmVhdGVQcm9qZWN0Q3JlYXRvcigpXHJcbiAgICBjb25zdCBwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNcIilcclxuICAgIGNvbnN0IGFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFByb2plY3RcIilcclxuICAgIGNvbnN0IGRyb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kcm9wRG93blwiKVxyXG4gICAgZHJvcGRvd24uYXBwZW5kQ2hpbGQoY3JlYXRpb24uY3JlYXRlUHJvamVjdENyZWF0b3IoKSlcclxuICAgIC8vICBidXR0b25zIG9uIG1vZGFsXHJcbiAgICBjb25zdCBjb25maXJtUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkUHJvamVjdEJ0blwiKVxyXG4gICAgY29uc3QgY2FuY2VsUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsUHJvamVjdEJ0blwiKVxyXG5cclxuICAgIGNvbmZpcm1Qcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBidW5kbGUuY3JlYXRlUHJvamVjdClcclxuICAgIGNhbmNlbFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlbW92ZVByb2plY3RDcmVhdGlvbilcclxuXHJcbiAgICBwcm9qZWN0cy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcclxuICAgIGFkZFByb2plY3RCdG4uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUHJvamVjdENyZWF0aW9uKGV2ZW50KSB7XHJcbiAgICBjb25zdCBwcm9qZWN0Q3JlYXRvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdENyZWF0b3JcIilcclxuICAgIGNvbnN0IHByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0c1wiKVxyXG4gICAgY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkUHJvamVjdFwiKVxyXG4gICAgY29uc3QgZHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRyb3BEb3duXCIpICAgIFxyXG4gICAgLy8gIGJ1dHRvbnMgb24gbW9kYWxcclxuICAgIGNvbnN0IGNvbmZpcm1Qcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRQcm9qZWN0QnRuXCIpXHJcbiAgICBjb25zdCBjYW5jZWxQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYW5jZWxQcm9qZWN0QnRuXCIpXHJcblxyXG4gICAgY29uZmlybVByb2plY3RCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJ1bmRsZS5jcmVhdGVQcm9qZWN0KVxyXG4gICAgY2FuY2VsUHJvamVjdEJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIixyZW1vdmVQcm9qZWN0Q3JlYXRpb24pXHJcblxyXG5cclxuICAgIGRyb3Bkb3duLnJlbW92ZUNoaWxkKHByb2plY3RDcmVhdG9yKVxyXG4gICAgcHJvamVjdHMuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiXHJcbiAgICBhZGRQcm9qZWN0QnRuLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIlxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJvamVjdHMoLi4ucHJvamVjdHMpIHtcclxuICAgIGNvbnNvbGUubG9nKHByb2plY3RzKVxyXG4gICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNcIilcclxuICAgIHByb2plY3RzLmZvckVhY2gocHJvamVjdD0+e1xyXG4gICAgICAgIGlmIChwcm9qZWN0LnRpdGxlID09IFwiSG9tZVwiKSByZXR1cm5cclxuICAgICAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3QucHJvamVjdEhUTUwpXHJcbiAgICB9KVxyXG59IiwiaW1wb3J0ICogYXMgc3RyIGZyb20gXCIuL21vZHVsZXMvc3RvcmFnZVwiXHJcbmltcG9ydCAqIGFzIFVJIGZyb20gXCIuL21vZHVsZXMvVUltYW5pdXB1bGF0aW9uXCJcclxuaW1wb3J0ICogYXMgZnVuYyBmcm9tIFwiLi9tb2R1bGVzL2Z1bmN0aW9uXCJcclxuLy8gZWxlbWVudHNcclxuY29uc3QgbWVudUljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnVJY29uXCIpXHJcbmNvbnN0IHByb2plY3RzRHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzVGl0bGVcIilcclxuY29uc3QgYWRkVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkVGFza1wiKVxyXG5jb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRQcm9qZWN0XCIpXHJcbmNvbnN0IHNpZGVCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYXNpZGVcIilcclxuY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtYWluXCIpXHJcbi8vIGV2ZW50IGxpc3RlbmVyc1xyXG5tZW51SWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiAsIFVJLmRpc3BsYXlNZW51KVxyXG5wcm9qZWN0c0Ryb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBVSS5kaXNwbGF5UHJvamVjdHMpXHJcbmFkZFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsVUkuZGlzcGxheU1vZGFsKVxyXG5hZGRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLFVJLmRpc3BsYXlQcm9qZWN0Q3JlYXRpb24pXHJcbi8vIG1haW50aW5nIHNpZGViYXIgaGVpZ2h0XHJcbi8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsZSA9PlxyXG4vLyAgICAgc2lkZUJhci5zdHlsZS5oZWlnaHQgPSBgJHttYWluLnNjcm9sbEhlaWdodH1weGApXHJcbi8vIG90aGVyXHJcbmNvbnNvbGUubG9nKHN0ci5tYXN0ZXJPYmplY3QpXHJcblVJLmFkZFByb2plY3RzKC4uLnN0ci5tYXN0ZXJPYmplY3QucHJvamVjdHMpIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsImNyZWF0ZVByb2plY3RDcmVhdG9yIiwicHJvamVjdENyZWF0b3IiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbm5lckhUTUwiLCJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJ0aXRsZSIsInRoaXMiLCJ0YXNrcyIsInByb2plY3RIVE1MIiwicHJvamVjdFRpdGxlIiwiYWRkVGFzayIsInRhc2siLCJwdXNoIiwicmVtb3ZlVGFzayIsInRhc2tJbmRleCIsInNwbGljZSIsImRlc2NyaXB0aW9uIiwicHJpb3JpdHkiLCJkdWVEYXRlIiwicHJvamVjdCIsImNvbXBsZXRpb24iLCJ0YXNrSFRNTCIsInByb2plY3RzIiwiYWxsVGFza3MiLCJyZWR1Y2UiLCJ0YXNrc0FycmF5IiwiY29uY2F0IiwiY3JlYXRlRmlyc3RUaW1lTWFzdGVyT2JqIiwibWFzdGVyT2JqZWN0IiwiZXhhbXBsZVRhc2siLCJsb2NhbFN0b3JhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkRXZlbnQiLCJmdW5jIiwiZXZlbnQiLCJlbGVtZW50cyIsImZvckVhY2giLCJlbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlucHV0VmFsdWUiLCJjcmVhdGVUYXNrIiwiY2hlY2tOYW1lVmFsaWRpdHkiLCJuYW1lIiwidGVzdCIsInZhbGlkaXR5IiwibWVzc2FnZSIsInRvTG93ZXJDYXNlIiwiY2hlY2tSZXBlYXRlZFByb2plY3ROYW1lIiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJyZXBsYWNlIiwibmV3TWFzdGVyT2JqZWN0Iiwic3RvcmVkTWFzdGVyT2JqZWN0IiwicGFyc2UiLCJtYXAiLCJuZXdQcm9qZWN0IiwiYXNzaWduIiwiY2xlYXIiLCJpbnB1dEZpZWxkIiwicXVlcnlTZWxlY3RvciIsInZhbHVlSW5mbyIsImVycm9yTXNnIiwidGV4dENvbnRlbnQiLCJzZXRUaW1lb3V0IiwibWFzdGVyT2JqIiwidGFza05hbWVGaWVsZCIsInRhc2tEZXNjcmlwdGlvbiIsInRhc2tQcmlvcml0eSIsInByb2plY3RTZWxlY3RlZCIsInRhc2tOYW1lSW5mbyIsInVzZWFibGVEYXRlIiwibmV3VGFzayIsInJlbW92ZU1vZGFsIiwiYmFja2dyb3VuZE1vZGFsIiwiZm9ybSIsImNhbmNlbEJ0biIsImNyb3NzIiwiY29uZmlybVRhc2siLCJyZW1vdmVDaGlsZCIsInN0eWxlIiwiZGlzcGxheSIsInJlbW92ZVByb2plY3RDcmVhdGlvbiIsImFkZFByb2plY3RCdG4iLCJkcm9wZG93biIsImNvbmZpcm1Qcm9qZWN0QnRuIiwiY2FuY2VsUHJvamVjdEJ0biIsImFkZFByb2plY3RzIiwiY29uc29sZSIsImxvZyIsInByb2plY3RDb250YWluZXIiLCJhcHBlbmRDaGlsZCIsIm1lbnVJY29uIiwicHJvamVjdHNEcm9wZG93biIsImFkZFRhc2tCdG4iLCJtYWluIiwidG9nZ2xlIiwiZHJvcERvd24iLCJjYXJldFN5bWJvbCIsInRhcmdldCIsImNoaWxkcmVuIiwiY2hpbGROb2RlcyIsImxlbmd0aCIsInRhc2tDcmVhdG9yIiwicHJvamVjdFNlbGVjdG9yIiwib3B0aW9uIiwic2VsZWN0ZWQiXSwic291cmNlUm9vdCI6IiJ9