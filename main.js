(()=>{"use strict";function e(){const e=document.createElement("div");return e.classList.add("projectCreator"),e.innerHTML='\n        <div>\n            <input id="projectName" type="text" placeholder="Project name...">\n            <span class="projectErorrMsg"></span>\n        </div>\n        <div>\n            <button class="projectBtn cancelProjectBtn">Cancel</button>\n            <button class="projectBtn addProjectBtn">Add Project</button>\n        </div>\n    ',e}class t{constructor(e){this.title=e,this.tasks=[]}get projectHTML(){return function(e){const t=document.createElement("div");return t.classList.add("project"),t.innerHTML=`\n        <i class="fa-solid fa-circle"></i>\n        <div class="projectTitle">${e}</div>\n        <div class="taskCounter"></div>\n        <i class="fa-solid fa-trash bin"></i>\n    `,t}(this.title)}addTask(e){this.tasks.push(e)}removeTask(e){this.tasks.splice(e,1)}}class n{constructor(e,t,n,o,r){this.title=e,this.description=t,this.priority=n,this.dueDate=o,this.project=r,this.completion=!1}get taskHTML(){return function(e,t,n,o,r){const c=document.createElement("div");return c.setAttribute("project",`${o}`),c.classList.add("task"),r&&c.classList.add("completed"),c.innerHTML=`\n        <i class="fa-regular fa-square ${t} "></i>\n        <div class="taskTitle">${e}</div>\n        <button class="taskDetails">Details</button>\n        <div class="taskDate">${n}</div>\n        <i class="fa-solid fa-pen-to-square edit"></i>\n        <i class="fa-solid fa-trash bin"></i>\n    `,c}(this.title,this.priority,this.dueDate,this.project,this.completion)}}class o{constructor(){this.projects=[],this.currentProject="Home"}get tasks(){return this.projects.reduce(((e,t)=>e.concat(t.tasks)),[])}changeCurrentProject(e){this.currentProject=e}}function r(){const e=new o;e.projects.push(new t("Home"));const r=new n("exampleTask","testing please work","medium","12/12/12","Home");return e.projects[0].tasks.push(r),localStorage.masterObject=JSON.stringify(e),e}function c(e){const t=a.projects.indexOf(this);if(-1!=t){a.projects.splice(t,1),e.target.removeEventListener("click",c);const n=document.querySelector(".projects"),o=e.target.parentElement;n.removeChild(o),localStorage.masterObject=JSON.stringify(a)}}function s(e){return e?/^[1-9!@#$%^&*(),.?":{}|<>].*/g.test(e)?{validity:!1,message:"cant start with numbers or special character"}:function(e){return!!a.projects.find((t=>t.title.toLowerCase()==e.toLowerCase()))}(e)?{validity:!1,message:"project name already exsists"}:{validity:!0,message:""}:{validity:!1,message:"cant enter empty name"}}const a=(()=>{if("undefined"!=typeof Storage){if(localStorage.masterObject){const e=new o,r=JSON.parse(localStorage.masterObject);return e.projects=r.projects.map((e=>{const o=new t;return o.tasks=e.tasks.map((e=>Object.assign(new n,e))),o.title=e.title,o})),localStorage.clear(),localStorage.masterObject=JSON.stringify(e),e}return localStorage.clear(),r()}return localStorage.clear(),r()})();function i(e){const n=document.querySelector("input#projectName"),o=s(n.value);if(!o.validity){const e=document.querySelector("span.projectErorrMsg");return e.textContent=o.message,void setTimeout((()=>{e.textContent=""}),1200)}const r=(c=n.value,new t(c));var c,i,l;i=r,(l=a).projects.push(i),localStorage.masterObject=JSON.stringify(l),b(r),j()}function l(e){const t=document.querySelector("input#taskTitle"),o=document.querySelector("#taskDescription"),r=document.querySelector("#priority"),c=document.querySelector("#projectSelection"),i=document.querySelector("#dueDate"),l=s(t.value);if(!l.validity){const e=document.querySelector("span.errorMsg");return e.textContent=l.message,void setTimeout((()=>{e.textContent=""}),1200)}const u=(d=i.value)?d.replace(/-/g,"/"):"not due";var d;const p=function(e,t,o,r,c){return new n(e,t,o,r,c)}(t.value,o.value,r.value,u,c.value);var m,y;m=p,(y=a).projects.find((e=>e.title==m.project)).tasks.push(m),localStorage.masterObject=JSON.stringify(y),h()}function u(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e){u(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===d(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function m(e){u(1,arguments);var t=p(e);return t.setHours(0,0,0,0),t}function y(e,t){u(2,arguments);var n=m(e),o=m(t);return n.getTime()===o.getTime()}function f(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var v={};function k(){return v}function S(e,t){var n,o,r,c,s,a,i,l;u(1,arguments);var d=k(),m=f(null!==(n=null!==(o=null!==(r=null!==(c=null==t?void 0:t.weekStartsOn)&&void 0!==c?c:null==t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==r?r:d.weekStartsOn)&&void 0!==o?o:null===(i=d.locale)||void 0===i||null===(l=i.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var y=p(e),v=y.getDay(),S=(v<m?7:0)+v-m;return y.setDate(y.getDate()-S),y.setHours(0,0,0,0),y}function g(e,t,n){u(2,arguments);var o=S(e,n),r=S(t,n);return o.getTime()===r.getTime()}function h(e){const t=document.querySelector("#modalBackground"),n=document.querySelector(".modal"),o=document.querySelector(".cancelTaskBtn"),r=document.querySelector(".fa-x"),c=document.querySelector(".addTaskBtn");!function(e,t,...n){n.forEach((n=>n.removeEventListener(t,e)))}(h,"click",r,o),c.removeEventListener("click",l),t.removeChild(n),t.style.display="none"}function j(e){const t=document.querySelector(".projectCreator"),n=document.querySelector(".projects"),o=document.querySelector(".addProject"),r=document.querySelector(".dropDown"),c=document.querySelector(".addProjectBtn"),s=document.querySelector(".cancelProjectBtn");c.removeEventListener("click",i),s.removeEventListener("click",j),r.removeChild(t),n.style.display="flex",o.style.display="flex"}function b(...e){const t=document.querySelector(".projects");e.forEach((e=>{if("Home"==e.title)return;const n=e.projectHTML,o=n.querySelector(".bin"),r=n.querySelector(".taskCounter");n.setAttribute("project",`${e.title}`),o.addEventListener("click",c.bind(e)),r.textContent=e.tasks.length,t.appendChild(n)}))}const T=(e=>{document.querySelector("h2.selctionTitle");const t=document.querySelector(".tasks");return{homeTasks:function(){t.innerHTML="",e.tasks.forEach((e=>{t.appendChild(e.taskHTML)}))},todayTasks:function(){t.innerHTML="",e.tasks.forEach((e=>{(function(e){return u(1,arguments),y(e,Date.now())})(new Date(e.dueDate))&&t.appendChild(e.taskHTML)}))},weekTasks:function(){t.innerHTML="",e.tasks.forEach((e=>{(function(e,t){return u(1,arguments),g(e,Date.now(),t)})(new Date(e.dueDate))&&t.appendChild(e.taskHTML)}))},completedTasks:function(){t.innerHTML="",e.tasks.forEach((e=>{e.completion&&t.appendChild(e.taskHTML)}))},projectTasks:function(e){}}})(a),q=document.querySelector(".menuIcon"),w=document.querySelector(".projectsTitle"),L=document.querySelector(".addTask"),E=document.querySelector(".addProject");document.querySelector("aside"),document.querySelector("main"),q.addEventListener("click",(function(){const e=document.querySelector("main#main");document.querySelector(".taskContainer"),e.classList.toggle("menuIsNotActive")})),w.addEventListener("click",(function(e){const t=document.querySelector(".dropDown"),n=e.target.children[0];"none"==t.style.display?(t.style.display="flex",n.classList.toggle("fa-caret-down"),n.classList.toggle("fa-caret-up")):(t.style.display="none",n.classList.toggle("fa-caret-down"),n.classList.toggle("fa-caret-up"))})),L.addEventListener("click",(function(e){const t=document.querySelector("#modalBackground");if(t.childNodes.length>0)return;t.appendChild(function(e){const t=document.createElement("div");t.classList.add("modal"),t.innerHTML='\n        <div class="taskCreationHeader modalHeader">\n            <div>New Task</div>\n            <i class="fa-solid fa-x"></i>\n        </div>\n        <form class="taskCreationForm">\n            <div class="taskDetails1">\n                <label for="taskTitle">Title:</label>\n                <input class="taskEntry" type="text" id="taskTitle" placeholder="e.g. Pay bills" spellcheck = "true">\n                <span class="errorMsg"></span>\n\n                <label for="taskDescription">Description:</label>\n                <textarea class="taskEntry" id="taskDescription" placeholder="e.g. internet, phone, rent, etc" spellcheck = "true"></textarea>\n\n            </div>\n            <div class="taskDetails2">\n                <label for="dueDate">Due Date:</label>\n                <input type="date" class="taskEntry" id="dueDate">\n\n                <label for="priority">Priority:</label>\n                <select id="priority" class="taskEntry">\n                    <option value="none" selected>None</option>\n                    <option value="low">Low</option>\n                    <option value="medium">Medium</option>\n                    <option value="high">High</option>\n                </select>\n\n                <label for="projectSelection">Project:</label>\n                <select id="projectSelection" class="taskEntry">\n                \n                </select>\n            </div>\n            <div class="taskCreationDecision">\n                <button type="button" class="cancelTaskBtn modalBtn cancelModalBtn">Cancel</button>\n                <button type="button" class="addTaskBtn modalBtn addModalBtn">Add task</button>\n            </div>\n\n        </form>\n\n    ';const n=t.querySelector("#projectSelection");return e.projects.forEach((e=>{const t=document.createElement("option");t.textContent=e.title,"Home"==e.title&&(t.selected=!0),n.appendChild(t)})),t}(a));const n=document.querySelector(".fa-x"),o=document.querySelector(".cancelTaskBtn"),r=document.querySelector(".addTaskBtn");!function(e,t,...n){n.forEach((n=>n.addEventListener(t,e)))}(h,"click",n,o),r.addEventListener("click",l),t.style.display="flex"})),E.addEventListener("click",(function(t){e();const n=document.querySelector(".projects"),o=document.querySelector(".addProject");document.querySelector(".dropDown").appendChild(e());const r=document.querySelector(".addProjectBtn"),c=document.querySelector(".cancelProjectBtn");r.addEventListener("click",i),c.addEventListener("click",j),n.style.display="none",o.style.display="none"})),b(...a.projects),T.homeTasks()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FDL0JzRyxFQUFZakosU0FBUzJDLGNBQWMsa0JBQ25Dd0csRUFBY25KLFNBQVMyQyxjQUFjLGdCWGxCeEMsU0FBbUJ5RyxFQUFLN0csS0FBVThHLEdBQ3JDQSxFQUFTQyxTQUFRQyxHQUFTQSxFQUFRYSxpQkFBaUI3SCxFQUFNNkcsSUFBTSxDV21CL0QsQ0FBY04sRUFBWSxRQUFRSSxFQUFNRCxHQUN4Q0UsRUFBWWlCLGlCQUFpQixRQUFRLEdBRXJDckIsRUFBZ0JTLE1BQU1DLFFBQVUsTUFDcEMsSUd6QkFFLEVBQWNTLGlCQUFpQixTSHlDeEIsU0FBZ0M3SCxHQUNaLElBQXZCLE1BQ01kLEVBQVd6QixTQUFTMkMsY0FBYyxhQUNsQ2dILEVBQWdCM0osU0FBUzJDLGNBQWMsZUFDNUIzQyxTQUFTMkMsY0FBYyxhQUMvQjBILFlBQVksS0FFckIsTUFBTVIsRUFBb0I3SixTQUFTMkMsY0FBYyxrQkFDM0NtSCxFQUFtQjlKLFNBQVMyQyxjQUFjLHFCQUVoRGtILEVBQWtCTyxpQkFBaUIsUUFBUyxHQUM1Q04sRUFBaUJNLGlCQUFpQixRQUFTVixHQUUzQ2pJLEVBQVMrSCxNQUFNQyxRQUFVLE9BQ3pCRSxFQUFjSCxNQUFNQyxRQUFVLE1BRWxDLElHcERBLEtBQWtCLFlBQ2xCLGEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC8uL3NyYy9tb2R1bGVzL2RvbUNyZWF0aW9uLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL21vZHVsZXMvY2xhc3Nlcy5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC8uL3NyYy9tb2R1bGVzL2Z1bmN0aW9uLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL21vZHVsZXMvc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC8uL3NyYy9tb2R1bGVzL2Z1bmN0aW9uQnVuZGxlci5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3RvRGF0ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vc3RhcnRPZkRheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lRGF5L2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3RvSW50ZWdlci9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9kZWZhdWx0T3B0aW9ucy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vc3RhcnRPZldlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZVdlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9zcmMvbW9kdWxlcy9VSW1hbml1cHVsYXRpb24uanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVG9kYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVGhpc1dlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWFzdGVyT2JqZWN0IH0gZnJvbSBcIi4vc3RvcmFnZVwiXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFza01vZGFsKG1hc3Rlck9iail7XHJcbiAgICBjb25zdCB0YXNrQ3JlYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgIHRhc2tDcmVhdG9yLmNsYXNzTGlzdC5hZGQoXCJtb2RhbFwiKVxyXG4gICAgdGFza0NyZWF0b3IuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrQ3JlYXRpb25IZWFkZXIgbW9kYWxIZWFkZXJcIj5cclxuICAgICAgICAgICAgPGRpdj5OZXcgVGFzazwvZGl2PlxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXhcIj48L2k+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGZvcm0gY2xhc3M9XCJ0YXNrQ3JlYXRpb25Gb3JtXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrRGV0YWlsczFcIj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ0YXNrVGl0bGVcIj5UaXRsZTo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwidGFza0VudHJ5XCIgdHlwZT1cInRleHRcIiBpZD1cInRhc2tUaXRsZVwiIHBsYWNlaG9sZGVyPVwiZS5nLiBQYXkgYmlsbHNcIiBzcGVsbGNoZWNrID0gXCJ0cnVlXCI+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yTXNnXCI+PC9zcGFuPlxyXG5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ0YXNrRGVzY3JpcHRpb25cIj5EZXNjcmlwdGlvbjo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPHRleHRhcmVhIGNsYXNzPVwidGFza0VudHJ5XCIgaWQ9XCJ0YXNrRGVzY3JpcHRpb25cIiBwbGFjZWhvbGRlcj1cImUuZy4gaW50ZXJuZXQsIHBob25lLCByZW50LCBldGNcIiBzcGVsbGNoZWNrID0gXCJ0cnVlXCI+PC90ZXh0YXJlYT5cclxuXHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFza0RldGFpbHMyXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZHVlRGF0ZVwiPkR1ZSBEYXRlOjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImRhdGVcIiBjbGFzcz1cInRhc2tFbnRyeVwiIGlkPVwiZHVlRGF0ZVwiPlxyXG5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJwcmlvcml0eVwiPlByaW9yaXR5OjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwicHJpb3JpdHlcIiBjbGFzcz1cInRhc2tFbnRyeVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJub25lXCIgc2VsZWN0ZWQ+Tm9uZTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJsb3dcIj5Mb3c8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibWVkaXVtXCI+TWVkaXVtPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImhpZ2hcIj5IaWdoPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICA8L3NlbGVjdD5cclxuXHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicHJvamVjdFNlbGVjdGlvblwiPlByb2plY3Q6PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9XCJwcm9qZWN0U2VsZWN0aW9uXCIgY2xhc3M9XCJ0YXNrRW50cnlcIj5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFza0NyZWF0aW9uRGVjaXNpb25cIj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2FuY2VsVGFza0J0biBtb2RhbEJ0biBjYW5jZWxNb2RhbEJ0blwiPkNhbmNlbDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJhZGRUYXNrQnRuIG1vZGFsQnRuIGFkZE1vZGFsQnRuXCI+QWRkIHRhc2s8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDwvZm9ybT5cclxuXHJcbiAgICBgXHJcbiAgICAvLyBhY2Nlc3NpbmcgdGhlIHNlY29uZCBzZWxlY3Qgb3B0aW9uXHJcbiAgICBjb25zdCBwcm9qZWN0U2VsZWN0b3IgPSB0YXNrQ3JlYXRvci5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RTZWxlY3Rpb25cIilcclxuICAgIG1hc3Rlck9iai5wcm9qZWN0cy5mb3JFYWNoKHByb2plY3QgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIilcclxuICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBwcm9qZWN0LnRpdGxlXHJcbiAgICAgICAgLy8gZGVmYXVsdCBvcHRpb25cclxuICAgICAgICBpZiAocHJvamVjdC50aXRsZSA9PSBcIkhvbWVcIikgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZVxyXG5cclxuICAgICAgICBwcm9qZWN0U2VsZWN0b3IuYXBwZW5kQ2hpbGQob3B0aW9uKVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRhc2tDcmVhdG9yXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0Q3JlYXRvciAoKSB7XHJcbiAgICBjb25zdCBwcm9qZWN0Q3JlYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgIHByb2plY3RDcmVhdG9yLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0Q3JlYXRvclwiKVxyXG4gICAgcHJvamVjdENyZWF0b3IuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgIDxpbnB1dCBpZD1cInByb2plY3ROYW1lXCIgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIlByb2plY3QgbmFtZS4uLlwiPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2plY3RFcm9yck1zZ1wiPjwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicHJvamVjdEJ0biBjYW5jZWxQcm9qZWN0QnRuXCI+Q2FuY2VsPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwcm9qZWN0QnRuIGFkZFByb2plY3RCdG5cIj5BZGQgUHJvamVjdDwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYFxyXG4gICAgcmV0dXJuIHByb2plY3RDcmVhdG9yXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0KHByb2plY3RUaXRsZSkge1xyXG4gICAgY29uc3QgcHJvamVjdEhUTUwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICBwcm9qZWN0SFRNTC5jbGFzc0xpc3QuYWRkKFwicHJvamVjdFwiKVxyXG4gICAgcHJvamVjdEhUTUwuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtY2lyY2xlXCI+PC9pPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwcm9qZWN0VGl0bGVcIj4ke3Byb2plY3RUaXRsZX08L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFza0NvdW50ZXJcIj48L2Rpdj5cclxuICAgICAgICA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXRyYXNoIGJpblwiPjwvaT5cclxuICAgIGBcclxuICAgIHJldHVybiBwcm9qZWN0SFRNTFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayh0aXRsZSxwcmlvcml0eSxkdWVEYXRlLHByb2plY3QsY29tcGxldGlvbikge1xyXG4gICAgY29uc3QgdGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgIHRhc2suc2V0QXR0cmlidXRlKFwicHJvamVjdFwiLGAke3Byb2plY3R9YClcclxuICAgIHRhc2suY2xhc3NMaXN0LmFkZChcInRhc2tcIilcclxuICAgIGlmIChjb21wbGV0aW9uKSB0YXNrLmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZWRcIilcclxuICAgIHRhc2suaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIDxpIGNsYXNzPVwiZmEtcmVndWxhciBmYS1zcXVhcmUgJHtwcmlvcml0eX0gXCI+PC9pPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrVGl0bGVcIj4ke3RpdGxlfTwvZGl2PlxyXG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJ0YXNrRGV0YWlsc1wiPkRldGFpbHM8L2J1dHRvbj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFza0RhdGVcIj4ke2R1ZURhdGV9PC9kaXY+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1wZW4tdG8tc3F1YXJlIGVkaXRcIj48L2k+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS10cmFzaCBiaW5cIj48L2k+XHJcbiAgICBgXHJcbiAgICByZXR1cm4gdGFza1xyXG59IiwiaW1wb3J0ICogYXMgY3JlYXRpb24gZnJvbSBcIi4vZG9tQ3JlYXRpb25cIlxyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3Qge1xyXG4gICAgY29uc3RydWN0b3IodGl0bGUpIHtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGVcclxuICAgICAgICB0aGlzLnRhc2tzID0gW11cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHByb2plY3RIVE1MICgpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRpb24uY3JlYXRlUHJvamVjdCh0aGlzLnRpdGxlKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhZGRUYXNrKHRhc2spe1xyXG4gICAgICAgIHRoaXMudGFza3MucHVzaCh0YXNrKVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVRhc2sodGFza0luZGV4KSB7XHJcbiAgICAgICAgdGhpcy50YXNrcy5zcGxpY2UodGFza0luZGV4LCAxKVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIHRhc2sge1xyXG4gICAgY29uc3RydWN0b3IodGl0bGUsZGVzY3JpcHRpb24scHJpb3JpdHksZHVlRGF0ZSxwcm9qZWN0KSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgICAgICB0aGlzLnByaW9yaXR5PSBwcmlvcml0eTtcclxuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xyXG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3RcclxuICAgICAgICB0aGlzLmNvbXBsZXRpb24gPSAgZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgIFxyXG4gICAgZ2V0IHRhc2tIVE1MICgpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRpb24uY3JlYXRlVGFzayhcclxuICAgICAgICAgICAgdGhpcy50aXRsZSxcclxuICAgICAgICAgICAgdGhpcy5wcmlvcml0eSxcclxuICAgICAgICAgICAgdGhpcy5kdWVEYXRlLFxyXG4gICAgICAgICAgICB0aGlzLnByb2plY3QsXHJcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGlvbixcclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgbWFzdGVyT2JqZWN0IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucHJvamVjdHMgPSBbXVxyXG4gICAgICAgIHRoaXMuY3VycmVudFByb2plY3QgPSBcIkhvbWVcIlxyXG4gICAgfVxyXG5cclxuICAgIGdldCB0YXNrcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9qZWN0cy5yZWR1Y2UoKHRhc2tzQXJyYXkscHJvamVjdCk9PihcclxuICAgICAgICAgICAgdGFza3NBcnJheS5jb25jYXQocHJvamVjdC50YXNrcykpLFtdKVxyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZUN1cnJlbnRQcm9qZWN0KG5ld0N1cnJlbnRQcm9qZWN0KSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UHJvamVjdCA9bmV3Q3VycmVudFByb2plY3RcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbiIsImltcG9ydCAqIGFzIGNscyBmcm9tIFwiLi9jbGFzc2VzXCI7XHJcbmltcG9ydCAqIGFzIHN0ciBmcm9tIFwiLi9zdG9yYWdlXCJcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGaXJzdFRpbWVNYXN0ZXJPYmooKSB7XHJcbiAgICAvLyBjcmVhdGluZyBtYXN0ZXIgb2JqZWN0XHJcbiAgICBjb25zdCBtYXN0ZXJPYmplY3QgPSBuZXcgY2xzLm1hc3Rlck9iamVjdCgpXHJcbiAgICAvLyBhZGRpbmcgaG9tZSBwcm9qZWN0XHJcbiAgICBtYXN0ZXJPYmplY3QucHJvamVjdHMucHVzaChuZXcgY2xzLlByb2plY3QoXCJIb21lXCIpKVxyXG4gICAgLy8gYWRkaW5nIGV4YW1wbGUgdGFza1xyXG4gICAgY29uc3QgZXhhbXBsZVRhc2sgPSBuZXcgY2xzLnRhc2soXCJleGFtcGxlVGFza1wiLFwidGVzdGluZyBwbGVhc2Ugd29ya1wiLCBcIm1lZGl1bVwiLFwiMTIvMTIvMTJcIixcIkhvbWVcIilcclxuICAgIG1hc3Rlck9iamVjdC5wcm9qZWN0c1swXS50YXNrcy5wdXNoKGV4YW1wbGVUYXNrKVxyXG4gICAgbG9jYWxTdG9yYWdlLm1hc3Rlck9iamVjdCA9IEpTT04uc3RyaW5naWZ5KG1hc3Rlck9iamVjdCkgICAgXHJcbiAgICByZXR1cm4gbWFzdGVyT2JqZWN0XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRFdmVudCAoZnVuYyxldmVudCwgLi4uZWxlbWVudHMgKSB7XHJcbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQ9PmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCxmdW5jKSl9O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV2ZW50IChmdW5jLGV2ZW50LCAuLi5lbGVtZW50cyApIHtcclxuICAgIGVsZW1lbnRzLmZvckVhY2goZWxlbWVudD0+IGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCxmdW5jKSl9O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2plY3QoaW5wdXRWYWx1ZSl7XHJcbiAgICBjb25zdCBuZXdQcm9qZWN0ID0gbmV3IGNscy5Qcm9qZWN0KGlucHV0VmFsdWUpXHJcbiAgICAvLyAgZm9yIGV4cGFuc2lvbiBpZiBuZWVkZWRcclxuICAgIHJldHVybiBuZXdQcm9qZWN0XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVQcm9qZWN0KGV2ZW50KSB7XHJcbiAgICBjb25zdCByZW1vdmVkUHJvamVjdEluZGV4ID0gc3RyLm1hc3Rlck9iamVjdC5wcm9qZWN0cy5pbmRleE9mKHRoaXMpXHJcblxyXG4gICAgaWYgKHJlbW92ZWRQcm9qZWN0SW5kZXggIT0gLTEpIHtcclxuICAgICAgICBzdHIubWFzdGVyT2JqZWN0LnByb2plY3RzLnNwbGljZShyZW1vdmVkUHJvamVjdEluZGV4LDEpXHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxyZW1vdmVQcm9qZWN0KVxyXG4gICAgICAgIC8vIHJlbW92aW5nIGl0IGZyb20gRE9NXHJcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzXCIpXHJcbiAgICAgICAgY29uc3QgcmVtb3ZlZFByb2plY3QgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudFxyXG4gICAgICAgIHByb2plY3RzLnJlbW92ZUNoaWxkKHJlbW92ZWRQcm9qZWN0KVxyXG5cclxuICAgICAgICAvLyBzYXZlIGNoYW5nZXNcclxuICAgICAgICBzdHIuc2F2ZU1hc3Rlck9iamVjdCgpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUYXNrKHRpdGxlLGRlc2NyaXB0aW9uLHByaW9yaXR5LGR1ZURhdGUscHJvamVjdCkge1xyXG4gICAgY29uc3QgbmV3VGFzayA9IG5ldyBjbHMudGFzayh0aXRsZSxkZXNjcmlwdGlvbixwcmlvcml0eSxkdWVEYXRlLHByb2plY3QpXHJcbiAgICAvLyBmaXIgZXhwYW5zaW9uIGlkIG5lZWRlZFxyXG4gICAgcmV0dXJuIG5ld1Rhc2tcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrTmFtZVZhbGlkaXR5KG5hbWUpIHtcclxuICAgIGNvbnN0IEludmFsaWRQYXR0ZXJuID0gL15bMS05IUAjJCVeJiooKSwuP1wiOnt9fDw+XS4qL2dcclxuICAgIGlmICghbmFtZSkgcmV0dXJuIHtcclxuICAgICAgICAgICAgdmFsaWRpdHk6ZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiY2FudCBlbnRlciBlbXB0eSBuYW1lXCJcclxuICAgICAgICB9IFxyXG4gICAgZWxzZSBpZiAoSW52YWxpZFBhdHRlcm4udGVzdChuYW1lKSkgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZGl0eTpmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBcImNhbnQgc3RhcnQgd2l0aCBudW1iZXJzIG9yIHNwZWNpYWwgY2hhcmFjdGVyXCJcclxuICAgICAgICB9XHJcbiAgICBlbHNlIGlmIChjaGVja1JlcGVhdGVkUHJvamVjdE5hbWUobmFtZSkpIHJldHVybiB7XHJcbiAgICAgICAgdmFsaWRpdHk6ZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogXCJwcm9qZWN0IG5hbWUgYWxyZWFkeSBleHNpc3RzXCJcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdmFsaWRpdHk6dHJ1ZSxcclxuICAgICAgICBtZXNzYWdlIDogXCJcIlxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja1JlcGVhdGVkUHJvamVjdE5hbWUgKG5hbWUpIHtcclxuICAgIHJldHVybiAhIShzdHIubWFzdGVyT2JqZWN0LnByb2plY3RzLmZpbmQocHJvamVjdCA9PlxyXG4gICAgICAgIHByb2plY3QudGl0bGUudG9Mb3dlckNhc2UoKSA9PSBuYW1lLnRvTG93ZXJDYXNlKCkpKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZSAoZGF0ZSkge1xyXG4gICAgaWYgKCFkYXRlKSByZXR1cm4gXCJub3QgZHVlXCJcclxuICAgIC8vcmVwbGFjaW5nIC0gd2l0aCAvXHJcbiAgICByZXR1cm4gZGF0ZS5yZXBsYWNlKC8tL2csIFwiL1wiKVxyXG59XHJcblxyXG4iLCJpbXBvcnQge2NyZWF0ZUZpcnN0VGltZU1hc3Rlck9ian0gZnJvbSBcIi4vZnVuY3Rpb25cIlxyXG5pbXBvcnQgKiBhcyBjbHMgZnJvbSBcIi4vY2xhc3Nlc1wiXHJcblxyXG5leHBvcnQgY29uc3QgbWFzdGVyT2JqZWN0ID0gKCgpPT57XHJcbiAgICBpZiAodHlwZW9mKFN0b3JhZ2UpICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5tYXN0ZXJPYmplY3QpIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3TWFzdGVyT2JqZWN0ID0gbmV3IGNscy5tYXN0ZXJPYmplY3QoKVxyXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRNYXN0ZXJPYmplY3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5tYXN0ZXJPYmplY3QpXHJcbiAgICAgICAgICAgIC8vIHRyYW5zZmVyaW5nIGFsbCBwcm9qZWN0cyBhbmQgdGFza3NcclxuICAgICAgICAgICAgbmV3TWFzdGVyT2JqZWN0LnByb2plY3RzID0gc3RvcmVkTWFzdGVyT2JqZWN0LnByb2plY3RzLm1hcChwcm9qZWN0PT57XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdQcm9qZWN0ID0gbmV3IGNscy5Qcm9qZWN0KClcclxuICAgICAgICAgICAgICAgIG5ld1Byb2plY3QudGFza3MgPSBwcm9qZWN0LnRhc2tzLm1hcCh0YXNrPT57XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IGNscy50YXNrKCksdGFzayk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG5ld1Byb2plY3QudGl0bGUgPSBwcm9qZWN0LnRpdGxlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3UHJvamVjdFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvLyBzYXZpbmcgdGhlIG1hc3RlciBvYmplY3QgdG8gbG9jYWwgc3RvcmFnZVxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKSAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UubWFzdGVyT2JqZWN0ID0gSlNPTi5zdHJpbmdpZnkobmV3TWFzdGVyT2JqZWN0KVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3TWFzdGVyT2JqZWN0XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBqdXN0IHRvIG1ha2Ugc3VyZSB0aGUgdXNlciBkaWRudCBjaGFuZ2UgdGhlIGxvY2FsIHN0b3JhZ2VcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCkgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUZpcnN0VGltZU1hc3Rlck9iaigpXHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHsgICAgXHJcbiAgICAgICAgLy8ganVzdCB0byBtYWtlIHN1cmUgdGhlIHVzZXIgZGlkbnQgY2hhbmdlIHRoZSBsb2NhbCBzdG9yYWdlXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCkgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICByZXR1cm4gY3JlYXRlRmlyc3RUaW1lTWFzdGVyT2JqKClcclxuICAgIH1cclxufSkoKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYXZlUHJvamVjdCAocHJvamVjdCxtYXN0ZXJPYmopIHtcclxuICAgIG1hc3Rlck9iai5wcm9qZWN0cy5wdXNoKHByb2plY3QpXHJcbiAgICBsb2NhbFN0b3JhZ2UubWFzdGVyT2JqZWN0ID0gSlNPTi5zdHJpbmdpZnkobWFzdGVyT2JqKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2F2ZVRhc2sodGFzaywgbWFzdGVyT2JqKSB7XHJcbiAgICAobWFzdGVyT2JqLnByb2plY3RzLmZpbmQocHJvamVjdCA9PiBwcm9qZWN0LnRpdGxlID09IHRhc2sucHJvamVjdFxyXG4gICAgICAgICkpLnRhc2tzLnB1c2godGFzaylcclxuICAgIGxvY2FsU3RvcmFnZS5tYXN0ZXJPYmplY3QgPSBKU09OLnN0cmluZ2lmeShtYXN0ZXJPYmopXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYXZlTWFzdGVyT2JqZWN0KCkge1xyXG4gICAgbG9jYWxTdG9yYWdlLm1hc3Rlck9iamVjdCA9IEpTT04uc3RyaW5naWZ5KG1hc3Rlck9iamVjdClcclxufSIsImltcG9ydCAqIGFzIGNyZWF0aW9uIGZyb20gXCIuL2RvbUNyZWF0aW9uXCJcclxuaW1wb3J0ICogYXMgZnVuYyBmcm9tIFwiLi9mdW5jdGlvblwiXHJcbmltcG9ydCAqIGFzIHN0ciBmcm9tIFwiLi9zdG9yYWdlXCJcclxuaW1wb3J0ICogYXMgVUkgZnJvbSBcIi4vVUltYW5pdXB1bGF0aW9uXCJcclxuXHJcbi8vIGZvciB3aGVuIHRoZSB0aGUgdXNlciB3YW50cyB0byBjb25maXJtIHRoZWlyIHByb2plY3QgY3JlYXRpb25cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2plY3QoZXZlbnQpIHtcclxuICAgIGNvbnN0IGlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXQjcHJvamVjdE5hbWVcIilcclxuICAgIGNvbnN0IHZhbHVlSW5mbyA9IGZ1bmMuY2hlY2tOYW1lVmFsaWRpdHkoaW5wdXRGaWVsZC52YWx1ZSlcclxuXHJcbiAgICAvLyBjb25zdCBcclxuICAgIGlmICghdmFsdWVJbmZvLnZhbGlkaXR5KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic3Bhbi5wcm9qZWN0RXJvcnJNc2dcIilcclxuICAgICAgICBlcnJvck1zZy50ZXh0Q29udGVudCA9IHZhbHVlSW5mby5tZXNzYWdlO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PntlcnJvck1zZy50ZXh0Q29udGVudD1cIlwifSwxMjAwKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgLy8gcHJvamVjdCBjcmVhdGlvblxyXG4gICAgY29uc3QgbmV3UHJvamVjdCA9IGZ1bmMuY3JlYXRlUHJvamVjdChpbnB1dEZpZWxkLnZhbHVlKVxyXG4gICAgc3RyLnNhdmVQcm9qZWN0KG5ld1Byb2plY3Qsc3RyLm1hc3Rlck9iamVjdClcclxuICAgIFVJLmFkZFByb2plY3RzKG5ld1Byb2plY3QpXHJcbiAgICAvLyBmaW5pc2hpbmdcclxuICAgIFVJLnJlbW92ZVByb2plY3RDcmVhdGlvbigpXHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayhldmVudCkge1xyXG4gICAgY29uc3QgdGFza05hbWVGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dCN0YXNrVGl0bGVcIilcclxuICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFza0Rlc2NyaXB0aW9uXCIpXHJcbiAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByaW9yaXR5XCIpXHJcbiAgICBjb25zdCBwcm9qZWN0U2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RTZWxlY3Rpb25cIilcclxuICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2R1ZURhdGVcIilcclxuICAgIC8vIGlzIG5hbWUgdmFsaWZcclxuICAgIFxyXG4gICAgY29uc3QgdGFza05hbWVJbmZvID0gZnVuYy5jaGVja05hbWVWYWxpZGl0eSh0YXNrTmFtZUZpZWxkLnZhbHVlKVxyXG4gICAgLy8gY29uc3QgXHJcbiAgICBpZiAoIXRhc2tOYW1lSW5mby52YWxpZGl0eSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInNwYW4uZXJyb3JNc2dcIilcclxuICAgICAgICBlcnJvck1zZy50ZXh0Q29udGVudCA9IHRhc2tOYW1lSW5mby5tZXNzYWdlO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PntlcnJvck1zZy50ZXh0Q29udGVudD1cIlwifSwxMjAwKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZWFibGVEYXRlID0gZnVuYy5mb3JtYXREYXRlKGR1ZURhdGUudmFsdWUpXHJcbiAgICBjb25zdCBuZXdUYXNrID0gZnVuYy5jcmVhdGVUYXNrKFxyXG4gICAgICAgIHRhc2tOYW1lRmllbGQudmFsdWUsXHJcbiAgICAgICAgdGFza0Rlc2NyaXB0aW9uLnZhbHVlLFxyXG4gICAgICAgIHRhc2tQcmlvcml0eS52YWx1ZSxcclxuICAgICAgICB1c2VhYmxlRGF0ZSxcclxuICAgICAgICBwcm9qZWN0U2VsZWN0ZWQudmFsdWVcclxuICAgIClcclxuICAgIHN0ci5zYXZlVGFzayhuZXdUYXNrLHN0ci5tYXN0ZXJPYmplY3QpXHJcbiAgICAvLyByZW5kZXIgbmV3IHRhc2tzIGZ1bmN0aW9uXHJcbiAgICBVSS5yZW1vdmVNb2RhbCgpXHJcblxyXG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSB0b0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGFuIGluc3RhbmNlIG9mIERhdGUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGl0cyBjbG9uZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBudW1iZXIsIGl0IGlzIHRyZWF0ZWQgYXMgYSB0aW1lc3RhbXAuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIG5vbmUgb2YgdGhlIGFib3ZlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogKipOb3RlKio6ICphbGwqIERhdGUgYXJndW1lbnRzIHBhc3NlZCB0byBhbnkgKmRhdGUtZm5zKiBmdW5jdGlvbiBpcyBwcm9jZXNzZWQgYnkgYHRvRGF0ZWAuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gYXJndW1lbnQgLSB0aGUgdmFsdWUgdG8gY29udmVydFxuICogQHJldHVybnMge0RhdGV9IHRoZSBwYXJzZWQgZGF0ZSBpbiB0aGUgbG9jYWwgdGltZSB6b25lXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ2xvbmUgdGhlIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUobmV3IERhdGUoMjAxNCwgMSwgMTEsIDExLCAzMCwgMzApKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCB0aGUgdGltZXN0YW1wIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUoMTM5MjA5ODQzMDAwMClcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9EYXRlKGFyZ3VtZW50KSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgYXJnU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KTsgLy8gQ2xvbmUgdGhlIGRhdGVcblxuICBpZiAoYXJndW1lbnQgaW5zdGFuY2VvZiBEYXRlIHx8IF90eXBlb2YoYXJndW1lbnQpID09PSAnb2JqZWN0JyAmJiBhcmdTdHIgPT09ICdbb2JqZWN0IERhdGVdJykge1xuICAgIC8vIFByZXZlbnQgdGhlIGRhdGUgdG8gbG9zZSB0aGUgbWlsbGlzZWNvbmRzIHdoZW4gcGFzc2VkIHRvIG5ldyBEYXRlKCkgaW4gSUUxMFxuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudC5nZXRUaW1lKCkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gJ251bWJlcicgfHwgYXJnU3RyID09PSAnW29iamVjdCBOdW1iZXJdJykge1xuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCh0eXBlb2YgYXJndW1lbnQgPT09ICdzdHJpbmcnIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgU3RyaW5nXScpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcIlN0YXJ0aW5nIHdpdGggdjIuMC4wLWJldGEuMSBkYXRlLWZucyBkb2Vzbid0IGFjY2VwdCBzdHJpbmdzIGFzIGRhdGUgYXJndW1lbnRzLiBQbGVhc2UgdXNlIGBwYXJzZUlTT2AgdG8gcGFyc2Ugc3RyaW5ncy4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjc3RyaW5nLWFyZ3VtZW50c1wiKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblxuICAgICAgY29uc29sZS53YXJuKG5ldyBFcnJvcigpLnN0YWNrKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgc3RhcnRPZkRheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSBkYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSBkYXkgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFR1ZSBTZXAgMDIgMjAxNCAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0T2ZEYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJpbXBvcnQgc3RhcnRPZkRheSBmcm9tIFwiLi4vc3RhcnRPZkRheS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgaXNTYW1lRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aClcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIDA2OjAwOjAwIGFuZCA0IFNlcHRlbWJlciAxODowMDowMCBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCwgNiwgMCksIG5ldyBEYXRlKDIwMTQsIDgsIDQsIDE4LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgYW5kIDQgT2N0b2JlciBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTQsIDksIDQpKVxuICogLy89PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIsIDIwMTQgYW5kIDQgU2VwdGVtYmVyLCAyMDE1IGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNSwgOCwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lRGF5KGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkaXJ0eURhdGVMZWZ0KTtcbiAgdmFyIGRhdGVSaWdodFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZVJpZ2h0KTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZkRheS5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZEYXkuZ2V0VGltZSgpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvSW50ZWdlcihkaXJ0eU51bWJlcikge1xuICBpZiAoZGlydHlOdW1iZXIgPT09IG51bGwgfHwgZGlydHlOdW1iZXIgPT09IHRydWUgfHwgZGlydHlOdW1iZXIgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHZhciBudW1iZXIgPSBOdW1iZXIoZGlydHlOdW1iZXIpO1xuXG4gIGlmIChpc05hTihudW1iZXIpKSB7XG4gICAgcmV0dXJuIG51bWJlcjtcbiAgfVxuXG4gIHJldHVybiBudW1iZXIgPCAwID8gTWF0aC5jZWlsKG51bWJlcikgOiBNYXRoLmZsb29yKG51bWJlcik7XG59IiwidmFyIGRlZmF1bHRPcHRpb25zID0ge307XG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE9wdGlvbnMoKSB7XG4gIHJldHVybiBkZWZhdWx0T3B0aW9ucztcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0T3B0aW9ucyhuZXdPcHRpb25zKSB7XG4gIGRlZmF1bHRPcHRpb25zID0gbmV3T3B0aW9ucztcbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi4vX2xpYi9kZWZhdWx0T3B0aW9ucy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0RhdGV9IHRoZSBzdGFydCBvZiBhIHdlZWtcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gU3VuIEF1ZyAzMSAyMDE0IDAwOjAwOjAwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRoZSB3ZWVrIHN0YXJ0cyBvbiBNb25kYXksIHRoZSBzdGFydCBvZiB0aGUgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCksIHsgd2Vla1N0YXJ0c09uOiAxIH0pXG4gKiAvLz0+IE1vbiBTZXAgMDEgMjAxNCAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZSwgb3B0aW9ucykge1xuICB2YXIgX3JlZiwgX3JlZjIsIF9yZWYzLCBfb3B0aW9ucyR3ZWVrU3RhcnRzT24sIF9vcHRpb25zJGxvY2FsZSwgX29wdGlvbnMkbG9jYWxlJG9wdGlvLCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwsIF9kZWZhdWx0T3B0aW9ucyRsb2NhbDI7XG5cbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIHZhciB3ZWVrU3RhcnRzT24gPSB0b0ludGVnZXIoKF9yZWYgPSAoX3JlZjIgPSAoX3JlZjMgPSAoX29wdGlvbnMkd2Vla1N0YXJ0c09uID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX29wdGlvbnMkd2Vla1N0YXJ0c09uICE9PSB2b2lkIDAgPyBfb3B0aW9ucyR3ZWVrU3RhcnRzT24gOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb3B0aW9ucyRsb2NhbGUgPSBvcHRpb25zLmxvY2FsZSkgPT09IG51bGwgfHwgX29wdGlvbnMkbG9jYWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29wdGlvbnMkbG9jYWxlJG9wdGlvID0gX29wdGlvbnMkbG9jYWxlLm9wdGlvbnMpID09PSBudWxsIHx8IF9vcHRpb25zJGxvY2FsZSRvcHRpbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkbG9jYWxlJG9wdGlvLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX3JlZjMgIT09IHZvaWQgMCA/IF9yZWYzIDogZGVmYXVsdE9wdGlvbnMud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmMiAhPT0gdm9pZCAwID8gX3JlZjIgOiAoX2RlZmF1bHRPcHRpb25zJGxvY2FsID0gZGVmYXVsdE9wdGlvbnMubG9jYWxlKSA9PT0gbnVsbCB8fCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGVmYXVsdE9wdGlvbnMkbG9jYWwyID0gX2RlZmF1bHRPcHRpb25zJGxvY2FsLm9wdGlvbnMpID09PSBudWxsIHx8IF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmICE9PSB2b2lkIDAgPyBfcmVmIDogMCk7IC8vIFRlc3QgaWYgd2Vla1N0YXJ0c09uIGlzIGJldHdlZW4gMCBhbmQgNiBfYW5kXyBpcyBub3QgTmFOXG5cbiAgaWYgKCEod2Vla1N0YXJ0c09uID49IDAgJiYgd2Vla1N0YXJ0c09uIDw9IDYpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3dlZWtTdGFydHNPbiBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNiBpbmNsdXNpdmVseScpO1xuICB9XG5cbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XG4gIHZhciBkaWZmID0gKGRheSA8IHdlZWtTdGFydHNPbiA/IDcgOiAwKSArIGRheSAtIHdlZWtTdGFydHNPbjtcbiAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gZGlmZik7XG4gIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCBzdGFydE9mV2VlayBmcm9tIFwiLi4vc3RhcnRPZldlZWsvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNTYW1lV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5LFxuICogLy8gYXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDcsIDMxKSwgbmV3IERhdGUoMjAxNCwgOCwgNCksIHtcbiAqICAgd2Vla1N0YXJ0c09uOiAxXG4gKiB9KVxuICogLy89PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMSBKYW51YXJ5IDIwMTQgYW5kIDEgSmFudWFyeSAyMDE1IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDAsIDEpLCBuZXcgRGF0ZSgyMDE1LCAwLCAxKSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lV2VlayhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCwgb3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkaXJ0eURhdGVMZWZ0LCBvcHRpb25zKTtcbiAgdmFyIGRhdGVSaWdodFN0YXJ0T2ZXZWVrID0gc3RhcnRPZldlZWsoZGlydHlEYXRlUmlnaHQsIG9wdGlvbnMpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mV2Vlay5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZXZWVrLmdldFRpbWUoKTtcbn0iLCJpbXBvcnQgKiBhcyBjcmVhdGlvbiBmcm9tIFwiLi9kb21DcmVhdGlvblwiXHJcbmltcG9ydCAqIGFzIGZ1bmMgZnJvbSBcIi4vZnVuY3Rpb25cIlxyXG5pbXBvcnQgKiBhcyBidW5kbGUgZnJvbSBcIi4vZnVuY3Rpb25CdW5kbGVyXCJcclxuaW1wb3J0ICogYXMgc3RyIGZyb20gXCIuL3N0b3JhZ2VcIlxyXG5pbXBvcnQge2lzVG9kYXkgLCBpc1RoaXNXZWVrfSBmcm9tIFwiZGF0ZS1mbnNcIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlNZW51KCkge1xyXG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtYWluI21haW5cIilcclxuICAgIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tDb250YWluZXJcIilcclxuICAgIG1haW4uY2xhc3NMaXN0LnRvZ2dsZShcIm1lbnVJc05vdEFjdGl2ZVwiKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVByb2plY3RzKGV2ZW50KSB7XHJcbiAgICBjb25zdCBkcm9wRG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZHJvcERvd25cIilcclxuICAgIGNvbnN0IGNhcmV0U3ltYm9sID0gZXZlbnQudGFyZ2V0LmNoaWxkcmVuWzBdXHJcbiAgICBpZiAoZHJvcERvd24uc3R5bGUuZGlzcGxheSA9PSBcIm5vbmVcIikge1xyXG4gICAgICAgIGRyb3BEb3duLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIlxyXG4gICAgICAgIGNhcmV0U3ltYm9sLmNsYXNzTGlzdC50b2dnbGUoXCJmYS1jYXJldC1kb3duXCIpXHJcbiAgICAgICAgY2FyZXRTeW1ib2wuY2xhc3NMaXN0LnRvZ2dsZShcImZhLWNhcmV0LXVwXCIpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRyb3BEb3duLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxyXG4gICAgICAgIGNhcmV0U3ltYm9sLmNsYXNzTGlzdC50b2dnbGUoXCJmYS1jYXJldC1kb3duXCIpXHJcbiAgICAgICAgY2FyZXRTeW1ib2wuY2xhc3NMaXN0LnRvZ2dsZShcImZhLWNhcmV0LXVwXCIpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5TW9kYWwoZXZlbnQpe1xyXG4gICAgY29uc3QgYmFja2dyb3VuZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbEJhY2tncm91bmRcIilcclxuICAgIGlmIChiYWNrZ3JvdW5kTW9kYWwuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSByZXR1cm5cclxuICAgIGJhY2tncm91bmRNb2RhbC5hcHBlbmRDaGlsZChjcmVhdGlvbi5jcmVhdGVUYXNrTW9kYWwoc3RyLm1hc3Rlck9iamVjdCkpXHJcblxyXG4gICAgY29uc3QgY3Jvc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZhLXhcIilcclxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsVGFza0J0blwiKVxyXG4gICAgY29uc3QgY29uZmlybVRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tCdG5cIilcclxuICAgIC8vIGFkZGluZyBldmVudCBsaXN0ZW5lcnNcclxuICAgIGZ1bmMuYWRkRXZlbnQocmVtb3ZlTW9kYWwsXCJjbGlja1wiLGNyb3NzLGNhbmNlbEJ0bilcclxuICAgIGNvbmZpcm1UYXNrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGJ1bmRsZS5jcmVhdGVUYXNrKVxyXG5cclxuICAgIGJhY2tncm91bmRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCJcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU1vZGFsKGV2ZW50KSB7XHJcbiAgICBjb25zdCBiYWNrZ3JvdW5kTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsQmFja2dyb3VuZFwiKVxyXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIilcclxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsVGFza0J0blwiKVxyXG4gICAgY29uc3QgY3Jvc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZhLXhcIilcclxuICAgIGNvbnN0IGNvbmZpcm1UYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRUYXNrQnRuXCIpXHJcblxyXG4gICAgZnVuYy5yZW1vdmVFdmVudChyZW1vdmVNb2RhbCxcImNsaWNrXCIsY3Jvc3MsY2FuY2VsQnRuKVxyXG4gICAgY29uZmlybVRhc2sucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsYnVuZGxlLmNyZWF0ZVRhc2spXHJcblxyXG4gICAgYmFja2dyb3VuZE1vZGFsLnJlbW92ZUNoaWxkKGZvcm0pXHJcbiAgICBiYWNrZ3JvdW5kTW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5UHJvamVjdENyZWF0aW9uKGV2ZW50KSB7XHJcbiAgICBjb25zdCBwcm9qZWN0Q3JlYXRvciA9IGNyZWF0aW9uLmNyZWF0ZVByb2plY3RDcmVhdG9yKClcclxuICAgIGNvbnN0IHByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0c1wiKVxyXG4gICAgY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkUHJvamVjdFwiKVxyXG4gICAgY29uc3QgZHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRyb3BEb3duXCIpXHJcbiAgICBkcm9wZG93bi5hcHBlbmRDaGlsZChjcmVhdGlvbi5jcmVhdGVQcm9qZWN0Q3JlYXRvcigpKVxyXG4gICAgLy8gIGJ1dHRvbnMgb24gbW9kYWxcclxuICAgIGNvbnN0IGNvbmZpcm1Qcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRQcm9qZWN0QnRuXCIpXHJcbiAgICBjb25zdCBjYW5jZWxQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYW5jZWxQcm9qZWN0QnRuXCIpXHJcblxyXG4gICAgY29uZmlybVByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJ1bmRsZS5jcmVhdGVQcm9qZWN0KVxyXG4gICAgY2FuY2VsUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVtb3ZlUHJvamVjdENyZWF0aW9uKVxyXG5cclxuICAgIHByb2plY3RzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxyXG4gICAgYWRkUHJvamVjdEJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVQcm9qZWN0Q3JlYXRpb24oZXZlbnQpIHtcclxuICAgIGNvbnN0IHByb2plY3RDcmVhdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0Q3JlYXRvclwiKVxyXG4gICAgY29uc3QgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzXCIpXHJcbiAgICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRQcm9qZWN0XCIpXHJcbiAgICBjb25zdCBkcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZHJvcERvd25cIikgICAgXHJcbiAgICAvLyAgYnV0dG9ucyBvbiBtb2RhbFxyXG4gICAgY29uc3QgY29uZmlybVByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFByb2plY3RCdG5cIilcclxuICAgIGNvbnN0IGNhbmNlbFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNlbFByb2plY3RCdG5cIilcclxuXHJcbiAgICBjb25maXJtUHJvamVjdEJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYnVuZGxlLmNyZWF0ZVByb2plY3QpXHJcbiAgICBjYW5jZWxQcm9qZWN0QnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHJlbW92ZVByb2plY3RDcmVhdGlvbilcclxuXHJcblxyXG4gICAgZHJvcGRvd24ucmVtb3ZlQ2hpbGQocHJvamVjdENyZWF0b3IpXHJcbiAgICBwcm9qZWN0cy5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCJcclxuICAgIGFkZFByb2plY3RCdG4uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRQcm9qZWN0cyguLi5wcm9qZWN0cykge1xyXG4gICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNcIilcclxuICAgIHByb2plY3RzLmZvckVhY2gocHJvamVjdD0+e1xyXG4gICAgICAgIGlmIChwcm9qZWN0LnRpdGxlID09IFwiSG9tZVwiKSByZXR1cm5cclxuICAgICAgICBjb25zdCBwcm9qZWN0RWxlbWVudCA9IHByb2plY3QucHJvamVjdEhUTUw7XHJcbiAgICAgICAgY29uc3QgdHJhc2hJY29uID0gcHJvamVjdEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5iaW5cIilcclxuICAgICAgICBjb25zdCB0YXNrQ291bnRlciA9IHByb2plY3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza0NvdW50ZXJcIilcclxuICAgICAgICBcclxuICAgICAgICBwcm9qZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJwcm9qZWN0XCIsYCR7cHJvamVjdC50aXRsZX1gKVxyXG4gICAgICAgIHRyYXNoSWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jLnJlbW92ZVByb2plY3QuYmluZChwcm9qZWN0KSlcclxuICAgICAgICB0YXNrQ291bnRlci50ZXh0Q29udGVudCA9IHByb2plY3QudGFza3MubGVuZ3RoXHJcblxyXG4gICAgICAgIHByb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdEVsZW1lbnQpXHJcbiAgICB9KVxyXG59XHJcbi8vIHRhc2sgY2hhbmluZyBtb2R1bGVcclxuZXhwb3J0IGNvbnN0IHJlbmRlciA9ICgobWFzdGVyT2JqKT0+e1xyXG4gICAgY29uc3QgU2VsZWN0aW9uVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaDIuc2VsY3Rpb25UaXRsZVwiKVxyXG4gICAgY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tzXCIpXHJcbiAgICBmdW5jdGlvbiBob21lVGFza3MoKSB7XHJcbiAgICAgICAgdGFza3NDb250YWluZXIuaW5uZXJIVE1MPVwiXCJcclxuICAgICAgICBtYXN0ZXJPYmoudGFza3MuZm9yRWFjaCh0YXNrPT57XHJcbiAgICAgICAgICAgIHRhc2tzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2sudGFza0hUTUwpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHRvZGF5VGFza3MoKXtcclxuICAgICAgICB0YXNrc0NvbnRhaW5lci5pbm5lckhUTUw9XCJcIlxyXG4gICAgICAgIG1hc3Rlck9iai50YXNrcy5mb3JFYWNoKHRhc2s9PntcclxuICAgICAgICAgICAgaWYgKGlzVG9kYXkobmV3IERhdGUodGFzay5kdWVEYXRlKSkpXHJcbiAgICAgICAgICAgICAgICB0YXNrc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrLnRhc2tIVE1MKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHdlZWtUYXNrcygpe1xyXG4gICAgICAgIHRhc2tzQ29udGFpbmVyLmlubmVySFRNTD1cIlwiXHJcbiAgICAgICAgbWFzdGVyT2JqLnRhc2tzLmZvckVhY2godGFzaz0+e1xyXG4gICAgICAgICAgICBpZiAoaXNUaGlzV2VlayhuZXcgRGF0ZSh0YXNrLmR1ZURhdGUpKSlcclxuICAgICAgICAgICAgICAgIHRhc2tzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2sudGFza0hUTUwpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29tcGxldGVkVGFza3MgKCkge1xyXG4gICAgICAgIHRhc2tzQ29udGFpbmVyLmlubmVySFRNTD1cIlwiXHJcbiAgICAgICAgbWFzdGVyT2JqLnRhc2tzLmZvckVhY2godGFzaz0+e1xyXG4gICAgICAgICAgICBpZiAodGFzay5jb21wbGV0aW9uKVxyXG4gICAgICAgICAgICAgICAgdGFza3NDb250YWluZXIuYXBwZW5kQ2hpbGQodGFzay50YXNrSFRNTCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwcm9qZWN0VGFza3MgKHByb2plY3QpIHtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaG9tZVRhc2tzLFxyXG4gICAgICAgIHRvZGF5VGFza3MsXHJcbiAgICAgICAgd2Vla1Rhc2tzLFxyXG4gICAgICAgIGNvbXBsZXRlZFRhc2tzLFxyXG4gICAgICAgIHByb2plY3RUYXNrcyxcclxuXHJcbiAgICB9XHJcbn0pKHN0ci5tYXN0ZXJPYmplY3QpIiwiaW1wb3J0IGlzU2FtZURheSBmcm9tIFwiLi4vaXNTYW1lRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1RvZGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZSBpcyB0b2RheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDYgT2N0b2JlciAyMDE0LCBpcyA2IE9jdG9iZXIgMTQ6MDA6MDAgdG9kYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RvZGF5KG5ldyBEYXRlKDIwMTQsIDksIDYsIDE0LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVG9kYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lRGF5KGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSk7XG59IiwiaW1wb3J0IGlzU2FtZVdlZWsgZnJvbSBcIi4uL2lzU2FtZVdlZWsvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNUaGlzV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBzYW1lIHdlZWsgYXMgdGhlIGN1cnJlbnQgZGF0ZT9cbiAqXG4gKiA+IOKaoO+4jyBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gaXMgbm90IHByZXNlbnQgaW4gdGhlIEZQIHN1Ym1vZHVsZSBhc1xuICogPiBpdCB1c2VzIGBEYXRlLm5vdygpYCBpbnRlcm5hbGx5IGhlbmNlIGltcHVyZSBhbmQgY2FuJ3QgYmUgc2FmZWx5IGN1cnJpZWQuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gdGhlIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZSBpcyBpbiB0aGlzIHdlZWtcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyAyNSBTZXB0ZW1iZXIgMjAxNCwgaXMgMjEgU2VwdGVtYmVyIDIwMTQgaW4gdGhpcyB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNUaGlzV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyMSkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgMjUgU2VwdGVtYmVyIDIwMTQgYW5kIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5XG4gKiAvLyBpcyAyMSBTZXB0ZW1iZXIgMjAxNCBpbiB0aGlzIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RoaXNXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIxKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUaGlzV2VlayhkaXJ0eURhdGUsIG9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBpc1NhbWVXZWVrKGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSwgb3B0aW9ucyk7XG59IiwiaW1wb3J0ICogYXMgc3RyIGZyb20gXCIuL21vZHVsZXMvc3RvcmFnZVwiXHJcbmltcG9ydCAqIGFzIFVJIGZyb20gXCIuL21vZHVsZXMvVUltYW5pdXB1bGF0aW9uXCJcclxuaW1wb3J0ICogYXMgZnVuYyBmcm9tIFwiLi9tb2R1bGVzL2Z1bmN0aW9uXCJcclxuLy8gZWxlbWVudHNcclxuY29uc3QgbWVudUljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnVJY29uXCIpXHJcbmNvbnN0IHByb2plY3RzRHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzVGl0bGVcIilcclxuY29uc3QgYWRkVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkVGFza1wiKVxyXG5jb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRQcm9qZWN0XCIpXHJcbmNvbnN0IHNpZGVCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYXNpZGVcIilcclxuY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtYWluXCIpXHJcbi8vIGV2ZW50IGxpc3RlbmVyc1xyXG5tZW51SWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiAsIFVJLmRpc3BsYXlNZW51KVxyXG5wcm9qZWN0c0Ryb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBVSS5kaXNwbGF5UHJvamVjdHMpXHJcbmFkZFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsVUkuZGlzcGxheU1vZGFsKVxyXG5hZGRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLFVJLmRpc3BsYXlQcm9qZWN0Q3JlYXRpb24pXHJcbi8vIG1haW50aW5nIHNpZGViYXIgaGVpZ2h0XHJcbi8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsZSA9PlxyXG4vLyAgICAgc2lkZUJhci5zdHlsZS5oZWlnaHQgPSBgJHttYWluLnNjcm9sbEhlaWdodH1weGApXHJcbi8vIG90aGVyXHJcblVJLmFkZFByb2plY3RzKC4uLnN0ci5tYXN0ZXJPYmplY3QucHJvamVjdHMpXHJcblVJLnJlbmRlci5ob21lVGFza3MoKSJdLCJuYW1lcyI6WyJjcmVhdGVQcm9qZWN0Q3JlYXRvciIsInByb2plY3RDcmVhdG9yIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJIVE1MIiwiUHJvamVjdCIsImNvbnN0cnVjdG9yIiwidGl0bGUiLCJ0aGlzIiwidGFza3MiLCJwcm9qZWN0SFRNTCIsInByb2plY3RUaXRsZSIsImFkZFRhc2siLCJ0YXNrIiwicHVzaCIsInJlbW92ZVRhc2siLCJ0YXNrSW5kZXgiLCJzcGxpY2UiLCJkZXNjcmlwdGlvbiIsInByaW9yaXR5IiwiZHVlRGF0ZSIsInByb2plY3QiLCJjb21wbGV0aW9uIiwidGFza0hUTUwiLCJzZXRBdHRyaWJ1dGUiLCJwcm9qZWN0cyIsImN1cnJlbnRQcm9qZWN0IiwicmVkdWNlIiwidGFza3NBcnJheSIsImNvbmNhdCIsImNoYW5nZUN1cnJlbnRQcm9qZWN0IiwibmV3Q3VycmVudFByb2plY3QiLCJjcmVhdGVGaXJzdFRpbWVNYXN0ZXJPYmoiLCJtYXN0ZXJPYmplY3QiLCJleGFtcGxlVGFzayIsImxvY2FsU3RvcmFnZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZW1vdmVQcm9qZWN0IiwiZXZlbnQiLCJyZW1vdmVkUHJvamVjdEluZGV4IiwidGFyZ2V0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJyZW1vdmVkUHJvamVjdCIsInBhcmVudEVsZW1lbnQiLCJyZW1vdmVDaGlsZCIsImNoZWNrTmFtZVZhbGlkaXR5IiwibmFtZSIsInRlc3QiLCJ2YWxpZGl0eSIsIm1lc3NhZ2UiLCJ0b0xvd2VyQ2FzZSIsImNoZWNrUmVwZWF0ZWRQcm9qZWN0TmFtZSIsIm5ld01hc3Rlck9iamVjdCIsInN0b3JlZE1hc3Rlck9iamVjdCIsInBhcnNlIiwibWFwIiwibmV3UHJvamVjdCIsIk9iamVjdCIsImFzc2lnbiIsImNsZWFyIiwiaW5wdXRGaWVsZCIsInZhbHVlSW5mbyIsInZhbHVlIiwiZXJyb3JNc2ciLCJ0ZXh0Q29udGVudCIsInNldFRpbWVvdXQiLCJpbnB1dFZhbHVlIiwibWFzdGVyT2JqIiwidGFza05hbWVGaWVsZCIsInRhc2tEZXNjcmlwdGlvbiIsInRhc2tQcmlvcml0eSIsInByb2plY3RTZWxlY3RlZCIsInRhc2tOYW1lSW5mbyIsInVzZWFibGVEYXRlIiwiZGF0ZSIsInJlcGxhY2UiLCJuZXdUYXNrIiwiZmluZCIsInJlcXVpcmVkQXJncyIsInJlcXVpcmVkIiwiYXJncyIsImxlbmd0aCIsIlR5cGVFcnJvciIsIl90eXBlb2YiLCJvYmoiLCJTeW1ib2wiLCJpdGVyYXRvciIsInByb3RvdHlwZSIsInRvRGF0ZSIsImFyZ3VtZW50IiwiYXJndW1lbnRzIiwiYXJnU3RyIiwidG9TdHJpbmciLCJjYWxsIiwiRGF0ZSIsImdldFRpbWUiLCJjb25zb2xlIiwid2FybiIsIkVycm9yIiwic3RhY2siLCJOYU4iLCJzdGFydE9mRGF5IiwiZGlydHlEYXRlIiwic2V0SG91cnMiLCJpc1NhbWVEYXkiLCJkaXJ0eURhdGVMZWZ0IiwiZGlydHlEYXRlUmlnaHQiLCJkYXRlTGVmdFN0YXJ0T2ZEYXkiLCJkYXRlUmlnaHRTdGFydE9mRGF5IiwidG9JbnRlZ2VyIiwiZGlydHlOdW1iZXIiLCJudW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsIk1hdGgiLCJjZWlsIiwiZmxvb3IiLCJkZWZhdWx0T3B0aW9ucyIsImdldERlZmF1bHRPcHRpb25zIiwic3RhcnRPZldlZWsiLCJvcHRpb25zIiwiX3JlZiIsIl9yZWYyIiwiX3JlZjMiLCJfb3B0aW9ucyR3ZWVrU3RhcnRzT24iLCJfb3B0aW9ucyRsb2NhbGUiLCJfb3B0aW9ucyRsb2NhbGUkb3B0aW8iLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwiLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwyIiwid2Vla1N0YXJ0c09uIiwibG9jYWxlIiwiUmFuZ2VFcnJvciIsImRheSIsImdldERheSIsImRpZmYiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImlzU2FtZVdlZWsiLCJkYXRlTGVmdFN0YXJ0T2ZXZWVrIiwiZGF0ZVJpZ2h0U3RhcnRPZldlZWsiLCJyZW1vdmVNb2RhbCIsImJhY2tncm91bmRNb2RhbCIsImZvcm0iLCJjYW5jZWxCdG4iLCJjcm9zcyIsImNvbmZpcm1UYXNrIiwiZnVuYyIsImVsZW1lbnRzIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJzdHlsZSIsImRpc3BsYXkiLCJyZW1vdmVQcm9qZWN0Q3JlYXRpb24iLCJhZGRQcm9qZWN0QnRuIiwiZHJvcGRvd24iLCJjb25maXJtUHJvamVjdEJ0biIsImNhbmNlbFByb2plY3RCdG4iLCJhZGRQcm9qZWN0cyIsInByb2plY3RDb250YWluZXIiLCJwcm9qZWN0RWxlbWVudCIsInRyYXNoSWNvbiIsInRhc2tDb3VudGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFwcGVuZENoaWxkIiwicmVuZGVyIiwidGFza3NDb250YWluZXIiLCJob21lVGFza3MiLCJ0b2RheVRhc2tzIiwibm93IiwiaXNUb2RheSIsIndlZWtUYXNrcyIsImlzVGhpc1dlZWsiLCJjb21wbGV0ZWRUYXNrcyIsInByb2plY3RUYXNrcyIsIm1lbnVJY29uIiwicHJvamVjdHNEcm9wZG93biIsImFkZFRhc2tCdG4iLCJtYWluIiwidG9nZ2xlIiwiZHJvcERvd24iLCJjYXJldFN5bWJvbCIsImNoaWxkcmVuIiwiY2hpbGROb2RlcyIsInRhc2tDcmVhdG9yIiwicHJvamVjdFNlbGVjdG9yIiwib3B0aW9uIiwic2VsZWN0ZWQiXSwic291cmNlUm9vdCI6IiJ9