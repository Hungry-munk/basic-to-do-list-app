(()=>{"use strict";function e(){const e=document.createElement("div");return e.classList.add("projectCreator"),e.innerHTML='\n        <div>\n            <input id="projectName" type="text" placeholder="Project name...">\n            <span class="projectErorrMsg"></span>\n        </div>\n        <div>\n            <button class="projectBtn cancelProjectBtn">Cancel</button>\n            <button class="projectBtn addProjectBtn">Add Project</button>\n        </div>\n    ',e}class t{constructor(e){this.title=e,this.tasks=[]}get projectHTML(){return function(e){const t=document.createElement("div");return t.classList.add("project"),t.innerHTML=`\n        <i class="fa-solid fa-circle"></i>\n        <div class="projectTitle">${e}</div>\n        <div class="taskCounter"></div>\n        <i class="fa-solid fa-trash bin"></i>\n    `,t}(this.title)}addTask(e){this.tasks.push(e)}removeTask(e){this.tasks.splice(e,1)}}class n{constructor(e,t,n,o,c){this.title=e,this.description=t,this.priority=n,this.dueDate=o,this.project=c,this.completion=!1}get taskHTML(){return function(e,t,n,o,c){const r=document.createElement("div");return r.setAttribute("project",`${o}`),r.classList.add("task"),c&&r.classList.add("completed"),r.innerHTML=`\n        <i class="fa-regular fa-square ${t} "></i>\n        <div class="taskTitle">${e}</div>\n        <button class="taskDetails">Details</button>\n        <div class="taskDate">${n}</div>\n        <i class="fa-solid fa-pen-to-square edit"></i>\n        <i class="fa-solid fa-trash bin"></i>\n    `,r}(this.title,this.priority,this.dueDate,this.project,this.completion)}}class o{constructor(){this.projects=[]}get tasks(){return this.projects.reduce(((e,t)=>e.concat(t.tasks)),[])}}function c(){const e=new o;e.projects.push(new t("Home"));const c=new n("exampleTask","testing please work","medium","12/12/12","Home");return e.projects[0].tasks.push(c),localStorage.masterObject=JSON.stringify(e),e}function r(e){return e?/^[1-9!@#$%^&*(),.?":{}|<>].*/g.test(e)?{validity:!1,message:"cant start with numbers or special character"}:function(e){return!!s.projects.find((t=>t.title.toLowerCase()==e.toLowerCase()))}(e)?{validity:!1,message:"project name already exsists"}:{validity:!0,message:""}:{validity:!1,message:"cant enter empty name"}}const s=(()=>{if("undefined"!=typeof Storage){if(localStorage.masterObject){const e=new o,c=JSON.parse(localStorage.masterObject);return e.projects=c.projects.map((e=>{const o=new t;return o.tasks=e.tasks.map((e=>Object.assign(new n,e))),o.title=e.title,o})),localStorage.clear(),localStorage.masterObject=JSON.stringify(e),e}return localStorage.clear(),c()}return localStorage.clear(),c()})();function a(e){const n=document.querySelector("input#projectName"),o=r(n.value);if(!o.validity){const e=document.querySelector("span.projectErorrMsg");return e.textContent=o.message,void setTimeout((()=>{e.textContent=""}),1200)}const c=(a=n.value,new t(a));var a,l,i;l=c,(i=s).projects.push(l),localStorage.masterObject=JSON.stringify(i),u(c),d()}function l(e){const t=document.querySelector("input#taskTitle"),o=document.querySelector("#taskDescription"),c=document.querySelector("#priority"),a=document.querySelector("#projectSelection"),l=document.querySelector("#dueDate"),d=r(t.value);if(!d.validity){const e=document.querySelector("span.errorMsg");return e.textContent=d.message,void setTimeout((()=>{e.textContent=""}),1200)}const u=(p=l.value)?p.replace(/-/g,"/"):"not due";var p;const m=function(e,t,o,c,r){return new n(e,t,o,c,r)}(t.value,o.value,c.value,u,a.value);var y,v;y=m,(v=s).projects.find((e=>e.title==y.project)).tasks.push(y),localStorage.masterObject=JSON.stringify(v),i()}function i(e){const t=document.querySelector("#modalBackground"),n=document.querySelector(".modal"),o=document.querySelector(".cancelTaskBtn"),c=document.querySelector(".fa-x"),r=document.querySelector(".addTaskBtn");!function(e,t,...n){n.forEach((n=>n.removeEventListener(t,e)))}(i,"click",c,o),r.removeEventListener("click",l),t.removeChild(n),t.style.display="none"}function d(e){const t=document.querySelector(".projectCreator"),n=document.querySelector(".projects"),o=document.querySelector(".addProject"),c=document.querySelector(".dropDown"),r=document.querySelector(".addProjectBtn"),s=document.querySelector(".cancelProjectBtn");r.removeEventListener("click",a),s.removeEventListener("click",d),c.removeChild(t),n.style.display="flex",o.style.display="flex"}function u(...e){const t=document.querySelector(".projects");e.forEach((e=>{"Home"!=e.title&&t.appendChild(e.projectHTML)}))}const p=(e=>{document.querySelector("h2.selctionTitle");const t=document.querySelector(".tasks");return{renderHome:function(){t.innerHTML="",e.tasks.forEach((e=>{t.appendChild(e.taskHTML)}))}}})(s),m=document.querySelector(".menuIcon"),y=document.querySelector(".projectsTitle"),v=document.querySelector(".addTask"),f=document.querySelector(".addProject");document.querySelector("aside"),document.querySelector("main"),m.addEventListener("click",(function(){const e=document.querySelector("main#main");document.querySelector(".taskContainer"),e.classList.toggle("menuIsNotActive")})),y.addEventListener("click",(function(e){const t=document.querySelector(".dropDown"),n=e.target.children[0];"none"==t.style.display?(t.style.display="flex",n.classList.toggle("fa-caret-down"),n.classList.toggle("fa-caret-up")):(t.style.display="none",n.classList.toggle("fa-caret-down"),n.classList.toggle("fa-caret-up"))})),v.addEventListener("click",(function(e){const t=document.querySelector("#modalBackground");if(t.childNodes.length>0)return;t.appendChild(function(e){const t=document.createElement("div");t.classList.add("modal"),t.innerHTML='\n        <div class="taskCreationHeader modalHeader">\n            <div>New Task</div>\n            <i class="fa-solid fa-x"></i>\n        </div>\n        <form class="taskCreationForm">\n            <div class="taskDetails1">\n                <label for="taskTitle">Title:</label>\n                <input class="taskEntry" type="text" id="taskTitle" placeholder="e.g. Pay bills" spellcheck = "true">\n                <span class="errorMsg"></span>\n\n                <label for="taskDescription">Description:</label>\n                <textarea class="taskEntry" id="taskDescription" placeholder="e.g. internet, phone, rent, etc" spellcheck = "true"></textarea>\n\n            </div>\n            <div class="taskDetails2">\n                <label for="dueDate">Due Date:</label>\n                <input type="date" class="taskEntry" id="dueDate">\n\n                <label for="priority">Priority:</label>\n                <select id="priority" class="taskEntry">\n                    <option value="none" selected>None</option>\n                    <option value="low">Low</option>\n                    <option value="medium">Medium</option>\n                    <option value="high">High</option>\n                </select>\n\n                <label for="projectSelection">Project:</label>\n                <select id="projectSelection" class="taskEntry">\n                \n                </select>\n            </div>\n            <div class="taskCreationDecision">\n                <button type="button" class="cancelTaskBtn modalBtn cancelModalBtn">Cancel</button>\n                <button type="button" class="addTaskBtn modalBtn addModalBtn">Add task</button>\n            </div>\n\n        </form>\n\n    ';const n=t.querySelector("#projectSelection");return e.projects.forEach((e=>{const t=document.createElement("option");t.textContent=e.title,"Home"==e.title&&(t.selected=!0),n.appendChild(t)})),t}(s));const n=document.querySelector(".fa-x"),o=document.querySelector(".cancelTaskBtn"),c=document.querySelector(".addTaskBtn");!function(e,t,...n){n.forEach((n=>n.addEventListener(t,e)))}(i,"click",n,o),c.addEventListener("click",l),t.style.display="flex"})),f.addEventListener("click",(function(t){e();const n=document.querySelector(".projects"),o=document.querySelector(".addProject");document.querySelector(".dropDown").appendChild(e());const c=document.querySelector(".addProjectBtn"),r=document.querySelector(".cancelProjectBtn");c.addEventListener("click",a),r.addEventListener("click",d),n.style.display="none",o.style.display="none"})),u(...s.projects),p.renderHome()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q29DLEVBQW1CeEYsU0FBU29ELGNBQWMscUJBRWhEbUMsRUFBa0JXLGlCQUFpQixRQUFTLEdBQzVDVixFQUFpQlUsaUJBQWlCLFFBQVNkLEdBRTNDM0QsRUFBU3lELE1BQU1DLFFBQVUsT0FDekJFLEVBQWNILE1BQU1DLFFBQVUsTUFFbEMsSUNwREEsS0FBa0IsWUFDbEIsYyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL21vZHVsZXMvZG9tQ3JlYXRpb24uanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9zcmMvbW9kdWxlcy9jbGFzc2VzLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL21vZHVsZXMvZnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9zcmMvbW9kdWxlcy9zdG9yYWdlLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL21vZHVsZXMvZnVuY3Rpb25CdW5kbGVyLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL21vZHVsZXMvVUltYW5pdXB1bGF0aW9uLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1hc3Rlck9iamVjdCB9IGZyb20gXCIuL3N0b3JhZ2VcIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRhc2tNb2RhbChtYXN0ZXJPYmope1xyXG4gICAgY29uc3QgdGFza0NyZWF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICB0YXNrQ3JlYXRvci5jbGFzc0xpc3QuYWRkKFwibW9kYWxcIilcclxuICAgIHRhc2tDcmVhdG9yLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFza0NyZWF0aW9uSGVhZGVyIG1vZGFsSGVhZGVyXCI+XHJcbiAgICAgICAgICAgIDxkaXY+TmV3IFRhc2s8L2Rpdj5cclxuICAgICAgICAgICAgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS14XCI+PC9pPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxmb3JtIGNsYXNzPVwidGFza0NyZWF0aW9uRm9ybVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFza0RldGFpbHMxXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFza1RpdGxlXCI+VGl0bGU6PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cInRhc2tFbnRyeVwiIHR5cGU9XCJ0ZXh0XCIgaWQ9XCJ0YXNrVGl0bGVcIiBwbGFjZWhvbGRlcj1cImUuZy4gUGF5IGJpbGxzXCIgc3BlbGxjaGVjayA9IFwidHJ1ZVwiPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvck1zZ1wiPjwvc3Bhbj5cclxuXHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFza0Rlc2NyaXB0aW9uXCI+RGVzY3JpcHRpb246PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBjbGFzcz1cInRhc2tFbnRyeVwiIGlkPVwidGFza0Rlc2NyaXB0aW9uXCIgcGxhY2Vob2xkZXI9XCJlLmcuIGludGVybmV0LCBwaG9uZSwgcmVudCwgZXRjXCIgc3BlbGxjaGVjayA9IFwidHJ1ZVwiPjwvdGV4dGFyZWE+XHJcblxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2tEZXRhaWxzMlwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImR1ZURhdGVcIj5EdWUgRGF0ZTo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRlXCIgY2xhc3M9XCJ0YXNrRW50cnlcIiBpZD1cImR1ZURhdGVcIj5cclxuXHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicHJpb3JpdHlcIj5Qcmlvcml0eTo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPHNlbGVjdCBpZD1cInByaW9yaXR5XCIgY2xhc3M9XCJ0YXNrRW50cnlcIj5cclxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibm9uZVwiIHNlbGVjdGVkPk5vbmU8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibG93XCI+TG93PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm1lZGl1bVwiPk1lZGl1bTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJoaWdoXCI+SGlnaDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcblxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInByb2plY3RTZWxlY3Rpb25cIj5Qcm9qZWN0OjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwicHJvamVjdFNlbGVjdGlvblwiIGNsYXNzPVwidGFza0VudHJ5XCI+XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2tDcmVhdGlvbkRlY2lzaW9uXCI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNhbmNlbFRhc2tCdG4gbW9kYWxCdG4gY2FuY2VsTW9kYWxCdG5cIj5DYW5jZWw8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYWRkVGFza0J0biBtb2RhbEJ0biBhZGRNb2RhbEJ0blwiPkFkZCB0YXNrPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8L2Zvcm0+XHJcblxyXG4gICAgYFxyXG4gICAgLy8gYWNjZXNzaW5nIHRoZSBzZWNvbmQgc2VsZWN0IG9wdGlvblxyXG4gICAgY29uc3QgcHJvamVjdFNlbGVjdG9yID0gdGFza0NyZWF0b3IucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0U2VsZWN0aW9uXCIpXHJcbiAgICBtYXN0ZXJPYmoucHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcclxuICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpXHJcbiAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gcHJvamVjdC50aXRsZVxyXG4gICAgICAgIC8vIGRlZmF1bHQgb3B0aW9uXHJcbiAgICAgICAgaWYgKHByb2plY3QudGl0bGUgPT0gXCJIb21lXCIpIG9wdGlvbi5zZWxlY3RlZCA9IHRydWVcclxuXHJcbiAgICAgICAgcHJvamVjdFNlbGVjdG9yLmFwcGVuZENoaWxkKG9wdGlvbilcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB0YXNrQ3JlYXRvclxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvamVjdENyZWF0b3IgKCkge1xyXG4gICAgY29uc3QgcHJvamVjdENyZWF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICBwcm9qZWN0Q3JlYXRvci5jbGFzc0xpc3QuYWRkKFwicHJvamVjdENyZWF0b3JcIilcclxuICAgIHByb2plY3RDcmVhdG9yLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8aW5wdXQgaWQ9XCJwcm9qZWN0TmFtZVwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJQcm9qZWN0IG5hbWUuLi5cIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9qZWN0RXJvcnJNc2dcIj48L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInByb2plY3RCdG4gY2FuY2VsUHJvamVjdEJ0blwiPkNhbmNlbDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicHJvamVjdEJ0biBhZGRQcm9qZWN0QnRuXCI+QWRkIFByb2plY3Q8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGBcclxuICAgIHJldHVybiBwcm9qZWN0Q3JlYXRvclxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvamVjdChwcm9qZWN0VGl0bGUpIHtcclxuICAgIGNvbnN0IHByb2plY3RIVE1MID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgcHJvamVjdEhUTUwuY2xhc3NMaXN0LmFkZChcInByb2plY3RcIilcclxuICAgIHByb2plY3RIVE1MLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWNpcmNsZVwiPjwvaT5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJvamVjdFRpdGxlXCI+JHtwcm9qZWN0VGl0bGV9PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRhc2tDb3VudGVyXCI+PC9kaXY+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS10cmFzaCBiaW5cIj48L2k+XHJcbiAgICBgXHJcbiAgICByZXR1cm4gcHJvamVjdEhUTUxcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRhc2sodGl0bGUscHJpb3JpdHksZHVlRGF0ZSxwcm9qZWN0LGNvbXBsZXRpb24pIHtcclxuICAgIGNvbnN0IHRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICB0YXNrLnNldEF0dHJpYnV0ZShcInByb2plY3RcIixgJHtwcm9qZWN0fWApXHJcbiAgICB0YXNrLmNsYXNzTGlzdC5hZGQoXCJ0YXNrXCIpXHJcbiAgICBpZiAoY29tcGxldGlvbikgdGFzay5jbGFzc0xpc3QuYWRkKFwiY29tcGxldGVkXCIpXHJcbiAgICB0YXNrLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8aSBjbGFzcz1cImZhLXJlZ3VsYXIgZmEtc3F1YXJlICR7cHJpb3JpdHl9IFwiPjwvaT5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFza1RpdGxlXCI+JHt0aXRsZX08L2Rpdj5cclxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwidGFza0RldGFpbHNcIj5EZXRhaWxzPC9idXR0b24+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRhc2tEYXRlXCI+JHtkdWVEYXRlfTwvZGl2PlxyXG4gICAgICAgIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtcGVuLXRvLXNxdWFyZSBlZGl0XCI+PC9pPlxyXG4gICAgICAgIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtdHJhc2ggYmluXCI+PC9pPlxyXG4gICAgYFxyXG4gICAgcmV0dXJuIHRhc2tcclxufSIsImltcG9ydCAqIGFzIGNyZWF0aW9uIGZyb20gXCIuL2RvbUNyZWF0aW9uXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0IHtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlXHJcbiAgICAgICAgdGhpcy50YXNrcyA9IFtdXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldCBwcm9qZWN0SFRNTCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0aW9uLmNyZWF0ZVByb2plY3QodGhpcy50aXRsZSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgYWRkVGFzayh0YXNrKXtcclxuICAgICAgICB0aGlzLnRhc2tzLnB1c2godGFzaylcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVUYXNrKHRhc2tJbmRleCkge1xyXG4gICAgICAgIHRoaXMudGFza3Muc3BsaWNlKHRhc2tJbmRleCwgMSlcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyB0YXNrIHtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLGRlc2NyaXB0aW9uLHByaW9yaXR5LGR1ZURhdGUscHJvamVjdCkge1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICAgICAgdGhpcy5wcmlvcml0eT0gcHJpb3JpdHk7XHJcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcclxuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0XHJcbiAgICAgICAgdGhpcy5jb21wbGV0aW9uID0gIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgICBcclxuICAgIGdldCB0YXNrSFRNTCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0aW9uLmNyZWF0ZVRhc2soXHJcbiAgICAgICAgICAgIHRoaXMudGl0bGUsXHJcbiAgICAgICAgICAgIHRoaXMucHJpb3JpdHksXHJcbiAgICAgICAgICAgIHRoaXMuZHVlRGF0ZSxcclxuICAgICAgICAgICAgdGhpcy5wcm9qZWN0LFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRpb24sXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIG1hc3Rlck9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnByb2plY3RzID0gW11cclxuICAgIH1cclxuXHJcbiAgICBnZXQgdGFza3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdHMucmVkdWNlKCh0YXNrc0FycmF5LHByb2plY3QpPT4oXHJcbiAgICAgICAgICAgIHRhc2tzQXJyYXkuY29uY2F0KHByb2plY3QudGFza3MpKSxbXSlcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbiIsImltcG9ydCAqIGFzIGNscyBmcm9tIFwiLi9jbGFzc2VzXCI7XHJcbmltcG9ydCAqIGFzIHN0ciBmcm9tIFwiLi9zdG9yYWdlXCJcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGaXJzdFRpbWVNYXN0ZXJPYmooKSB7XHJcbiAgICAvLyBjcmVhdGluZyBtYXN0ZXIgb2JqZWN0XHJcbiAgICBjb25zdCBtYXN0ZXJPYmplY3QgPSBuZXcgY2xzLm1hc3Rlck9iamVjdCgpXHJcbiAgICAvLyBhZGRpbmcgaG9tZSBwcm9qZWN0XHJcbiAgICBtYXN0ZXJPYmplY3QucHJvamVjdHMucHVzaChuZXcgY2xzLlByb2plY3QoXCJIb21lXCIpKVxyXG4gICAgLy8gYWRkaW5nIGV4YW1wbGUgdGFza1xyXG4gICAgY29uc3QgZXhhbXBsZVRhc2sgPSBuZXcgY2xzLnRhc2soXCJleGFtcGxlVGFza1wiLFwidGVzdGluZyBwbGVhc2Ugd29ya1wiLCBcIm1lZGl1bVwiLFwiMTIvMTIvMTJcIixcIkhvbWVcIilcclxuICAgIG1hc3Rlck9iamVjdC5wcm9qZWN0c1swXS50YXNrcy5wdXNoKGV4YW1wbGVUYXNrKVxyXG4gICAgbG9jYWxTdG9yYWdlLm1hc3Rlck9iamVjdCA9IEpTT04uc3RyaW5naWZ5KG1hc3Rlck9iamVjdCkgICAgXHJcbiAgICByZXR1cm4gbWFzdGVyT2JqZWN0XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRFdmVudCAoZnVuYyxldmVudCwgLi4uZWxlbWVudHMgKSB7XHJcbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQ9PmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCxmdW5jKSl9O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV2ZW50IChmdW5jLGV2ZW50LCAuLi5lbGVtZW50cyApIHtcclxuICAgIGVsZW1lbnRzLmZvckVhY2goZWxlbWVudD0+IGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCxmdW5jKSl9O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2plY3QoaW5wdXRWYWx1ZSl7XHJcbiAgICBjb25zdCBuZXdQcm9qZWN0ID0gbmV3IGNscy5Qcm9qZWN0KGlucHV0VmFsdWUpXHJcbiAgICAvLyAgZm9yIGV4cGFuc2lvbiBpZiBuZWVkZWRcclxuICAgIHJldHVybiBuZXdQcm9qZWN0XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUYXNrKHRpdGxlLGRlc2NyaXB0aW9uLHByaW9yaXR5LGR1ZURhdGUscHJvamVjdCkge1xyXG4gICAgY29uc3QgbmV3VGFzayA9IG5ldyBjbHMudGFzayh0aXRsZSxkZXNjcmlwdGlvbixwcmlvcml0eSxkdWVEYXRlLHByb2plY3QpXHJcbiAgICAvLyBmaXIgZXhwYW5zaW9uIGlkIG5lZWRlZFxyXG4gICAgcmV0dXJuIG5ld1Rhc2tcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrTmFtZVZhbGlkaXR5KG5hbWUpIHtcclxuICAgIGNvbnN0IEludmFsaWRQYXR0ZXJuID0gL15bMS05IUAjJCVeJiooKSwuP1wiOnt9fDw+XS4qL2dcclxuICAgIGlmICghbmFtZSkgcmV0dXJuIHtcclxuICAgICAgICAgICAgdmFsaWRpdHk6ZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiY2FudCBlbnRlciBlbXB0eSBuYW1lXCJcclxuICAgICAgICB9IFxyXG4gICAgZWxzZSBpZiAoSW52YWxpZFBhdHRlcm4udGVzdChuYW1lKSkgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZGl0eTpmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBcImNhbnQgc3RhcnQgd2l0aCBudW1iZXJzIG9yIHNwZWNpYWwgY2hhcmFjdGVyXCJcclxuICAgICAgICB9XHJcbiAgICBlbHNlIGlmIChjaGVja1JlcGVhdGVkUHJvamVjdE5hbWUobmFtZSkpIHJldHVybiB7XHJcbiAgICAgICAgdmFsaWRpdHk6ZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogXCJwcm9qZWN0IG5hbWUgYWxyZWFkeSBleHNpc3RzXCJcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdmFsaWRpdHk6dHJ1ZSxcclxuICAgICAgICBtZXNzYWdlIDogXCJcIlxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja1JlcGVhdGVkUHJvamVjdE5hbWUgKG5hbWUpIHtcclxuICAgIHJldHVybiAhIShzdHIubWFzdGVyT2JqZWN0LnByb2plY3RzLmZpbmQocHJvamVjdCA9PlxyXG4gICAgICAgIHByb2plY3QudGl0bGUudG9Mb3dlckNhc2UoKSA9PSBuYW1lLnRvTG93ZXJDYXNlKCkpKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZSAoZGF0ZSkge1xyXG4gICAgaWYgKCFkYXRlKSByZXR1cm4gXCJub3QgZHVlXCJcclxuICAgIC8vcmVwbGFjaW5nIC0gd2l0aCAvXHJcbiAgICByZXR1cm4gZGF0ZS5yZXBsYWNlKC8tL2csIFwiL1wiKVxyXG59IiwiaW1wb3J0IHtjcmVhdGVGaXJzdFRpbWVNYXN0ZXJPYmp9IGZyb20gXCIuL2Z1bmN0aW9uXCJcclxuaW1wb3J0ICogYXMgY2xzIGZyb20gXCIuL2NsYXNzZXNcIlxyXG5cclxuZXhwb3J0IGNvbnN0IG1hc3Rlck9iamVjdCA9ICgoKT0+e1xyXG4gICAgaWYgKHR5cGVvZihTdG9yYWdlKSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UubWFzdGVyT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld01hc3Rlck9iamVjdCA9IG5ldyBjbHMubWFzdGVyT2JqZWN0KClcclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkTWFzdGVyT2JqZWN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubWFzdGVyT2JqZWN0KVxyXG4gICAgICAgICAgICAvLyB0cmFuc2ZlcmluZyBhbGwgcHJvamVjdHMgYW5kIHRhc2tzXHJcbiAgICAgICAgICAgIG5ld01hc3Rlck9iamVjdC5wcm9qZWN0cyA9IHN0b3JlZE1hc3Rlck9iamVjdC5wcm9qZWN0cy5tYXAocHJvamVjdD0+e1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UHJvamVjdCA9IG5ldyBjbHMuUHJvamVjdCgpXHJcbiAgICAgICAgICAgICAgICBuZXdQcm9qZWN0LnRhc2tzID0gcHJvamVjdC50YXNrcy5tYXAodGFzaz0+e1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBjbHMudGFzaygpLHRhc2spO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBuZXdQcm9qZWN0LnRpdGxlID0gcHJvamVjdC50aXRsZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Byb2plY3RcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy8gc2F2aW5nIHRoZSBtYXN0ZXIgb2JqZWN0IHRvIGxvY2FsIHN0b3JhZ2VcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCkgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLm1hc3Rlck9iamVjdCA9IEpTT04uc3RyaW5naWZ5KG5ld01hc3Rlck9iamVjdClcclxuICAgICAgICAgICAgcmV0dXJuIG5ld01hc3Rlck9iamVjdFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8ganVzdCB0byBtYWtlIHN1cmUgdGhlIHVzZXIgZGlkbnQgY2hhbmdlIHRoZSBsb2NhbCBzdG9yYWdlXHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVGaXJzdFRpbWVNYXN0ZXJPYmooKVxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7ICAgIFxyXG4gICAgICAgIC8vIGp1c3QgdG8gbWFrZSBzdXJlIHRoZSB1c2VyIGRpZG50IGNoYW5nZSB0aGUgbG9jYWwgc3RvcmFnZVxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUZpcnN0VGltZU1hc3Rlck9iaigpXHJcbiAgICB9XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2F2ZVByb2plY3QgKHByb2plY3QsbWFzdGVyT2JqKSB7XHJcbiAgICBtYXN0ZXJPYmoucHJvamVjdHMucHVzaChwcm9qZWN0KVxyXG4gICAgbG9jYWxTdG9yYWdlLm1hc3Rlck9iamVjdCA9IEpTT04uc3RyaW5naWZ5KG1hc3Rlck9iailcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVUYXNrKHRhc2ssIG1hc3Rlck9iaikge1xyXG4gICAgKG1hc3Rlck9iai5wcm9qZWN0cy5maW5kKHByb2plY3QgPT4gcHJvamVjdC50aXRsZSA9PSB0YXNrLnByb2plY3RcclxuICAgICAgICApKS50YXNrcy5wdXNoKHRhc2spXHJcbiAgICBsb2NhbFN0b3JhZ2UubWFzdGVyT2JqZWN0ID0gSlNPTi5zdHJpbmdpZnkobWFzdGVyT2JqKVxyXG5cclxufSIsImltcG9ydCAqIGFzIGNyZWF0aW9uIGZyb20gXCIuL2RvbUNyZWF0aW9uXCJcclxuaW1wb3J0ICogYXMgZnVuYyBmcm9tIFwiLi9mdW5jdGlvblwiXHJcbmltcG9ydCAqIGFzIHN0ciBmcm9tIFwiLi9zdG9yYWdlXCJcclxuaW1wb3J0ICogYXMgVUkgZnJvbSBcIi4vVUltYW5pdXB1bGF0aW9uXCJcclxuXHJcbi8vIGZvciB3aGVuIHRoZSB0aGUgdXNlciB3YW50cyB0byBjb25maXJtIHRoZWlyIHByb2plY3QgY3JlYXRpb25cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2plY3QoZXZlbnQpIHtcclxuICAgIGNvbnN0IGlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXQjcHJvamVjdE5hbWVcIilcclxuICAgIGNvbnN0IHZhbHVlSW5mbyA9IGZ1bmMuY2hlY2tOYW1lVmFsaWRpdHkoaW5wdXRGaWVsZC52YWx1ZSlcclxuXHJcbiAgICAvLyBjb25zdCBcclxuICAgIGlmICghdmFsdWVJbmZvLnZhbGlkaXR5KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic3Bhbi5wcm9qZWN0RXJvcnJNc2dcIilcclxuICAgICAgICBlcnJvck1zZy50ZXh0Q29udGVudCA9IHZhbHVlSW5mby5tZXNzYWdlO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PntlcnJvck1zZy50ZXh0Q29udGVudD1cIlwifSwxMjAwKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgLy8gcHJvamVjdCBjcmVhdGlvblxyXG4gICAgY29uc3QgbmV3UHJvamVjdCA9IGZ1bmMuY3JlYXRlUHJvamVjdChpbnB1dEZpZWxkLnZhbHVlKVxyXG4gICAgc3RyLnNhdmVQcm9qZWN0KG5ld1Byb2plY3Qsc3RyLm1hc3Rlck9iamVjdClcclxuICAgIFVJLmFkZFByb2plY3RzKG5ld1Byb2plY3QpXHJcbiAgICAvLyBmaW5pc2hpbmdcclxuICAgIFVJLnJlbW92ZVByb2plY3RDcmVhdGlvbigpXHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayhldmVudCkge1xyXG4gICAgY29uc3QgdGFza05hbWVGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dCN0YXNrVGl0bGVcIilcclxuICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFza0Rlc2NyaXB0aW9uXCIpXHJcbiAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByaW9yaXR5XCIpXHJcbiAgICBjb25zdCBwcm9qZWN0U2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RTZWxlY3Rpb25cIilcclxuICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2R1ZURhdGVcIilcclxuICAgIC8vIGlzIG5hbWUgdmFsaWZcclxuICAgIFxyXG4gICAgY29uc3QgdGFza05hbWVJbmZvID0gZnVuYy5jaGVja05hbWVWYWxpZGl0eSh0YXNrTmFtZUZpZWxkLnZhbHVlKVxyXG4gICAgLy8gY29uc3QgXHJcbiAgICBpZiAoIXRhc2tOYW1lSW5mby52YWxpZGl0eSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInNwYW4uZXJyb3JNc2dcIilcclxuICAgICAgICBlcnJvck1zZy50ZXh0Q29udGVudCA9IHRhc2tOYW1lSW5mby5tZXNzYWdlO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PntlcnJvck1zZy50ZXh0Q29udGVudD1cIlwifSwxMjAwKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZWFibGVEYXRlID0gZnVuYy5mb3JtYXREYXRlKGR1ZURhdGUudmFsdWUpXHJcbiAgICBjb25zdCBuZXdUYXNrID0gZnVuYy5jcmVhdGVUYXNrKFxyXG4gICAgICAgIHRhc2tOYW1lRmllbGQudmFsdWUsXHJcbiAgICAgICAgdGFza0Rlc2NyaXB0aW9uLnZhbHVlLFxyXG4gICAgICAgIHRhc2tQcmlvcml0eS52YWx1ZSxcclxuICAgICAgICB1c2VhYmxlRGF0ZSxcclxuICAgICAgICBwcm9qZWN0U2VsZWN0ZWQudmFsdWVcclxuICAgIClcclxuICAgIHN0ci5zYXZlVGFzayhuZXdUYXNrLHN0ci5tYXN0ZXJPYmplY3QpXHJcbiAgICAvLyByZW5kZXIgbmV3IHRhc2tzIGZ1bmN0aW9uXHJcbiAgICBVSS5yZW1vdmVNb2RhbCgpXHJcblxyXG59IiwiaW1wb3J0ICogYXMgY3JlYXRpb24gZnJvbSBcIi4vZG9tQ3JlYXRpb25cIlxyXG5pbXBvcnQgKiBhcyBmdW5jIGZyb20gXCIuL2Z1bmN0aW9uXCJcclxuaW1wb3J0ICogYXMgYnVuZGxlIGZyb20gXCIuL2Z1bmN0aW9uQnVuZGxlclwiXHJcbmltcG9ydCAqIGFzIHN0ciBmcm9tIFwiLi9zdG9yYWdlXCJcclxuaW1wb3J0ICogYXMgY2xzIGZyb20gXCIuL2NsYXNzZXNcIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlNZW51KCkge1xyXG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtYWluI21haW5cIilcclxuICAgIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tDb250YWluZXJcIilcclxuICAgIG1haW4uY2xhc3NMaXN0LnRvZ2dsZShcIm1lbnVJc05vdEFjdGl2ZVwiKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVByb2plY3RzKGV2ZW50KSB7XHJcbiAgICBjb25zdCBkcm9wRG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZHJvcERvd25cIilcclxuICAgIGNvbnN0IGNhcmV0U3ltYm9sID0gZXZlbnQudGFyZ2V0LmNoaWxkcmVuWzBdXHJcbiAgICBpZiAoZHJvcERvd24uc3R5bGUuZGlzcGxheSA9PSBcIm5vbmVcIikge1xyXG4gICAgICAgIGRyb3BEb3duLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIlxyXG4gICAgICAgIGNhcmV0U3ltYm9sLmNsYXNzTGlzdC50b2dnbGUoXCJmYS1jYXJldC1kb3duXCIpXHJcbiAgICAgICAgY2FyZXRTeW1ib2wuY2xhc3NMaXN0LnRvZ2dsZShcImZhLWNhcmV0LXVwXCIpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRyb3BEb3duLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxyXG4gICAgICAgIGNhcmV0U3ltYm9sLmNsYXNzTGlzdC50b2dnbGUoXCJmYS1jYXJldC1kb3duXCIpXHJcbiAgICAgICAgY2FyZXRTeW1ib2wuY2xhc3NMaXN0LnRvZ2dsZShcImZhLWNhcmV0LXVwXCIpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5TW9kYWwoZXZlbnQpe1xyXG4gICAgY29uc3QgYmFja2dyb3VuZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbEJhY2tncm91bmRcIilcclxuICAgIGlmIChiYWNrZ3JvdW5kTW9kYWwuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSByZXR1cm5cclxuICAgIGJhY2tncm91bmRNb2RhbC5hcHBlbmRDaGlsZChjcmVhdGlvbi5jcmVhdGVUYXNrTW9kYWwoc3RyLm1hc3Rlck9iamVjdCkpXHJcblxyXG4gICAgY29uc3QgY3Jvc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZhLXhcIilcclxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsVGFza0J0blwiKVxyXG4gICAgY29uc3QgY29uZmlybVRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tCdG5cIilcclxuICAgIC8vIGFkZGluZyBldmVudCBsaXN0ZW5lcnNcclxuICAgIGZ1bmMuYWRkRXZlbnQocmVtb3ZlTW9kYWwsXCJjbGlja1wiLGNyb3NzLGNhbmNlbEJ0bilcclxuICAgIGNvbmZpcm1UYXNrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGJ1bmRsZS5jcmVhdGVUYXNrKVxyXG5cclxuICAgIGJhY2tncm91bmRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCJcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU1vZGFsKGV2ZW50KSB7XHJcbiAgICBjb25zdCBiYWNrZ3JvdW5kTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsQmFja2dyb3VuZFwiKVxyXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIilcclxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsVGFza0J0blwiKVxyXG4gICAgY29uc3QgY3Jvc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZhLXhcIilcclxuICAgIGNvbnN0IGNvbmZpcm1UYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRUYXNrQnRuXCIpXHJcblxyXG4gICAgZnVuYy5yZW1vdmVFdmVudChyZW1vdmVNb2RhbCxcImNsaWNrXCIsY3Jvc3MsY2FuY2VsQnRuKVxyXG4gICAgY29uZmlybVRhc2sucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsYnVuZGxlLmNyZWF0ZVRhc2spXHJcblxyXG4gICAgYmFja2dyb3VuZE1vZGFsLnJlbW92ZUNoaWxkKGZvcm0pXHJcbiAgICBiYWNrZ3JvdW5kTW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5UHJvamVjdENyZWF0aW9uKGV2ZW50KSB7XHJcbiAgICBjb25zdCBwcm9qZWN0Q3JlYXRvciA9IGNyZWF0aW9uLmNyZWF0ZVByb2plY3RDcmVhdG9yKClcclxuICAgIGNvbnN0IHByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0c1wiKVxyXG4gICAgY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkUHJvamVjdFwiKVxyXG4gICAgY29uc3QgZHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRyb3BEb3duXCIpXHJcbiAgICBkcm9wZG93bi5hcHBlbmRDaGlsZChjcmVhdGlvbi5jcmVhdGVQcm9qZWN0Q3JlYXRvcigpKVxyXG4gICAgLy8gIGJ1dHRvbnMgb24gbW9kYWxcclxuICAgIGNvbnN0IGNvbmZpcm1Qcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRQcm9qZWN0QnRuXCIpXHJcbiAgICBjb25zdCBjYW5jZWxQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYW5jZWxQcm9qZWN0QnRuXCIpXHJcblxyXG4gICAgY29uZmlybVByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJ1bmRsZS5jcmVhdGVQcm9qZWN0KVxyXG4gICAgY2FuY2VsUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVtb3ZlUHJvamVjdENyZWF0aW9uKVxyXG5cclxuICAgIHByb2plY3RzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxyXG4gICAgYWRkUHJvamVjdEJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVQcm9qZWN0Q3JlYXRpb24oZXZlbnQpIHtcclxuICAgIGNvbnN0IHByb2plY3RDcmVhdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0Q3JlYXRvclwiKVxyXG4gICAgY29uc3QgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzXCIpXHJcbiAgICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRQcm9qZWN0XCIpXHJcbiAgICBjb25zdCBkcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZHJvcERvd25cIikgICAgXHJcbiAgICAvLyAgYnV0dG9ucyBvbiBtb2RhbFxyXG4gICAgY29uc3QgY29uZmlybVByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFByb2plY3RCdG5cIilcclxuICAgIGNvbnN0IGNhbmNlbFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNlbFByb2plY3RCdG5cIilcclxuXHJcbiAgICBjb25maXJtUHJvamVjdEJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYnVuZGxlLmNyZWF0ZVByb2plY3QpXHJcbiAgICBjYW5jZWxQcm9qZWN0QnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHJlbW92ZVByb2plY3RDcmVhdGlvbilcclxuXHJcblxyXG4gICAgZHJvcGRvd24ucmVtb3ZlQ2hpbGQocHJvamVjdENyZWF0b3IpXHJcbiAgICBwcm9qZWN0cy5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCJcclxuICAgIGFkZFByb2plY3RCdG4uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRQcm9qZWN0cyguLi5wcm9qZWN0cykge1xyXG4gICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNcIilcclxuICAgIHByb2plY3RzLmZvckVhY2gocHJvamVjdD0+e1xyXG4gICAgICAgIGlmIChwcm9qZWN0LnRpdGxlID09IFwiSG9tZVwiKSByZXR1cm5cclxuICAgICAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3QucHJvamVjdEhUTUwpXHJcbiAgICB9KVxyXG59XHJcbi8vIHRhc2sgY2hhbmluZyBtb2R1bGVcclxuZXhwb3J0IGNvbnN0IHRhc2tza1VpID0gKChtYXN0ZXJPYmopPT57XHJcbiAgICBjb25zdCBTZWxlY3Rpb25UaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMi5zZWxjdGlvblRpdGxlXCIpXHJcbiAgICBjb25zdCB0YXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza3NcIilcclxuICAgIGZ1bmN0aW9uIHJlbmRlckhvbWUoKSB7XHJcbiAgICAgICAgdGFza3NDb250YWluZXIuaW5uZXJIVE1MPVwiXCJcclxuICAgICAgICBtYXN0ZXJPYmoudGFza3MuZm9yRWFjaCh0YXNrPT57XHJcbiAgICAgICAgICAgIC8vIHRhc2tzQ29udGFpbmVyLmFwcGVuZENoaWxkKChPYmplY3QuYXNzaWduKFxyXG4gICAgICAgICAgICAvLyAgICAgbmV3IGNscy50YXNrLCB0YXNrKSkudGFza0hUTUwpO1xyXG4gICAgICAgICAgICB0YXNrc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrLnRhc2tIVE1MKTtcclxuICAgICAgICB9KVxyXG4gICAgfSBcclxuXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZW5kZXJIb21lLFxyXG5cclxuICAgIH1cclxufSkoc3RyLm1hc3Rlck9iamVjdCkiLCJpbXBvcnQgKiBhcyBzdHIgZnJvbSBcIi4vbW9kdWxlcy9zdG9yYWdlXCJcclxuaW1wb3J0ICogYXMgVUkgZnJvbSBcIi4vbW9kdWxlcy9VSW1hbml1cHVsYXRpb25cIlxyXG5pbXBvcnQgKiBhcyBmdW5jIGZyb20gXCIuL21vZHVsZXMvZnVuY3Rpb25cIlxyXG4vLyBlbGVtZW50c1xyXG5jb25zdCBtZW51SWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudUljb25cIilcclxuY29uc3QgcHJvamVjdHNEcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNUaXRsZVwiKVxyXG5jb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRUYXNrXCIpXHJcbmNvbnN0IGFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFByb2plY3RcIilcclxuY29uc3Qgc2lkZUJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJhc2lkZVwiKVxyXG5jb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW5cIilcclxuLy8gZXZlbnQgbGlzdGVuZXJzXHJcbm1lbnVJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiICwgVUkuZGlzcGxheU1lbnUpXHJcbnByb2plY3RzRHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIFVJLmRpc3BsYXlQcm9qZWN0cylcclxuYWRkVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixVSS5kaXNwbGF5TW9kYWwpXHJcbmFkZFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsVUkuZGlzcGxheVByb2plY3RDcmVhdGlvbilcclxuLy8gbWFpbnRpbmcgc2lkZWJhciBoZWlnaHRcclxuLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixlID0+XHJcbi8vICAgICBzaWRlQmFyLnN0eWxlLmhlaWdodCA9IGAke21haW4uc2Nyb2xsSGVpZ2h0fXB4YClcclxuLy8gb3RoZXJcclxuVUkuYWRkUHJvamVjdHMoLi4uc3RyLm1hc3Rlck9iamVjdC5wcm9qZWN0cylcclxuVUkudGFza3NrVWkucmVuZGVySG9tZSgpIl0sIm5hbWVzIjpbImNyZWF0ZVByb2plY3RDcmVhdG9yIiwicHJvamVjdENyZWF0b3IiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbm5lckhUTUwiLCJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJ0aXRsZSIsInRoaXMiLCJ0YXNrcyIsInByb2plY3RIVE1MIiwicHJvamVjdFRpdGxlIiwiYWRkVGFzayIsInRhc2siLCJwdXNoIiwicmVtb3ZlVGFzayIsInRhc2tJbmRleCIsInNwbGljZSIsImRlc2NyaXB0aW9uIiwicHJpb3JpdHkiLCJkdWVEYXRlIiwicHJvamVjdCIsImNvbXBsZXRpb24iLCJ0YXNrSFRNTCIsInNldEF0dHJpYnV0ZSIsInByb2plY3RzIiwicmVkdWNlIiwidGFza3NBcnJheSIsImNvbmNhdCIsImNyZWF0ZUZpcnN0VGltZU1hc3Rlck9iaiIsIm1hc3Rlck9iamVjdCIsImV4YW1wbGVUYXNrIiwibG9jYWxTdG9yYWdlIiwiSlNPTiIsInN0cmluZ2lmeSIsImNoZWNrTmFtZVZhbGlkaXR5IiwibmFtZSIsInRlc3QiLCJ2YWxpZGl0eSIsIm1lc3NhZ2UiLCJ0b0xvd2VyQ2FzZSIsImNoZWNrUmVwZWF0ZWRQcm9qZWN0TmFtZSIsIm5ld01hc3Rlck9iamVjdCIsInN0b3JlZE1hc3Rlck9iamVjdCIsInBhcnNlIiwibWFwIiwibmV3UHJvamVjdCIsIk9iamVjdCIsImFzc2lnbiIsImNsZWFyIiwiZXZlbnQiLCJpbnB1dEZpZWxkIiwicXVlcnlTZWxlY3RvciIsInZhbHVlSW5mbyIsInZhbHVlIiwiZXJyb3JNc2ciLCJ0ZXh0Q29udGVudCIsInNldFRpbWVvdXQiLCJpbnB1dFZhbHVlIiwibWFzdGVyT2JqIiwidGFza05hbWVGaWVsZCIsInRhc2tEZXNjcmlwdGlvbiIsInRhc2tQcmlvcml0eSIsInByb2plY3RTZWxlY3RlZCIsInRhc2tOYW1lSW5mbyIsInVzZWFibGVEYXRlIiwiZGF0ZSIsInJlcGxhY2UiLCJuZXdUYXNrIiwiZmluZCIsInJlbW92ZU1vZGFsIiwiYmFja2dyb3VuZE1vZGFsIiwiZm9ybSIsImNhbmNlbEJ0biIsImNyb3NzIiwiY29uZmlybVRhc2siLCJmdW5jIiwiZWxlbWVudHMiLCJmb3JFYWNoIiwiZWxlbWVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVDaGlsZCIsInN0eWxlIiwiZGlzcGxheSIsInJlbW92ZVByb2plY3RDcmVhdGlvbiIsImFkZFByb2plY3RCdG4iLCJkcm9wZG93biIsImNvbmZpcm1Qcm9qZWN0QnRuIiwiY2FuY2VsUHJvamVjdEJ0biIsImFkZFByb2plY3RzIiwicHJvamVjdENvbnRhaW5lciIsImFwcGVuZENoaWxkIiwidGFza3NrVWkiLCJ0YXNrc0NvbnRhaW5lciIsInJlbmRlckhvbWUiLCJtZW51SWNvbiIsInByb2plY3RzRHJvcGRvd24iLCJhZGRUYXNrQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm1haW4iLCJ0b2dnbGUiLCJkcm9wRG93biIsImNhcmV0U3ltYm9sIiwidGFyZ2V0IiwiY2hpbGRyZW4iLCJjaGlsZE5vZGVzIiwibGVuZ3RoIiwidGFza0NyZWF0b3IiLCJwcm9qZWN0U2VsZWN0b3IiLCJvcHRpb24iLCJzZWxlY3RlZCJdLCJzb3VyY2VSb290IjoiIn0=