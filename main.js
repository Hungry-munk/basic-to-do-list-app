(()=>{"use strict";function e(){const e=document.createElement("div");return e.classList.add("projectCreator"),e.innerHTML='\n        <div>\n            <input id="projectName" type="text" placeholder="Project name...">\n            <span class="projectErorrMsg"></span>\n        </div>\n        <div>\n            <button class="projectBtn cancelProjectBtn">Cancel</button>\n            <button class="projectBtn addProjectBtn">Add Project</button>\n        </div>\n    ',e}class t{constructor(e){this.title=e,this.tasks=[]}get projectHTML(){return function(e){const t=document.createElement("li");return t.classList.add("project"),t.innerHTML=`\n        <i class="fa-solid fa-circle"></i>\n        <div class="projectTitle">${e}</div>\n        <div class="taskCounter"></div>\n        <i class="fa-solid fa-trash bin"></i>\n    `,t}(this.title)}addTask(e){this.tasks.push(e)}removeTask(e){this.tasks.splice(e,1)}}class n{constructor(e,t,n,o,r){this.title=e,this.description=t,this.priority=n,this.dueDate=o,this.project=r,this.completion=!1}get taskHTML(){return function(e,t,n,o,r){const s=document.createElement("div");return s.setAttribute("project",`${o}`),s.classList.add("task",`${t}`),r&&s.classList.add("completed"),s.innerHTML=`\n        <i class="fa-regular fa-square ${t} "></i>\n        <div class="taskTitle">${e}</div>\n        <button class="taskDetails">Details</button>\n        <div class="taskDate">${n}</div>\n        <i class="fa-solid fa-pen-to-square edit"></i>\n        <i class="fa-solid fa-trash bin"></i>\n    `,s}(this.title,this.priority,this.dueDate,this.project,this.completion)}}class o{constructor(){this.projects=[],this.currentProject="Home"}get tasks(){return this.projects.reduce(((e,t)=>e.concat(t.tasks)),[])}changeCurrentProject(e){this.currentProject=e}}function r(){const e=new o;e.projects.push(new t("Home"));const r=new n("exampleTask","testing please work","medium","12/12/12","Home");return e.projects[0].tasks.push(r),localStorage.clear(),localStorage.masterObject=JSON.stringify(e),e}function s(e){const t=a.projects.indexOf(this);if(-1!=t){a.projects.splice(t,1),e.target.removeEventListener("click",s.bind(this));const n=document.querySelector(".projects"),o=e.target.parentElement;n.removeChild(o),localStorage.masterObject=JSON.stringify(a)}e.stopPropagation()}function c(e){return e?/^[1-9!@#$%^&*(),.?":{}|<>].*/g.test(e)?{validity:!1,message:"cant start with numbers or special character"}:function(e){return!!a.projects.find((t=>t.title.toLowerCase()==e.toLowerCase()))}(e)?{validity:!1,message:"project name already exsists"}:{validity:!0,message:""}:{validity:!1,message:"cant enter empty name"}}const a=(()=>{if("undefined"!=typeof Storage){if(localStorage.masterObject){const e=JSON.parse(localStorage.masterObject);if("Home"!=e.projects[0].title)return r();const s=new o;return s.projects=e.projects.map((e=>{const o=new t;return o.tasks=e.tasks.map((e=>Object.assign(new n,e))),o.title=e.title,o})),localStorage.clear(),localStorage.masterObject=JSON.stringify(s),s}return r()}return r()})();function i(e){const n=document.querySelector("input#projectName"),o=c(n.value);if(!o.validity){const e=document.querySelector("span.projectErorrMsg");return e.textContent=o.message,void setTimeout((()=>{e.textContent=""}),1200)}const r=(s=n.value,new t(s));var s,i,l;i=r,(l=a).projects.push(i),localStorage.masterObject=JSON.stringify(l),T(r),L()}function l(e){const t=document.querySelector("input#taskTitle"),o=document.querySelector("#taskDescription"),r=document.querySelector("#priority"),s=document.querySelector("#projectSelection"),i=document.querySelector("#dueDate"),l=c(t.value);if(!l.validity){const e=document.querySelector("span.errorMsg");return e.textContent=l.message,void setTimeout((()=>{e.textContent=""}),1200)}const u=(d=i.value)?d.replace(/-/g,"/"):"not due";var d;const p=function(e,t,o,r,s){return new n(e,t,o,r,s)}(t.value,o.value,r.value,u,s.value);var m,y;m=p,(y=a).projects.find((e=>e.title==m.project)).tasks.push(m),localStorage.masterObject=JSON.stringify(y),b()}function u(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e){u(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===d(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function m(e){u(1,arguments);var t=p(e);return t.setHours(0,0,0,0),t}function y(e,t){u(2,arguments);var n=m(e),o=m(t);return n.getTime()===o.getTime()}function f(e){return u(1,arguments),y(e,Date.now())}function k(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var v={};function h(){return v}function g(e,t){var n,o,r,s,c,a,i,l;u(1,arguments);var d=h(),m=k(null!==(n=null!==(o=null!==(r=null!==(s=null==t?void 0:t.weekStartsOn)&&void 0!==s?s:null==t||null===(c=t.locale)||void 0===c||null===(a=c.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==r?r:d.weekStartsOn)&&void 0!==o?o:null===(i=d.locale)||void 0===i||null===(l=i.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var y=p(e),f=y.getDay(),v=(f<m?7:0)+f-m;return y.setDate(y.getDate()-v),y.setHours(0,0,0,0),y}function S(e,t,n){u(2,arguments);var o=g(e,n),r=g(t,n);return o.getTime()===r.getTime()}function j(e,t){return u(1,arguments),S(e,Date.now(),t)}function b(e){const t=document.querySelector("#modalBackground"),n=document.querySelector(".modal"),o=document.querySelector(".cancelTaskBtn"),r=document.querySelector(".fa-x"),s=document.querySelector(".addTaskBtn");!function(e,t,...n){n.forEach((n=>n.removeEventListener(t,e)))}(b,"click",r,o),s.removeEventListener("click",l),t.removeChild(n),t.style.display="none"}function L(e){const t=document.querySelector(".projectCreator"),n=document.querySelector(".projects"),o=document.querySelector(".addProject"),r=document.querySelector(".dropDown"),s=document.querySelector(".addProjectBtn"),c=document.querySelector(".cancelProjectBtn");s.removeEventListener("click",i),c.removeEventListener("click",L),r.removeChild(t),n.style.display="flex",o.style.display="flex"}function T(...e){const t=document.querySelector(".projects");e.forEach((e=>{if("Home"==e.title)return;const n=e.projectHTML,o=n.querySelector(".bin");n.querySelector(".taskCounter"),n.setAttribute("project",`${e.title}`),n.addEventListener("click",C.projectTasks.bind(e)),n.addEventListener("mouseenter",w.bind(e)),o.addEventListener("click",s.bind(e)),t.appendChild(n)}))}function q(e,t){document.querySelector(".active").classList.remove("active"),a.changeCurrentProject(e),t.closest("li").classList.add("active")}function E(){const e=this.querySelector(".taskCounter");this.classList.contains("home")?e.setAttribute("taskCount",`${a.tasks.length}`):this.classList.contains("today")?e.setAttribute("taskCount",`${a.tasks.filter((e=>f(new Date(e.dueDate)))).length}`):this.classList.contains("upcoming")?e.setAttribute("taskCount",`${a.tasks.filter((e=>j(new Date(e.dueDate)))).length}`):this.classList.contains("completed")&&e.setAttribute("taskCount",`${a.tasks.filter((e=>e.completion)).length}`)}function w(e){e.target.querySelector(".taskCounter").setAttribute("taskCount",`${this.tasks.length}`)}const C=(e=>{const t=document.querySelector("h2.selectionTitle"),n=document.querySelector(".tasks");return{homeTasks:function(o){n.innerHTML="",t.textContent="Home",q("Home",o instanceof HTMLElement?o:o.target),e.tasks.forEach((e=>{n.appendChild(e.taskHTML)}))},todayTasks:function(o){n.innerHTML="",t.textContent="Today",q("Today",o.target),e.tasks.forEach((e=>{f(new Date(e.dueDate))&&n.appendChild(e.taskHTML)}))},weekTasks:function(o){n.innerHTML="",t.textContent="Upcoming",q("Upcoming",o.target),e.tasks.forEach((e=>{j(new Date(e.dueDate))&&n.appendChild(e.taskHTML)}))},completedTasks:function(o){n.innerHTML="",t.textContent="Completed",q("Completed",o.target),e.tasks.forEach((e=>{e.completion&&n.appendChild(e.taskHTML)}))},projectTasks:function(e){n.innerHTML="",t.textContent=this.title,q(this.title,e.target),this.tasks.forEach((e=>{n.appendChild(e.taskHTML)}))}}})(a),D=document.querySelector(".menuIcon"),H=document.querySelector(".projectsTitle"),M=document.querySelector(".addTask"),x=document.querySelector(".addProject"),O=(document.querySelector("aside"),document.querySelector("main"),document.querySelector(".home")),P=document.querySelector(".today"),B=document.querySelector(".upcoming"),N=document.querySelector(".completed"),$=[...document.querySelectorAll("li")];D.addEventListener("click",(function(){const e=document.querySelector("main#main");document.querySelector(".taskContainer"),e.classList.toggle("menuIsNotActive")})),H.addEventListener("click",(function(e){const t=document.querySelector(".dropDown"),n=e.target.children[0];"none"==t.style.display?(t.style.display="flex",n.classList.toggle("fa-caret-down"),n.classList.toggle("fa-caret-up")):(t.style.display="none",n.classList.toggle("fa-caret-down"),n.classList.toggle("fa-caret-up"))})),M.addEventListener("click",(function(e){const t=document.querySelector("#modalBackground");if(t.childNodes.length>0)return;t.appendChild(function(e){const t=document.createElement("div");t.classList.add("modal"),t.innerHTML='\n        <div class="taskCreationHeader modalHeader">\n            <div>New Task</div>\n            <i class="fa-solid fa-x"></i>\n        </div>\n        <form class="taskCreationForm">\n            <div class="taskDetails1">\n                <label for="taskTitle">Title:</label>\n                <input class="taskEntry" type="text" id="taskTitle" placeholder="e.g. Pay bills" spellcheck = "true">\n                <span class="errorMsg"></span>\n\n                <label for="taskDescription">Description:</label>\n                <textarea class="taskEntry" id="taskDescription" placeholder="e.g. internet, phone, rent, etc" spellcheck = "true"></textarea>\n\n            </div>\n            <div class="taskDetails2">\n                <label for="dueDate">Due Date:</label>\n                <input type="date" class="taskEntry" id="dueDate">\n\n                <label for="priority">Priority:</label>\n                <select id="priority" class="taskEntry">\n                    <option value="none" selected>None</option>\n                    <option value="low">Low</option>\n                    <option value="medium">Medium</option>\n                    <option value="high">High</option>\n                </select>\n\n                <label for="projectSelection">Project:</label>\n                <select id="projectSelection" class="taskEntry">\n                \n                </select>\n            </div>\n            <div class="taskCreationDecision">\n                <button type="button" class="cancelTaskBtn modalBtn cancelModalBtn">Cancel</button>\n                <button type="button" class="addTaskBtn modalBtn addModalBtn">Add task</button>\n            </div>\n\n        </form>\n\n    ';const n=t.querySelector("#projectSelection");return e.projects.forEach((e=>{const t=document.createElement("option");t.textContent=e.title,t.value=e.title,e.title==a.currentProject&&(t.selected=!0),n.appendChild(t)})),t}(a));const n=document.querySelector(".fa-x"),o=document.querySelector(".cancelTaskBtn"),r=document.querySelector(".addTaskBtn");!function(e,t,...n){n.forEach((n=>n.addEventListener(t,e)))}(b,"click",n,o),r.addEventListener("click",l),t.style.display="flex"})),x.addEventListener("click",(function(t){e();const n=document.querySelector(".projects"),o=document.querySelector(".addProject");document.querySelector(".dropDown").appendChild(e());const r=document.querySelector(".addProjectBtn"),s=document.querySelector(".cancelProjectBtn");r.addEventListener("click",i),s.addEventListener("click",L),n.style.display="none",o.style.display="none"})),O.addEventListener("click",C.homeTasks),P.addEventListener("click",C.todayTasks),B.addEventListener("click",C.weekTasks),N.addEventListener("click",C.completedTasks),$.forEach((e=>e.addEventListener("mouseenter",E))),T(...a.projects),C.homeTasks(O)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTb0ksTUFBTUMsUUFBVSxPQUN6QkUsRUFBY0gsTUFBTUMsUUFBVSxNQUVsQyxJQ2xEQWdDLEVBQVF0QixpQkFBaUIsUUFBUSxhQUNqQ3VCLEVBQVN2QixpQkFBaUIsUUFBUSxjQUNsQ3dCLEVBQVl4QixpQkFBaUIsUUFBUSxhQUNyQ3lCLEVBQWF6QixpQkFBaUIsUUFBUSxrQkFDdEMwQixFQUFZdkMsU0FBUXRJLEdBQ2hCQSxFQUFRbUosaUJBQWlCLGFBQWEsS0FPMUMsS0FBa0IsWUFDbEIsWUFBb0JzQixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9zcmMvbW9kdWxlcy9kb21DcmVhdGlvbi5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC8uL3NyYy9tb2R1bGVzL2NsYXNzZXMuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9zcmMvbW9kdWxlcy9mdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC8uL3NyYy9tb2R1bGVzL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9zcmMvbW9kdWxlcy9mdW5jdGlvbkJ1bmRsZXIuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS90b0RhdGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZEYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZURheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNUb2RheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0LWFwcC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi90b0ludGVnZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvZGVmYXVsdE9wdGlvbnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC1hcHAvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZXZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1NhbWVXZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1RoaXNXZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL21vZHVsZXMvVUltYW5pdXB1bGF0aW9uLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QtYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1hc3Rlck9iamVjdCB9IGZyb20gXCIuL3N0b3JhZ2VcIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRhc2tNb2RhbChtYXN0ZXJPYmope1xyXG4gICAgY29uc3QgdGFza0NyZWF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICB0YXNrQ3JlYXRvci5jbGFzc0xpc3QuYWRkKFwibW9kYWxcIilcclxuICAgIHRhc2tDcmVhdG9yLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFza0NyZWF0aW9uSGVhZGVyIG1vZGFsSGVhZGVyXCI+XHJcbiAgICAgICAgICAgIDxkaXY+TmV3IFRhc2s8L2Rpdj5cclxuICAgICAgICAgICAgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS14XCI+PC9pPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxmb3JtIGNsYXNzPVwidGFza0NyZWF0aW9uRm9ybVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFza0RldGFpbHMxXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFza1RpdGxlXCI+VGl0bGU6PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cInRhc2tFbnRyeVwiIHR5cGU9XCJ0ZXh0XCIgaWQ9XCJ0YXNrVGl0bGVcIiBwbGFjZWhvbGRlcj1cImUuZy4gUGF5IGJpbGxzXCIgc3BlbGxjaGVjayA9IFwidHJ1ZVwiPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvck1zZ1wiPjwvc3Bhbj5cclxuXHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFza0Rlc2NyaXB0aW9uXCI+RGVzY3JpcHRpb246PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBjbGFzcz1cInRhc2tFbnRyeVwiIGlkPVwidGFza0Rlc2NyaXB0aW9uXCIgcGxhY2Vob2xkZXI9XCJlLmcuIGludGVybmV0LCBwaG9uZSwgcmVudCwgZXRjXCIgc3BlbGxjaGVjayA9IFwidHJ1ZVwiPjwvdGV4dGFyZWE+XHJcblxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2tEZXRhaWxzMlwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImR1ZURhdGVcIj5EdWUgRGF0ZTo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRlXCIgY2xhc3M9XCJ0YXNrRW50cnlcIiBpZD1cImR1ZURhdGVcIj5cclxuXHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicHJpb3JpdHlcIj5Qcmlvcml0eTo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPHNlbGVjdCBpZD1cInByaW9yaXR5XCIgY2xhc3M9XCJ0YXNrRW50cnlcIj5cclxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibm9uZVwiIHNlbGVjdGVkPk5vbmU8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibG93XCI+TG93PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm1lZGl1bVwiPk1lZGl1bTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJoaWdoXCI+SGlnaDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcblxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInByb2plY3RTZWxlY3Rpb25cIj5Qcm9qZWN0OjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwicHJvamVjdFNlbGVjdGlvblwiIGNsYXNzPVwidGFza0VudHJ5XCI+XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhc2tDcmVhdGlvbkRlY2lzaW9uXCI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNhbmNlbFRhc2tCdG4gbW9kYWxCdG4gY2FuY2VsTW9kYWxCdG5cIj5DYW5jZWw8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYWRkVGFza0J0biBtb2RhbEJ0biBhZGRNb2RhbEJ0blwiPkFkZCB0YXNrPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8L2Zvcm0+XHJcblxyXG4gICAgYFxyXG4gICAgLy8gYWNjZXNzaW5nIHRoZSBzZWNvbmQgc2VsZWN0IG9wdGlvblxyXG4gICAgY29uc3QgcHJvamVjdFNlbGVjdG9yID0gdGFza0NyZWF0b3IucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0U2VsZWN0aW9uXCIpXHJcbiAgICBtYXN0ZXJPYmoucHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcclxuICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpXHJcbiAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gcHJvamVjdC50aXRsZVxyXG4gICAgICAgIG9wdGlvbi52YWx1ZSA9IHByb2plY3QudGl0bGVcclxuICAgICAgICAvLyBkZWZhdWx0IG9wdGlvblxyXG4gICAgICAgIGlmIChwcm9qZWN0LnRpdGxlID09IG1hc3Rlck9iamVjdC5jdXJyZW50UHJvamVjdCkgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZVxyXG5cclxuICAgICAgICBwcm9qZWN0U2VsZWN0b3IuYXBwZW5kQ2hpbGQob3B0aW9uKVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRhc2tDcmVhdG9yXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0Q3JlYXRvciAoKSB7XHJcbiAgICBjb25zdCBwcm9qZWN0Q3JlYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgIHByb2plY3RDcmVhdG9yLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0Q3JlYXRvclwiKVxyXG4gICAgcHJvamVjdENyZWF0b3IuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgIDxpbnB1dCBpZD1cInByb2plY3ROYW1lXCIgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIlByb2plY3QgbmFtZS4uLlwiPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2plY3RFcm9yck1zZ1wiPjwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicHJvamVjdEJ0biBjYW5jZWxQcm9qZWN0QnRuXCI+Q2FuY2VsPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwcm9qZWN0QnRuIGFkZFByb2plY3RCdG5cIj5BZGQgUHJvamVjdDwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYFxyXG4gICAgcmV0dXJuIHByb2plY3RDcmVhdG9yXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0KHByb2plY3RUaXRsZSkge1xyXG4gICAgY29uc3QgcHJvamVjdEhUTUwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIilcclxuICAgIHByb2plY3RIVE1MLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0XCIpXHJcbiAgICBwcm9qZWN0SFRNTC5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jaXJjbGVcIj48L2k+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInByb2plY3RUaXRsZVwiPiR7cHJvamVjdFRpdGxlfTwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrQ291bnRlclwiPjwvZGl2PlxyXG4gICAgICAgIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtdHJhc2ggYmluXCI+PC9pPlxyXG4gICAgYFxyXG4gICAgcmV0dXJuIHByb2plY3RIVE1MXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUYXNrKHRpdGxlLHByaW9yaXR5LGR1ZURhdGUscHJvamVjdCxjb21wbGV0aW9uKSB7XHJcbiAgICBjb25zdCB0YXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgdGFzay5zZXRBdHRyaWJ1dGUoXCJwcm9qZWN0XCIsYCR7cHJvamVjdH1gKVxyXG4gICAgdGFzay5jbGFzc0xpc3QuYWRkKFwidGFza1wiLGAke3ByaW9yaXR5fWApXHJcbiAgICBpZiAoY29tcGxldGlvbikgdGFzay5jbGFzc0xpc3QuYWRkKFwiY29tcGxldGVkXCIpXHJcbiAgICB0YXNrLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8aSBjbGFzcz1cImZhLXJlZ3VsYXIgZmEtc3F1YXJlICR7cHJpb3JpdHl9IFwiPjwvaT5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFza1RpdGxlXCI+JHt0aXRsZX08L2Rpdj5cclxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwidGFza0RldGFpbHNcIj5EZXRhaWxzPC9idXR0b24+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRhc2tEYXRlXCI+JHtkdWVEYXRlfTwvZGl2PlxyXG4gICAgICAgIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtcGVuLXRvLXNxdWFyZSBlZGl0XCI+PC9pPlxyXG4gICAgICAgIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtdHJhc2ggYmluXCI+PC9pPlxyXG4gICAgYFxyXG4gICAgcmV0dXJuIHRhc2tcclxufSIsImltcG9ydCAqIGFzIGNyZWF0aW9uIGZyb20gXCIuL2RvbUNyZWF0aW9uXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0IHtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlXHJcbiAgICAgICAgdGhpcy50YXNrcyA9IFtdXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldCBwcm9qZWN0SFRNTCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0aW9uLmNyZWF0ZVByb2plY3QodGhpcy50aXRsZSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgYWRkVGFzayh0YXNrKXtcclxuICAgICAgICB0aGlzLnRhc2tzLnB1c2godGFzaylcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVUYXNrKHRhc2tJbmRleCkge1xyXG4gICAgICAgIHRoaXMudGFza3Muc3BsaWNlKHRhc2tJbmRleCwgMSlcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyB0YXNrIHtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLGRlc2NyaXB0aW9uLHByaW9yaXR5LGR1ZURhdGUscHJvamVjdCkge1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICAgICAgdGhpcy5wcmlvcml0eT0gcHJpb3JpdHk7XHJcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcclxuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0XHJcbiAgICAgICAgdGhpcy5jb21wbGV0aW9uID0gIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgICBcclxuICAgIGdldCB0YXNrSFRNTCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0aW9uLmNyZWF0ZVRhc2soXHJcbiAgICAgICAgICAgIHRoaXMudGl0bGUsXHJcbiAgICAgICAgICAgIHRoaXMucHJpb3JpdHksXHJcbiAgICAgICAgICAgIHRoaXMuZHVlRGF0ZSxcclxuICAgICAgICAgICAgdGhpcy5wcm9qZWN0LFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRpb24sXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIG1hc3Rlck9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnByb2plY3RzID0gW11cclxuICAgICAgICB0aGlzLmN1cnJlbnRQcm9qZWN0ID0gXCJIb21lXCJcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdGFza3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdHMucmVkdWNlKCh0YXNrc0FycmF5LHByb2plY3QpPT4oXHJcbiAgICAgICAgICAgIHRhc2tzQXJyYXkuY29uY2F0KHByb2plY3QudGFza3MpKSxbXSlcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VDdXJyZW50UHJvamVjdChuZXdDdXJyZW50UHJvamVjdCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFByb2plY3QgPSBuZXdDdXJyZW50UHJvamVjdFxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuIiwiaW1wb3J0ICogYXMgY2xzIGZyb20gXCIuL2NsYXNzZXNcIjtcclxuaW1wb3J0ICogYXMgc3RyIGZyb20gXCIuL3N0b3JhZ2VcIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZpcnN0VGltZU1hc3Rlck9iaigpIHtcclxuICAgIC8vIGNyZWF0aW5nIG1hc3RlciBvYmplY3RcclxuICAgIGNvbnN0IG1hc3Rlck9iamVjdCA9IG5ldyBjbHMubWFzdGVyT2JqZWN0KClcclxuICAgIC8vIGFkZGluZyBob21lIHByb2plY3RcclxuICAgIG1hc3Rlck9iamVjdC5wcm9qZWN0cy5wdXNoKG5ldyBjbHMuUHJvamVjdChcIkhvbWVcIikpXHJcbiAgICAvLyBhZGRpbmcgZXhhbXBsZSB0YXNrXHJcbiAgICBjb25zdCBleGFtcGxlVGFzayA9IG5ldyBjbHMudGFzayhcImV4YW1wbGVUYXNrXCIsXCJ0ZXN0aW5nIHBsZWFzZSB3b3JrXCIsIFwibWVkaXVtXCIsXCIxMi8xMi8xMlwiLFwiSG9tZVwiKVxyXG4gICAgbWFzdGVyT2JqZWN0LnByb2plY3RzWzBdLnRhc2tzLnB1c2goZXhhbXBsZVRhc2spXHJcbiAgICAvLyBqdXN0IHRvIG1ha2Ugc3VyZSB0aGUgdXNlciBkaWRudCBjaGFuZ2UgdGhlIGxvY2FsIHN0b3JhZ2VcclxuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICBsb2NhbFN0b3JhZ2UubWFzdGVyT2JqZWN0ID0gSlNPTi5zdHJpbmdpZnkobWFzdGVyT2JqZWN0KSAgICBcclxuICAgIHJldHVybiBtYXN0ZXJPYmplY3RcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZEV2ZW50IChmdW5jLGV2ZW50LCAuLi5lbGVtZW50cyApIHtcclxuICAgIGVsZW1lbnRzLmZvckVhY2goZWxlbWVudD0+ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LGZ1bmMpKX07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRXZlbnQgKGZ1bmMsZXZlbnQsIC4uLmVsZW1lbnRzICkge1xyXG4gICAgZWxlbWVudHMuZm9yRWFjaChlbGVtZW50PT4gZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LGZ1bmMpKX07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvamVjdChpbnB1dFZhbHVlKXtcclxuICAgIGNvbnN0IG5ld1Byb2plY3QgPSBuZXcgY2xzLlByb2plY3QoaW5wdXRWYWx1ZSlcclxuICAgIC8vICBmb3IgZXhwYW5zaW9uIGlmIG5lZWRlZFxyXG4gICAgcmV0dXJuIG5ld1Byb2plY3RcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVByb2plY3QoZXZlbnQpIHtcclxuICAgIC8vIGdldHRpbmcgaW5kZXggYW5kIGNoY2tpbmcgZXhzaXN0YW5jZVxyXG4gICAgY29uc3QgcmVtb3ZlZFByb2plY3RJbmRleCA9IHN0ci5tYXN0ZXJPYmplY3QucHJvamVjdHMuaW5kZXhPZih0aGlzKVxyXG5cclxuICAgIGlmIChyZW1vdmVkUHJvamVjdEluZGV4ICE9IC0xKSB7XHJcbiAgICAgICAgc3RyLm1hc3Rlck9iamVjdC5wcm9qZWN0cy5zcGxpY2UocmVtb3ZlZFByb2plY3RJbmRleCwxKVxyXG4gICAgICAgIGV2ZW50LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycscmVtb3ZlUHJvamVjdC5iaW5kKHRoaXMpKVxyXG4gICAgICAgIC8vIHJlbW92aW5nIGl0IGZyb20gRE9NXHJcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzXCIpXHJcbiAgICAgICAgY29uc3QgcmVtb3ZlZFByb2plY3QgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudFxyXG4gICAgICAgIHByb2plY3RzLnJlbW92ZUNoaWxkKHJlbW92ZWRQcm9qZWN0KVxyXG5cclxuICAgICAgICAvLyBzYXZlIGNoYW5nZXNcclxuICAgICAgICBzdHIuc2F2ZU1hc3Rlck9iamVjdCgpIFxyXG4gICAgfVxyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRhc2sodGl0bGUsZGVzY3JpcHRpb24scHJpb3JpdHksZHVlRGF0ZSxwcm9qZWN0KSB7XHJcbiAgICBjb25zdCBuZXdUYXNrID0gbmV3IGNscy50YXNrKHRpdGxlLGRlc2NyaXB0aW9uLHByaW9yaXR5LGR1ZURhdGUscHJvamVjdClcclxuICAgIC8vIGZpciBleHBhbnNpb24gaWQgbmVlZGVkXHJcbiAgICByZXR1cm4gbmV3VGFza1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tOYW1lVmFsaWRpdHkobmFtZSkge1xyXG4gICAgY29uc3QgSW52YWxpZFBhdHRlcm4gPSAvXlsxLTkhQCMkJV4mKigpLC4/XCI6e318PD5dLiovZ1xyXG4gICAgaWYgKCFuYW1lKSByZXR1cm4ge1xyXG4gICAgICAgICAgICB2YWxpZGl0eTpmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogXCJjYW50IGVudGVyIGVtcHR5IG5hbWVcIlxyXG4gICAgICAgIH0gXHJcbiAgICBlbHNlIGlmIChJbnZhbGlkUGF0dGVybi50ZXN0KG5hbWUpKSByZXR1cm4ge1xyXG4gICAgICAgIHZhbGlkaXR5OmZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IFwiY2FudCBzdGFydCB3aXRoIG51bWJlcnMgb3Igc3BlY2lhbCBjaGFyYWN0ZXJcIlxyXG4gICAgICAgIH1cclxuICAgIGVsc2UgaWYgKGNoZWNrUmVwZWF0ZWRQcm9qZWN0TmFtZShuYW1lKSkgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZGl0eTpmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBcInByb2plY3QgbmFtZSBhbHJlYWR5IGV4c2lzdHNcIlxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZGl0eTp0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2UgOiBcIlwiXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrUmVwZWF0ZWRQcm9qZWN0TmFtZSAobmFtZSkge1xyXG4gICAgcmV0dXJuICEhKHN0ci5tYXN0ZXJPYmplY3QucHJvamVjdHMuZmluZChwcm9qZWN0ID0+XHJcbiAgICAgICAgcHJvamVjdC50aXRsZS50b0xvd2VyQ2FzZSgpID09IG5hbWUudG9Mb3dlckNhc2UoKSkpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlIChkYXRlKSB7XHJcbiAgICBpZiAoIWRhdGUpIHJldHVybiBcIm5vdCBkdWVcIlxyXG4gICAgLy9yZXBsYWNpbmcgLSB3aXRoIC9cclxuICAgIHJldHVybiBkYXRlLnJlcGxhY2UoLy0vZywgXCIvXCIpXHJcbn1cclxuXHJcbiIsImltcG9ydCB7Y3JlYXRlRmlyc3RUaW1lTWFzdGVyT2JqfSBmcm9tIFwiLi9mdW5jdGlvblwiXHJcbmltcG9ydCAqIGFzIGNscyBmcm9tIFwiLi9jbGFzc2VzXCJcclxuXHJcbmV4cG9ydCBjb25zdCBtYXN0ZXJPYmplY3QgPSAoKCk9PntcclxuICAgIGlmICh0eXBlb2YoU3RvcmFnZSkgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLm1hc3Rlck9iamVjdCkge1xyXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRNYXN0ZXJPYmplY3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5tYXN0ZXJPYmplY3QpXHJcbiAgICAgICAgICAgIGlmIChzdG9yZWRNYXN0ZXJPYmplY3QucHJvamVjdHNbMF0udGl0bGUgIT0gXCJIb21lXCIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlRmlyc3RUaW1lTWFzdGVyT2JqKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBuZXdNYXN0ZXJPYmplY3QgPSBuZXcgY2xzLm1hc3Rlck9iamVjdCgpXHJcbiAgICAgICAgICAgIC8vIHRyYW5zZmVyaW5nIGFsbCBwcm9qZWN0cyBhbmQgdGFza3NcclxuICAgICAgICAgICAgbmV3TWFzdGVyT2JqZWN0LnByb2plY3RzID0gc3RvcmVkTWFzdGVyT2JqZWN0LnByb2plY3RzLm1hcChwcm9qZWN0PT57XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdQcm9qZWN0ID0gbmV3IGNscy5Qcm9qZWN0KClcclxuICAgICAgICAgICAgICAgIG5ld1Byb2plY3QudGFza3MgPSBwcm9qZWN0LnRhc2tzLm1hcCh0YXNrPT57XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IGNscy50YXNrKCksdGFzayk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG5ld1Byb2plY3QudGl0bGUgPSBwcm9qZWN0LnRpdGxlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3UHJvamVjdFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvLyBzYXZpbmcgdGhlIG1hc3RlciBvYmplY3QgdG8gbG9jYWwgc3RvcmFnZVxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKSAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UubWFzdGVyT2JqZWN0ID0gSlNPTi5zdHJpbmdpZnkobmV3TWFzdGVyT2JqZWN0KVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3TWFzdGVyT2JqZWN0O1xyXG4gICAgICAgIH0gZWxzZSBcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUZpcnN0VGltZU1hc3Rlck9iaigpO1xyXG4gICAgfSBlbHNlXHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUZpcnN0VGltZU1hc3Rlck9iaigpO1xyXG59KSgpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVQcm9qZWN0IChwcm9qZWN0LG1hc3Rlck9iaikge1xyXG4gICAgbWFzdGVyT2JqLnByb2plY3RzLnB1c2gocHJvamVjdClcclxuICAgIGxvY2FsU3RvcmFnZS5tYXN0ZXJPYmplY3QgPSBKU09OLnN0cmluZ2lmeShtYXN0ZXJPYmopXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYXZlVGFzayh0YXNrLCBtYXN0ZXJPYmopIHtcclxuICAgIChtYXN0ZXJPYmoucHJvamVjdHMuZmluZChwcm9qZWN0ID0+IHByb2plY3QudGl0bGUgPT0gdGFzay5wcm9qZWN0XHJcbiAgICAgICAgKSkudGFza3MucHVzaCh0YXNrKVxyXG4gICAgbG9jYWxTdG9yYWdlLm1hc3Rlck9iamVjdCA9IEpTT04uc3RyaW5naWZ5KG1hc3Rlck9iailcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVNYXN0ZXJPYmplY3QoKSB7XHJcbiAgICBsb2NhbFN0b3JhZ2UubWFzdGVyT2JqZWN0ID0gSlNPTi5zdHJpbmdpZnkobWFzdGVyT2JqZWN0KVxyXG59IiwiaW1wb3J0ICogYXMgY3JlYXRpb24gZnJvbSBcIi4vZG9tQ3JlYXRpb25cIlxyXG5pbXBvcnQgKiBhcyBmdW5jIGZyb20gXCIuL2Z1bmN0aW9uXCJcclxuaW1wb3J0ICogYXMgc3RyIGZyb20gXCIuL3N0b3JhZ2VcIlxyXG5pbXBvcnQgKiBhcyBVSSBmcm9tIFwiLi9VSW1hbml1cHVsYXRpb25cIlxyXG5cclxuLy8gZm9yIHdoZW4gdGhlIHRoZSB1c2VyIHdhbnRzIHRvIGNvbmZpcm0gdGhlaXIgcHJvamVjdCBjcmVhdGlvblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvamVjdChldmVudCkge1xyXG4gICAgY29uc3QgaW5wdXRGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dCNwcm9qZWN0TmFtZVwiKVxyXG4gICAgY29uc3QgdmFsdWVJbmZvID0gZnVuYy5jaGVja05hbWVWYWxpZGl0eShpbnB1dEZpZWxkLnZhbHVlKVxyXG5cclxuICAgIC8vIGNvbnN0IFxyXG4gICAgaWYgKCF2YWx1ZUluZm8udmFsaWRpdHkpIHtcclxuICAgICAgICBjb25zdCBlcnJvck1zZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuLnByb2plY3RFcm9yck1zZ1wiKVxyXG4gICAgICAgIGVycm9yTXNnLnRleHRDb250ZW50ID0gdmFsdWVJbmZvLm1lc3NhZ2U7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKT0+e2Vycm9yTXNnLnRleHRDb250ZW50PVwiXCJ9LDEyMDApXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICAvLyBwcm9qZWN0IGNyZWF0aW9uXHJcbiAgICBjb25zdCBuZXdQcm9qZWN0ID0gZnVuYy5jcmVhdGVQcm9qZWN0KGlucHV0RmllbGQudmFsdWUpXHJcbiAgICBzdHIuc2F2ZVByb2plY3QobmV3UHJvamVjdCxzdHIubWFzdGVyT2JqZWN0KVxyXG4gICAgVUkuYWRkUHJvamVjdHMobmV3UHJvamVjdClcclxuICAgIC8vIGZpbmlzaGluZ1xyXG4gICAgVUkucmVtb3ZlUHJvamVjdENyZWF0aW9uKClcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUYXNrKGV2ZW50KSB7XHJcbiAgICBjb25zdCB0YXNrTmFtZUZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImlucHV0I3Rhc2tUaXRsZVwiKVxyXG4gICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrRGVzY3JpcHRpb25cIilcclxuICAgIGNvbnN0IHRhc2tQcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdHlcIilcclxuICAgIGNvbnN0IHByb2plY3RTZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdFNlbGVjdGlvblwiKVxyXG4gICAgY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZHVlRGF0ZVwiKVxyXG4gICAgLy8gaXMgbmFtZSB2YWxpZlxyXG4gICAgXHJcbiAgICBjb25zdCB0YXNrTmFtZUluZm8gPSBmdW5jLmNoZWNrTmFtZVZhbGlkaXR5KHRhc2tOYW1lRmllbGQudmFsdWUpXHJcbiAgICAvLyBjb25zdCBcclxuICAgIGlmICghdGFza05hbWVJbmZvLnZhbGlkaXR5KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic3Bhbi5lcnJvck1zZ1wiKVxyXG4gICAgICAgIGVycm9yTXNnLnRleHRDb250ZW50ID0gdGFza05hbWVJbmZvLm1lc3NhZ2U7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKT0+e2Vycm9yTXNnLnRleHRDb250ZW50PVwiXCJ9LDEyMDApXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlYWJsZURhdGUgPSBmdW5jLmZvcm1hdERhdGUoZHVlRGF0ZS52YWx1ZSlcclxuICAgIGNvbnN0IG5ld1Rhc2sgPSBmdW5jLmNyZWF0ZVRhc2soXHJcbiAgICAgICAgdGFza05hbWVGaWVsZC52YWx1ZSxcclxuICAgICAgICB0YXNrRGVzY3JpcHRpb24udmFsdWUsXHJcbiAgICAgICAgdGFza1ByaW9yaXR5LnZhbHVlLFxyXG4gICAgICAgIHVzZWFibGVEYXRlLFxyXG4gICAgICAgIHByb2plY3RTZWxlY3RlZC52YWx1ZVxyXG4gICAgKVxyXG4gICAgc3RyLnNhdmVUYXNrKG5ld1Rhc2ssc3RyLm1hc3Rlck9iamVjdClcclxuICAgIC8vIHJlbmRlciBuZXcgdGFza3MgZnVuY3Rpb25cclxuICAgIFVJLnJlbW92ZU1vZGFsKClcclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXF1aXJlZEFyZ3MocmVxdWlyZWQsIGFyZ3MpIHtcbiAgaWYgKGFyZ3MubGVuZ3RoIDwgcmVxdWlyZWQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHJlcXVpcmVkICsgJyBhcmd1bWVudCcgKyAocmVxdWlyZWQgPiAxID8gJ3MnIDogJycpICsgJyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3MubGVuZ3RoICsgJyBwcmVzZW50Jyk7XG4gIH1cbn0iLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHRvRGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgaXRzIGNsb25lLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgbm9uZSBvZiB0aGUgYWJvdmUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBhcmdTdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpOyAvLyBDbG9uZSB0aGUgZGF0ZVxuXG4gIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIERhdGUgfHwgX3R5cGVvZihhcmd1bWVudCkgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNzdHJpbmctYXJndW1lbnRzXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHJldHVybnMge0RhdGV9IHRoZSBzdGFydCBvZiBhIGRheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIGRheSBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZEYXkobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gVHVlIFNlcCAwMiAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZkRheShkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCBzdGFydE9mRGF5IGZyb20gXCIuLi9zdGFydE9mRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1NhbWVEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKVxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgMDY6MDA6MDAgYW5kIDQgU2VwdGVtYmVyIDE4OjAwOjAwIGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0LCA2LCAwKSwgbmV3IERhdGUoMjAxNCwgOCwgNCwgMTgsIDApKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciBhbmQgNCBPY3RvYmVyIGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNCwgOSwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciwgMjAxNCBhbmQgNCBTZXB0ZW1iZXIsIDIwMTUgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE1LCA4LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVEYXkoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZUxlZnQpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlUmlnaHQpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mRGF5LmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZkRheS5nZXRUaW1lKCk7XG59IiwiaW1wb3J0IGlzU2FtZURheSBmcm9tIFwiLi4vaXNTYW1lRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1RvZGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZSBpcyB0b2RheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDYgT2N0b2JlciAyMDE0LCBpcyA2IE9jdG9iZXIgMTQ6MDA6MDAgdG9kYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RvZGF5KG5ldyBEYXRlKDIwMTQsIDksIDYsIDE0LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVG9kYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lRGF5KGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9JbnRlZ2VyKGRpcnR5TnVtYmVyKSB7XG4gIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG5cbiAgaWYgKGlzTmFOKG51bWJlcikpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbn0iLCJ2YXIgZGVmYXVsdE9wdGlvbnMgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0T3B0aW9ucygpIHtcbiAgcmV0dXJuIGRlZmF1bHRPcHRpb25zO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRPcHRpb25zKG5ld09wdGlvbnMpIHtcbiAgZGVmYXVsdE9wdGlvbnMgPSBuZXdPcHRpb25zO1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuLi9fbGliL2RlZmF1bHRPcHRpb25zL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBTdW4gQXVnIDMxIDIwMTQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdGhlIHdlZWsgc3RhcnRzIG9uIE1vbmRheSwgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gTW9uIFNlcCAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZldlZWsoZGlydHlEYXRlLCBvcHRpb25zKSB7XG4gIHZhciBfcmVmLCBfcmVmMiwgX3JlZjMsIF9vcHRpb25zJHdlZWtTdGFydHNPbiwgX29wdGlvbnMkbG9jYWxlLCBfb3B0aW9ucyRsb2NhbGUkb3B0aW8sIF9kZWZhdWx0T3B0aW9ucyRsb2NhbCwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMjtcblxuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgdmFyIHdlZWtTdGFydHNPbiA9IHRvSW50ZWdlcigoX3JlZiA9IChfcmVmMiA9IChfcmVmMyA9IChfb3B0aW9ucyR3ZWVrU3RhcnRzT24gPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyR3ZWVrU3RhcnRzT24gIT09IHZvaWQgMCA/IF9vcHRpb25zJHdlZWtTdGFydHNPbiA6IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vcHRpb25zJGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRsb2NhbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb3B0aW9ucyRsb2NhbGUkb3B0aW8gPSBfb3B0aW9ucyRsb2NhbGUub3B0aW9ucykgPT09IG51bGwgfHwgX29wdGlvbnMkbG9jYWxlJG9wdGlvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRsb2NhbGUkb3B0aW8ud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmMyAhPT0gdm9pZCAwID8gX3JlZjMgOiBkZWZhdWx0T3B0aW9ucy53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYyICE9PSB2b2lkIDAgPyBfcmVmMiA6IChfZGVmYXVsdE9wdGlvbnMkbG9jYWwgPSBkZWZhdWx0T3B0aW9ucy5sb2NhbGUpID09PSBudWxsIHx8IF9kZWZhdWx0T3B0aW9ucyRsb2NhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIgPSBfZGVmYXVsdE9wdGlvbnMkbG9jYWwub3B0aW9ucykgPT09IG51bGwgfHwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RlZmF1bHRPcHRpb25zJGxvY2FsMi53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYgIT09IHZvaWQgMCA/IF9yZWYgOiAwKTsgLy8gVGVzdCBpZiB3ZWVrU3RhcnRzT24gaXMgYmV0d2VlbiAwIGFuZCA2IF9hbmRfIGlzIG5vdCBOYU5cblxuICBpZiAoISh3ZWVrU3RhcnRzT24gPj0gMCAmJiB3ZWVrU3RhcnRzT24gPD0gNikpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignd2Vla1N0YXJ0c09uIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2IGluY2x1c2l2ZWx5Jyk7XG4gIH1cblxuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcbiAgdmFyIGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBkaWZmKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IHN0YXJ0T2ZXZWVrIGZyb20gXCIuLi9zdGFydE9mV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1NhbWVXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIHdlZWsgKGFuZCBtb250aCBhbmQgeWVhcik/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIHdlZWsgKGFuZCBtb250aCBhbmQgeWVhcik/XG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIHdlZWsgKGFuZCBtb250aCBhbmQgeWVhcilcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDcsIDMxKSwgbmV3IERhdGUoMjAxNCwgOCwgNCkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgd2VlayBzdGFydHMgd2l0aCBNb25kYXksXG4gKiAvLyBhcmUgMzEgQXVndXN0IDIwMTQgYW5kIDQgU2VwdGVtYmVyIDIwMTQgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSwge1xuICogICB3ZWVrU3RhcnRzT246IDFcbiAqIH0pXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAxIEphbnVhcnkgMjAxNCBhbmQgMSBKYW51YXJ5IDIwMTUgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgMCwgMSksIG5ldyBEYXRlKDIwMTUsIDAsIDEpKVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVXZWVrKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0LCBvcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZUxlZnQsIG9wdGlvbnMpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkaXJ0eURhdGVSaWdodCwgb3B0aW9ucyk7XG4gIHJldHVybiBkYXRlTGVmdFN0YXJ0T2ZXZWVrLmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZldlZWsuZ2V0VGltZSgpO1xufSIsImltcG9ydCBpc1NhbWVXZWVrIGZyb20gXCIuLi9pc1NhbWVXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGlzVGhpc1dlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBzYW1lIHdlZWsgYXMgdGhlIGN1cnJlbnQgZGF0ZT9cbiAqIEBwdXJlIGZhbHNlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBJcyB0aGUgZ2l2ZW4gZGF0ZSBpbiB0aGUgc2FtZSB3ZWVrIGFzIHRoZSBjdXJyZW50IGRhdGU/XG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIHRoZSBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGUgaXMgaW4gdGhpcyB3ZWVrXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgMjUgU2VwdGVtYmVyIDIwMTQsIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVGhpc1dlZWsobmV3IERhdGUoMjAxNCwgOCwgMjEpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDI1IFNlcHRlbWJlciAyMDE0IGFuZCB3ZWVrIHN0YXJ0cyB3aXRoIE1vbmRheVxuICogLy8gaXMgMjEgU2VwdGVtYmVyIDIwMTQgaW4gdGhpcyB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNUaGlzV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyMSksIHsgd2Vla1N0YXJ0c09uOiAxIH0pXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVGhpc1dlZWsoZGlydHlEYXRlLCBvcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lV2VlayhkaXJ0eURhdGUsIERhdGUubm93KCksIG9wdGlvbnMpO1xufSIsImltcG9ydCAqIGFzIGNyZWF0aW9uIGZyb20gXCIuL2RvbUNyZWF0aW9uXCJcclxuaW1wb3J0ICogYXMgZnVuYyBmcm9tIFwiLi9mdW5jdGlvblwiXHJcbmltcG9ydCAqIGFzIGJ1bmRsZSBmcm9tIFwiLi9mdW5jdGlvbkJ1bmRsZXJcIlxyXG5pbXBvcnQgKiBhcyBzdHIgZnJvbSBcIi4vc3RvcmFnZVwiXHJcbmltcG9ydCB7aXNUb2RheSAsIGlzVGhpc1dlZWt9IGZyb20gXCJkYXRlLWZuc1wiXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheU1lbnUoKSB7XHJcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW4jbWFpblwiKVxyXG4gICAgY29uc3QgdGFza0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza0NvbnRhaW5lclwiKVxyXG4gICAgbWFpbi5jbGFzc0xpc3QudG9nZ2xlKFwibWVudUlzTm90QWN0aXZlXCIpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5UHJvamVjdHMoZXZlbnQpIHtcclxuICAgIGNvbnN0IGRyb3BEb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kcm9wRG93blwiKVxyXG4gICAgY29uc3QgY2FyZXRTeW1ib2wgPSBldmVudC50YXJnZXQuY2hpbGRyZW5bMF1cclxuICAgIGlmIChkcm9wRG93bi5zdHlsZS5kaXNwbGF5ID09IFwibm9uZVwiKSB7XHJcbiAgICAgICAgZHJvcERvd24uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiXHJcbiAgICAgICAgY2FyZXRTeW1ib2wuY2xhc3NMaXN0LnRvZ2dsZShcImZhLWNhcmV0LWRvd25cIilcclxuICAgICAgICBjYXJldFN5bWJvbC5jbGFzc0xpc3QudG9nZ2xlKFwiZmEtY2FyZXQtdXBcIilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZHJvcERvd24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbiAgICAgICAgY2FyZXRTeW1ib2wuY2xhc3NMaXN0LnRvZ2dsZShcImZhLWNhcmV0LWRvd25cIilcclxuICAgICAgICBjYXJldFN5bWJvbC5jbGFzc0xpc3QudG9nZ2xlKFwiZmEtY2FyZXQtdXBcIilcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlNb2RhbChldmVudCl7XHJcbiAgICBjb25zdCBiYWNrZ3JvdW5kTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsQmFja2dyb3VuZFwiKVxyXG4gICAgaWYgKGJhY2tncm91bmRNb2RhbC5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHJldHVyblxyXG4gICAgYmFja2dyb3VuZE1vZGFsLmFwcGVuZENoaWxkKGNyZWF0aW9uLmNyZWF0ZVRhc2tNb2RhbChzdHIubWFzdGVyT2JqZWN0KSlcclxuXHJcbiAgICBjb25zdCBjcm9zcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmEteFwiKVxyXG4gICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYW5jZWxUYXNrQnRuXCIpXHJcbiAgICBjb25zdCBjb25maXJtVGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkVGFza0J0blwiKVxyXG4gICAgLy8gYWRkaW5nIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgZnVuYy5hZGRFdmVudChyZW1vdmVNb2RhbCxcImNsaWNrXCIsY3Jvc3MsY2FuY2VsQnRuKVxyXG4gICAgY29uZmlybVRhc2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsYnVuZGxlLmNyZWF0ZVRhc2spXHJcblxyXG4gICAgYmFja2dyb3VuZE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIlxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlTW9kYWwoZXZlbnQpIHtcclxuICAgIGNvbnN0IGJhY2tncm91bmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWxCYWNrZ3JvdW5kXCIpXHJcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKVxyXG4gICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYW5jZWxUYXNrQnRuXCIpXHJcbiAgICBjb25zdCBjcm9zcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmEteFwiKVxyXG4gICAgY29uc3QgY29uZmlybVRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tCdG5cIilcclxuXHJcbiAgICBmdW5jLnJlbW92ZUV2ZW50KHJlbW92ZU1vZGFsLFwiY2xpY2tcIixjcm9zcyxjYW5jZWxCdG4pXHJcbiAgICBjb25maXJtVGFzay5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIixidW5kbGUuY3JlYXRlVGFzaylcclxuXHJcbiAgICBiYWNrZ3JvdW5kTW9kYWwucmVtb3ZlQ2hpbGQoZm9ybSlcclxuICAgIGJhY2tncm91bmRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0Q3JlYXRpb24oZXZlbnQpIHtcclxuICAgIGNvbnN0IHByb2plY3RDcmVhdG9yID0gY3JlYXRpb24uY3JlYXRlUHJvamVjdENyZWF0b3IoKVxyXG4gICAgY29uc3QgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzXCIpXHJcbiAgICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRQcm9qZWN0XCIpXHJcbiAgICBjb25zdCBkcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZHJvcERvd25cIilcclxuICAgIGRyb3Bkb3duLmFwcGVuZENoaWxkKGNyZWF0aW9uLmNyZWF0ZVByb2plY3RDcmVhdG9yKCkpXHJcbiAgICAvLyAgYnV0dG9ucyBvbiBtb2RhbFxyXG4gICAgY29uc3QgY29uZmlybVByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFByb2plY3RCdG5cIilcclxuICAgIGNvbnN0IGNhbmNlbFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNlbFByb2plY3RCdG5cIilcclxuXHJcbiAgICBjb25maXJtUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYnVuZGxlLmNyZWF0ZVByb2plY3QpXHJcbiAgICBjYW5jZWxQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZW1vdmVQcm9qZWN0Q3JlYXRpb24pXHJcblxyXG4gICAgcHJvamVjdHMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbiAgICBhZGRQcm9qZWN0QnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVByb2plY3RDcmVhdGlvbihldmVudCkge1xyXG4gICAgY29uc3QgcHJvamVjdENyZWF0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RDcmVhdG9yXCIpXHJcbiAgICBjb25zdCBwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNcIilcclxuICAgIGNvbnN0IGFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFByb2plY3RcIilcclxuICAgIGNvbnN0IGRyb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kcm9wRG93blwiKSAgICBcclxuICAgIC8vICBidXR0b25zIG9uIG1vZGFsXHJcbiAgICBjb25zdCBjb25maXJtUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkUHJvamVjdEJ0blwiKVxyXG4gICAgY29uc3QgY2FuY2VsUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsUHJvamVjdEJ0blwiKVxyXG5cclxuICAgIGNvbmZpcm1Qcm9qZWN0QnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBidW5kbGUuY3JlYXRlUHJvamVjdClcclxuICAgIGNhbmNlbFByb2plY3RCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIscmVtb3ZlUHJvamVjdENyZWF0aW9uKVxyXG5cclxuXHJcbiAgICBkcm9wZG93bi5yZW1vdmVDaGlsZChwcm9qZWN0Q3JlYXRvcilcclxuICAgIHByb2plY3RzLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIlxyXG4gICAgYWRkUHJvamVjdEJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCJcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3RzKC4uLnByb2plY3RzKSB7XHJcbiAgICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0c1wiKVxyXG4gICAgcHJvamVjdHMuZm9yRWFjaChwcm9qZWN0PT57XHJcbiAgICAgICAgaWYgKHByb2plY3QudGl0bGUgPT0gXCJIb21lXCIpIHJldHVyblxyXG4gICAgICAgIGNvbnN0IHByb2plY3RFbGVtZW50ID0gcHJvamVjdC5wcm9qZWN0SFRNTDtcclxuICAgICAgICBjb25zdCB0cmFzaEljb24gPSBwcm9qZWN0RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmJpblwiKVxyXG4gICAgICAgIGNvbnN0IHRhc2tDb3VudGVyID0gcHJvamVjdEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrQ291bnRlclwiKVxyXG4gICAgICAgIFxyXG4gICAgICAgIHByb2plY3RFbGVtZW50LnNldEF0dHJpYnV0ZShcInByb2plY3RcIixgJHtwcm9qZWN0LnRpdGxlfWApXHJcbiAgICAgICAgcHJvamVjdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlbmRlci5wcm9qZWN0VGFza3MuYmluZChwcm9qZWN0KSlcclxuICAgICAgICBwcm9qZWN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCBwcm9qZWN0VGFza0NvdW50ZXIuYmluZChwcm9qZWN0KSlcclxuICAgICAgICB0cmFzaEljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuYy5yZW1vdmVQcm9qZWN0LmJpbmQocHJvamVjdCkpXHJcbiAgICAgICAgLy8gdGFza0NvdW50ZXIudGV4dENvbnRlbnQgPSBwcm9qZWN0LnRhc2tzLmxlbmd0aFxyXG5cclxuICAgICAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3RFbGVtZW50KVxyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZUFjdGl2YXRlZFByb2plY3QocHJvamVjdE5hbWUsZWxlbWVudCkge1xyXG4gICAgY29uc3QgYWN0aXZhdGVkUHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWN0aXZlXCIpXHJcbiAgICBhY3RpdmF0ZWRQcm9qZWN0LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcclxuICAgIHN0ci5tYXN0ZXJPYmplY3QuY2hhbmdlQ3VycmVudFByb2plY3QocHJvamVjdE5hbWUpXHJcbiAgICBlbGVtZW50LmNsb3Nlc3QoXCJsaVwiKS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVEZWZ1YWx0VGFza0NvdW50ZXJzKCkge1xyXG4gICAgY29uc3QgdGFza0NvdW50ZXIgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIudGFza0NvdW50ZXJcIilcclxuICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcImhvbWVcIikpe1xyXG4gICAgICAgIHRhc2tDb3VudGVyLnNldEF0dHJpYnV0ZShcInRhc2tDb3VudFwiLGAke3N0ci5tYXN0ZXJPYmplY3QudGFza3MubGVuZ3RofWApXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwidG9kYXlcIikpIHtcclxuICAgICAgICB0YXNrQ291bnRlci5zZXRBdHRyaWJ1dGUoXCJ0YXNrQ291bnRcIixgJHtzdHIubWFzdGVyT2JqZWN0LnRhc2tzLmZpbHRlcih0YXNrPT4oXHJcbiAgICAgICAgICAgIGlzVG9kYXkobmV3IERhdGUodGFzay5kdWVEYXRlKSkpKS5sZW5ndGh9YCk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwidXBjb21pbmdcIikpIHtcclxuICAgICAgICB0YXNrQ291bnRlci5zZXRBdHRyaWJ1dGUoXCJ0YXNrQ291bnRcIixgJHtzdHIubWFzdGVyT2JqZWN0LnRhc2tzLmZpbHRlcih0YXNrPT4oXHJcbiAgICAgICAgICAgIGlzVGhpc1dlZWsobmV3IERhdGUodGFzay5kdWVEYXRlKSkpKS5sZW5ndGh9YCk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY29tcGxldGVkXCIpKSB7XHJcbiAgICAgICAgdGFza0NvdW50ZXIuc2V0QXR0cmlidXRlKFwidGFza0NvdW50XCIsYCR7c3RyLm1hc3Rlck9iamVjdC50YXNrcy5maWx0ZXIodGFzaz0+KFxyXG4gICAgICAgICAgICB0YXNrLmNvbXBsZXRpb24pKS5sZW5ndGh9YCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0VGFza0NvdW50ZXIgKGV2ZW50KSB7XHJcbiAgICBjb25zdCB0YXNrQ291bnRlciA9IGV2ZW50LnRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tDb3VudGVyXCIpIFxyXG4gICAgdGFza0NvdW50ZXIuc2V0QXR0cmlidXRlKFwidGFza0NvdW50XCIsYCR7dGhpcy50YXNrcy5sZW5ndGh9YClcclxufVxyXG4gLy8gdGFzayBjaGFuaW5nIG1vZHVsZVxyXG5leHBvcnQgY29uc3QgcmVuZGVyID0gKChtYXN0ZXJPYmopPT57XHJcbiAgICBjb25zdCBzZWxlY3Rpb25UaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMi5zZWxlY3Rpb25UaXRsZVwiKVxyXG4gICAgY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tzXCIpXHJcblxyXG4gICAgZnVuY3Rpb24gaG9tZVRhc2tzKGV2ZW50KSB7XHJcbiAgICAgICAgdGFza3NDb250YWluZXIuaW5uZXJIVE1MPVwiXCJcclxuICAgICAgICBzZWxlY3Rpb25UaXRsZS50ZXh0Q29udGVudCA9IFwiSG9tZVwiXHJcbiAgICAgICAgY29uc3QgZXZlbnRFbGVtZW50ID0gZXZlbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCA/XHJcbiAgICAgICAgICAgIGV2ZW50IDogZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIGNoYW5nZUFjdGl2YXRlZFByb2plY3QoXCJIb21lXCIsZXZlbnRFbGVtZW50KVxyXG5cclxuICAgICAgICBtYXN0ZXJPYmoudGFza3MuZm9yRWFjaCh0YXNrPT57XHJcbiAgICAgICAgICAgIHRhc2tzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2sudGFza0hUTUwpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHRvZGF5VGFza3MoZXZlbnQpe1xyXG4gICAgICAgIHRhc2tzQ29udGFpbmVyLmlubmVySFRNTD1cIlwiXHJcbiAgICAgICAgc2VsZWN0aW9uVGl0bGUudGV4dENvbnRlbnQgPSBcIlRvZGF5XCJcclxuICAgICAgICBjaGFuZ2VBY3RpdmF0ZWRQcm9qZWN0KFwiVG9kYXlcIixldmVudC50YXJnZXQpXHJcblxyXG4gICAgICAgIG1hc3Rlck9iai50YXNrcy5mb3JFYWNoKHRhc2s9PntcclxuICAgICAgICAgICAgaWYgKGlzVG9kYXkobmV3IERhdGUodGFzay5kdWVEYXRlKSkpXHJcbiAgICAgICAgICAgICAgICB0YXNrc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrLnRhc2tIVE1MKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHdlZWtUYXNrcyhldmVudCl7XHJcbiAgICAgICAgdGFza3NDb250YWluZXIuaW5uZXJIVE1MPVwiXCJcclxuICAgICAgICBzZWxlY3Rpb25UaXRsZS50ZXh0Q29udGVudCA9IFwiVXBjb21pbmdcIlxyXG4gICAgICAgIGNoYW5nZUFjdGl2YXRlZFByb2plY3QoXCJVcGNvbWluZ1wiLGV2ZW50LnRhcmdldClcclxuXHJcbiAgICAgICAgbWFzdGVyT2JqLnRhc2tzLmZvckVhY2godGFzaz0+e1xyXG4gICAgICAgICAgICBpZiAoaXNUaGlzV2VlayhuZXcgRGF0ZSh0YXNrLmR1ZURhdGUpKSlcclxuICAgICAgICAgICAgICAgIHRhc2tzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2sudGFza0hUTUwpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29tcGxldGVkVGFza3MgKGV2ZW50KSB7XHJcbiAgICAgICAgdGFza3NDb250YWluZXIuaW5uZXJIVE1MPVwiXCJcclxuICAgICAgICBzZWxlY3Rpb25UaXRsZS50ZXh0Q29udGVudCA9IFwiQ29tcGxldGVkXCJcclxuICAgICAgICBjaGFuZ2VBY3RpdmF0ZWRQcm9qZWN0KFwiQ29tcGxldGVkXCIsZXZlbnQudGFyZ2V0KVxyXG4gICAgICAgIFxyXG4gICAgICAgIG1hc3Rlck9iai50YXNrcy5mb3JFYWNoKHRhc2s9PntcclxuICAgICAgICAgICAgaWYgKHRhc2suY29tcGxldGlvbilcclxuICAgICAgICAgICAgICAgIHRhc2tzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2sudGFza0hUTUwpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHByb2plY3RUYXNrcyAoZXZlbnQpIHtcclxuICAgICAgICB0YXNrc0NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiXHJcbiAgICAgICAgc2VsZWN0aW9uVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLnRpdGxlXHJcbiAgICAgICAgY2hhbmdlQWN0aXZhdGVkUHJvamVjdCh0aGlzLnRpdGxlLGV2ZW50LnRhcmdldClcclxuICAgICAgICB0aGlzLnRhc2tzLmZvckVhY2godGFzaz0+e1xyXG4gICAgICAgICAgICB0YXNrc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrLnRhc2tIVE1MKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBob21lVGFza3MsXHJcbiAgICAgICAgdG9kYXlUYXNrcyxcclxuICAgICAgICB3ZWVrVGFza3MsXHJcbiAgICAgICAgY29tcGxldGVkVGFza3MsXHJcbiAgICAgICAgcHJvamVjdFRhc2tzLFxyXG5cclxuICAgIH1cclxufSkoc3RyLm1hc3Rlck9iamVjdCkiLCJpbXBvcnQgKiBhcyBzdHIgZnJvbSBcIi4vbW9kdWxlcy9zdG9yYWdlXCJcclxuaW1wb3J0ICogYXMgVUkgZnJvbSBcIi4vbW9kdWxlcy9VSW1hbml1cHVsYXRpb25cIlxyXG5pbXBvcnQgKiBhcyBmdW5jIGZyb20gXCIuL21vZHVsZXMvZnVuY3Rpb25cIlxyXG4vLyBlbGVtZW50c1xyXG5jb25zdCBtZW51SWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudUljb25cIilcclxuY29uc3QgcHJvamVjdHNEcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNUaXRsZVwiKVxyXG5jb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRUYXNrXCIpXHJcbmNvbnN0IGFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFByb2plY3RcIilcclxuY29uc3Qgc2lkZUJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJhc2lkZVwiKVxyXG5jb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW5cIilcclxuY29uc3QgaG9tZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaG9tZVwiKVxyXG5jb25zdCB0b2RheUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kYXlcIilcclxuY29uc3QgdXBjb21pbmdCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnVwY29taW5nXCIpXHJcbmNvbnN0IGNvbXBsZXRlZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29tcGxldGVkXCIpXHJcbmNvbnN0IGFsbFByb2plY3RzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaVwiKV1cclxuLy8gZXZlbnQgbGlzdGVuZXJzXHJcbm1lbnVJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiICwgVUkuZGlzcGxheU1lbnUpXHJcbnByb2plY3RzRHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIFVJLmRpc3BsYXlQcm9qZWN0cylcclxuYWRkVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixVSS5kaXNwbGF5TW9kYWwpXHJcbmFkZFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsVUkuZGlzcGxheVByb2plY3RDcmVhdGlvbilcclxuLy8gbWVudSBidXR0b25zXHJcbmhvbWVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsVUkucmVuZGVyLmhvbWVUYXNrcylcclxudG9kYXlCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsVUkucmVuZGVyLnRvZGF5VGFza3MpXHJcbnVwY29taW5nQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLFVJLnJlbmRlci53ZWVrVGFza3MpXHJcbmNvbXBsZXRlZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixVSS5yZW5kZXIuY29tcGxldGVkVGFza3MpXHJcbmFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdD0+XHJcbiAgICBwcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsVUkudXBkYXRlRGVmdWFsdFRhc2tDb3VudGVycykpO1xyXG5cclxuXHJcblxyXG4vLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLGUgPT5cclxuLy8gICAgIHNpZGVCYXIuc3R5bGUuaGVpZ2h0ID0gYCR7bWFpbi5zY3JvbGxIZWlnaHR9cHhgKVxyXG4vLyBvdGhlclxyXG5VSS5hZGRQcm9qZWN0cyguLi5zdHIubWFzdGVyT2JqZWN0LnByb2plY3RzKVxyXG5VSS5yZW5kZXIuaG9tZVRhc2tzKGhvbWVCdG4pXHJcbi8vIGFkZGluZyB0YXNrIGNvdW50ZXIgXHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVQcm9qZWN0Q3JlYXRvciIsInByb2plY3RDcmVhdG9yIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJIVE1MIiwiUHJvamVjdCIsImNvbnN0cnVjdG9yIiwidGl0bGUiLCJ0aGlzIiwidGFza3MiLCJwcm9qZWN0SFRNTCIsInByb2plY3RUaXRsZSIsImFkZFRhc2siLCJ0YXNrIiwicHVzaCIsInJlbW92ZVRhc2siLCJ0YXNrSW5kZXgiLCJzcGxpY2UiLCJkZXNjcmlwdGlvbiIsInByaW9yaXR5IiwiZHVlRGF0ZSIsInByb2plY3QiLCJjb21wbGV0aW9uIiwidGFza0hUTUwiLCJzZXRBdHRyaWJ1dGUiLCJwcm9qZWN0cyIsImN1cnJlbnRQcm9qZWN0IiwicmVkdWNlIiwidGFza3NBcnJheSIsImNvbmNhdCIsImNoYW5nZUN1cnJlbnRQcm9qZWN0IiwibmV3Q3VycmVudFByb2plY3QiLCJjcmVhdGVGaXJzdFRpbWVNYXN0ZXJPYmoiLCJtYXN0ZXJPYmplY3QiLCJleGFtcGxlVGFzayIsImxvY2FsU3RvcmFnZSIsImNsZWFyIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlbW92ZVByb2plY3QiLCJldmVudCIsInJlbW92ZWRQcm9qZWN0SW5kZXgiLCJ0YXJnZXQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYmluZCIsInF1ZXJ5U2VsZWN0b3IiLCJyZW1vdmVkUHJvamVjdCIsInBhcmVudEVsZW1lbnQiLCJyZW1vdmVDaGlsZCIsInN0b3BQcm9wYWdhdGlvbiIsImNoZWNrTmFtZVZhbGlkaXR5IiwibmFtZSIsInRlc3QiLCJ2YWxpZGl0eSIsIm1lc3NhZ2UiLCJ0b0xvd2VyQ2FzZSIsImNoZWNrUmVwZWF0ZWRQcm9qZWN0TmFtZSIsInN0b3JlZE1hc3Rlck9iamVjdCIsInBhcnNlIiwibmV3TWFzdGVyT2JqZWN0IiwibWFwIiwibmV3UHJvamVjdCIsIk9iamVjdCIsImFzc2lnbiIsImlucHV0RmllbGQiLCJ2YWx1ZUluZm8iLCJ2YWx1ZSIsImVycm9yTXNnIiwidGV4dENvbnRlbnQiLCJzZXRUaW1lb3V0IiwiaW5wdXRWYWx1ZSIsIm1hc3Rlck9iaiIsInRhc2tOYW1lRmllbGQiLCJ0YXNrRGVzY3JpcHRpb24iLCJ0YXNrUHJpb3JpdHkiLCJwcm9qZWN0U2VsZWN0ZWQiLCJ0YXNrTmFtZUluZm8iLCJ1c2VhYmxlRGF0ZSIsImRhdGUiLCJyZXBsYWNlIiwibmV3VGFzayIsImZpbmQiLCJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsImFyZ3MiLCJsZW5ndGgiLCJUeXBlRXJyb3IiLCJfdHlwZW9mIiwib2JqIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJwcm90b3R5cGUiLCJ0b0RhdGUiLCJhcmd1bWVudCIsImFyZ3VtZW50cyIsImFyZ1N0ciIsInRvU3RyaW5nIiwiY2FsbCIsIkRhdGUiLCJnZXRUaW1lIiwiY29uc29sZSIsIndhcm4iLCJFcnJvciIsInN0YWNrIiwiTmFOIiwic3RhcnRPZkRheSIsImRpcnR5RGF0ZSIsInNldEhvdXJzIiwiaXNTYW1lRGF5IiwiZGlydHlEYXRlTGVmdCIsImRpcnR5RGF0ZVJpZ2h0IiwiZGF0ZUxlZnRTdGFydE9mRGF5IiwiZGF0ZVJpZ2h0U3RhcnRPZkRheSIsImlzVG9kYXkiLCJub3ciLCJ0b0ludGVnZXIiLCJkaXJ0eU51bWJlciIsIm51bWJlciIsIk51bWJlciIsImlzTmFOIiwiTWF0aCIsImNlaWwiLCJmbG9vciIsImRlZmF1bHRPcHRpb25zIiwiZ2V0RGVmYXVsdE9wdGlvbnMiLCJzdGFydE9mV2VlayIsIm9wdGlvbnMiLCJfcmVmIiwiX3JlZjIiLCJfcmVmMyIsIl9vcHRpb25zJHdlZWtTdGFydHNPbiIsIl9vcHRpb25zJGxvY2FsZSIsIl9vcHRpb25zJGxvY2FsZSRvcHRpbyIsIl9kZWZhdWx0T3B0aW9ucyRsb2NhbCIsIl9kZWZhdWx0T3B0aW9ucyRsb2NhbDIiLCJ3ZWVrU3RhcnRzT24iLCJsb2NhbGUiLCJSYW5nZUVycm9yIiwiZGF5IiwiZ2V0RGF5IiwiZGlmZiIsInNldERhdGUiLCJnZXREYXRlIiwiaXNTYW1lV2VlayIsImRhdGVMZWZ0U3RhcnRPZldlZWsiLCJkYXRlUmlnaHRTdGFydE9mV2VlayIsImlzVGhpc1dlZWsiLCJyZW1vdmVNb2RhbCIsImJhY2tncm91bmRNb2RhbCIsImZvcm0iLCJjYW5jZWxCdG4iLCJjcm9zcyIsImNvbmZpcm1UYXNrIiwiZnVuYyIsImVsZW1lbnRzIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJzdHlsZSIsImRpc3BsYXkiLCJyZW1vdmVQcm9qZWN0Q3JlYXRpb24iLCJhZGRQcm9qZWN0QnRuIiwiZHJvcGRvd24iLCJjb25maXJtUHJvamVjdEJ0biIsImNhbmNlbFByb2plY3RCdG4iLCJhZGRQcm9qZWN0cyIsInByb2plY3RDb250YWluZXIiLCJwcm9qZWN0RWxlbWVudCIsInRyYXNoSWNvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW5kZXIiLCJwcm9qZWN0VGFza3MiLCJwcm9qZWN0VGFza0NvdW50ZXIiLCJhcHBlbmRDaGlsZCIsImNoYW5nZUFjdGl2YXRlZFByb2plY3QiLCJwcm9qZWN0TmFtZSIsInJlbW92ZSIsImNsb3Nlc3QiLCJ1cGRhdGVEZWZ1YWx0VGFza0NvdW50ZXJzIiwidGFza0NvdW50ZXIiLCJjb250YWlucyIsInNlbGVjdGlvblRpdGxlIiwidGFza3NDb250YWluZXIiLCJob21lVGFza3MiLCJIVE1MRWxlbWVudCIsInRvZGF5VGFza3MiLCJ3ZWVrVGFza3MiLCJjb21wbGV0ZWRUYXNrcyIsIm1lbnVJY29uIiwicHJvamVjdHNEcm9wZG93biIsImFkZFRhc2tCdG4iLCJob21lQnRuIiwidG9kYXlCdG4iLCJ1cGNvbWluZ0J0biIsImNvbXBsZXRlZEJ0biIsImFsbFByb2plY3RzIiwicXVlcnlTZWxlY3RvckFsbCIsIm1haW4iLCJ0b2dnbGUiLCJkcm9wRG93biIsImNhcmV0U3ltYm9sIiwiY2hpbGRyZW4iLCJjaGlsZE5vZGVzIiwidGFza0NyZWF0b3IiLCJwcm9qZWN0U2VsZWN0b3IiLCJvcHRpb24iLCJzZWxlY3RlZCJdLCJzb3VyY2VSb290IjoiIn0=